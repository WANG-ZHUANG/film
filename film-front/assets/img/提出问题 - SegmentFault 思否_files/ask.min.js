var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("template",["jquery"],function(e){"use strict";return function(t,n){var r;return r=t||"",e.each(n,function(t,n){var o,i;o="undefined"==typeof n?"undefined":_typeof(n),i=new RegExp("{{\\s*"+t+"\\s*}}","g"),"object"===o&&null!==n?e.each(n,function(e,n){var o;o=new RegExp("{{\\s*"+t+"."+e+"\\s*}}","g"),r=r.replace(o,n)}):r=r.replace(i,n)}),r}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("sfModal",["jquery","template","bootstrap"],function(e,t){"use strict";return function(n){var r,o;if("object"!==("undefined"==typeof n?"undefined":_typeof(n))){if("hide"===n)return void e(".sfmodal").modal("hide");if("toggle"===n)return void e(".sfmodal").modal("toggle");n={content:n,hideDone:!0}}r=e.extend({hideTitle:!1,hideFooter:!1,modalSize:"",title:"操作失败",content:"玩脱了",wrapper:null,$content:null,hideClose:!1,closeText:"取消",closeClass:"btn-default",backdrop:!0,closeFn:function(){},hideDone:!1,doneText:"确认",doneClass:"btn-primary",keyboard:"true",afterShow:function(){},doneFn:function(){e(".sfmodal").modal("hide")},show:function(){},shown:function(){},hide:function(){},hidden:function(){},loaded:function(){}},n),o='<div class="sfmodal modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">  <div class="modal-dialog {{modalSize}}">    <div class="modal-content">      '+(r.hideTitle?"":'<div class="modal-header">        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>        <h4 class="modal-title">{{title}}</h4>      </div>')+'<div class="modal-body">        <div class="sfModal-content">          </div></div>          <div class="modal-footer '+(r.hideFooter?"hidden":"")+'">'+(r.hideClose?"":'<button type="button" class="btn {{closeClass}}" data-dismiss="modal">{{closeText}}</button>')+(r.hideDone?"":'<button type="button" class="btn {{doneClass}} done-btn">{{doneText}}</button>')+"</div>        </div>      </div>    </div>",e(".sfmodal").length>0&&(e(".sfmodal").remove(),e(".modal-backdrop").remove()),r.wrapper?(e(r.wrapper).append(t(o,r)),e(r.wrapper).append('<div class="modal-backdrop in"></div>')):e("body").append(t(o,r)),r.$content?e(".sfmodal .sfModal-content").append(r.$content):e(".sfmodal .sfModal-content").html(r.content),e(".sfmodal").modal({keyboard:r.keyboard,backdrop:r.backdrop}),e(".sfmodal").on("show.bs.modal",r.show).on("hide.bs.modal",function(t){r.hide(t),r.wrapper&&e(".modal-backdrop").remove()}).on("hidden.bs.modal",r.hidden).on("loaded.bs.modal",r.loaded).on("shown.bs.modal",r.shown).modal("show"),r.afterShow&&r.afterShow(),e(".sfmodal .done-btn").click(function(t){r.doneFn(t),r.wrapper&&e(".modal-backdrop").remove()}),e(".sfmodal .close-btn").click(function(t){r.closeFn(t),r.wrapper&&e(".modal-backdrop").remove()})}}),define("getRelated",["jquery","template","sfModal"],function(e,t,n){"use strict";return function(r,o,i,a,s){var l,c,u;r&&(c=r+"",o=o||'<li class="widget-links__item">                <a href="javascript:void(0);" class="ranks" data-toggle="tooltip" data-placement="top" title="{{ answers }}个回答">{{ answers }}</a>                <a href="{{ url }}">{{ title }}</a>            </li>',u={},l="",16===c.length&&0===c.indexOf("101")?(l="GET",u={do:"related",id:c}):(l="GET",u={q:c}),e.ajax({url:"/api/question/search",data:u,type:l,dataType:"json"}).done(function(r){var l;if(0!==r.status)n("○|￣|_ 服务器跪了！");else{if(0===r.data.length)return void(a&&(e("#titleSuggest").hide(),e(i).html(a)));s&&(r.data=r.data.slice(0,s)),l="",r.data.forEach(function(e){e.isAccepted?(e.acceptedWord=" | 解决",e.isSolved=" | 已解决"):(e.acceptedWord="",e.isSolved=""),l+=t(o,e)}),e("#titleSuggest").removeClass("hidden").show(),e(i).html(l),e(i).find(".ranks").tooltip()}}))}}),define("mobile",["jquery"],function(e){return window.innerWidth>767?{login:null,signup:null}:(e(".hate, .like").data("toggle","false"),{login:function(){location.href="/user/login"},signup:function(){location.href="/user/register"}})}),define("isMobile",[],function(){var e;return e=function(e){var t,n;return t={Android:function(){return!!navigator.userAgent.match(/Android/i)},BlackBerry:function(){return!!navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)},Windows:function(){return!!navigator.userAgent.match(/IEMobile/i)},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Windows()}},n=t[e]()||!1}}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("socket.io",[],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.io=e()}}(function(){var e;return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,n){function r(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r=o(e),i=r.source,c=r.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(s("ignoring socket cache for %s",i),n=a(i,t)):(l[c]||(s("new io instance for %s",i),l[c]=a(i,t)),n=l[c]),n.socket(r.path)}var o=e("./url"),i=e("socket.io-parser"),a=e("./manager"),s=e("debug")("socket.io-client");t.exports=n=r;var l=n.managers={};n.protocol=i.protocol,n.connect=r,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:10,"socket.io-parser":44}],3:[function(e,t,n){function r(e,t){return this instanceof r?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new r(e,t)}var o=(e("./url"),e("engine.io-client")),i=e("./socket"),a=e("component-emitter"),s=e("socket.io-parser"),l=e("./on"),c=e("component-bind"),u=(e("object-component"),e("debug")("socket.io-client:manager")),p=e("indexof"),d=e("backo2");t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},r.prototype.updateSocketIds=function(){for(var e in this.nsps)this.nsps[e].id=this.engine.id},a(r.prototype),r.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},r.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},r.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(e){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=o(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var r=l(t,"open",function(){n.onopen(),e&&e()}),i=l(t,"error",function(t){if(u("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;u("connect attempt will timeout after %d",a);var s=setTimeout(function(){u("connect attempt timed out after %d",a),r.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(r),this.subs.push(i),this},r.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",c(this,"ondata"))),this.subs.push(l(this.decoder,"decoded",c(this,"ondecoded"))),this.subs.push(l(e,"error",c(this,"onerror"))),this.subs.push(l(e,"close",c(this,"onclose")))},r.prototype.ondata=function(e){this.decoder.add(e)},r.prototype.ondecoded=function(e){this.emit("packet",e)},r.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},r.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new i(this,e),this.nsps[e]=t;var n=this;t.on("connect",function(){t.id=n.engine.id,~p(n.connected,t)||n.connected.push(t)})}return t},r.prototype.destroy=function(e){var t=p(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},r.prototype.packet=function(e){u("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var n=0;n<e.length;n++)t.engine.write(e[n]);t.encoding=!1,t.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},r.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(e){u("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":4,"./socket":5,"./url":6,backo2:7,"component-bind":8,"component-emitter":9,debug:10,"engine.io-client":11,indexof:40,"object-component":41,"socket.io-parser":44}],4:[function(e,t,n){function r(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}t.exports=r},{}],5:[function(e,t,n){function r(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var o=e("socket.io-parser"),i=e("component-emitter"),a=e("to-array"),s=e("./on"),l=e("component-bind"),c=e("debug")("socket.io-client:socket"),u=e("has-binary");t.exports=n=r;var p={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},d=i.prototype.emit;i(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",l(this,"onopen")),s(e,"packet",l(this,"onpacket")),s(e,"close",l(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},r.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},r.prototype.emit=function(e){if(p.hasOwnProperty(e))return d.apply(this,arguments),this;var t=a(arguments),n=o.EVENT;u(t)&&(n=o.BINARY_EVENT);var r={type:n,data:t};return"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this},r.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},r.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:o.CONNECT})},r.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},r.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case o.CONNECT:this.onconnect();break;case o.EVENT:this.onevent(e);break;case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:this.onack(e);break;case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",e.data)}},r.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},r.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=a(arguments);c("sending ack %j",r);var i=u(r)?o.BINARY_ACK:o.ACK;t.packet({type:i,id:e,data:r})}}},r.prototype.onack=function(e){c("calling ack %s with %j",e.id,e.data);var t=this.acks[e.id];t.apply(this,e.data),delete this.acks[e.id]},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":8,"component-emitter":9,debug:10,"has-binary":36,"socket.io-parser":44,"to-array":48}],6:[function(e,t,n){(function(n){function r(e,t){var r=e,t=t||n.location;return null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.hostname+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),r=o(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/",r.id=r.protocol+"://"+r.host+":"+r.port,r.href=r.protocol+"://"+r.host+(t&&t.port==r.port?"":":"+r.port),r}var o=e("parseuri"),i=e("debug")("socket.io-client:url");t.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:10,parseuri:42}],7:[function(e,t,n){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},{}],8:[function(e,t,n){var r=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},{}],9:[function(e,t,n){function r(e){if(e)return o(e)}function o(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],10:[function(e,t,n){function r(e){return r.enabled(e)?function(t){t=o(t);var n=new Date,i=n-(r[e]||n);r[e]=n,t=e+" "+t+" +"+r.humanize(i),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function o(e){return e instanceof Error?e.stack||e.message:e}t.exports=r,r.names=[],r.skips=[],r.enable=function(e){try{localStorage.debug=e}catch(e){}for(var t=(e||"").split(/[\s,]+/),n=t.length,o=0;o<n;o++)e=t[o].replace("*",".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$"))},r.disable=function(){r.enable("")},r.humanize=function(e){var t=1e3,n=6e4,r=60*n;return e>=r?(e/r).toFixed(1)+"h":e>=n?(e/n).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},r.enabled=function(e){for(var t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(var t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1};try{window.localStorage&&r.enable(localStorage.debug)}catch(e){}},{}],11:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":12}],12:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":13,"engine.io-parser":25}],13:[function(e,t,n){(function(n){function r(e,t){if(!(this instanceof r))return new r(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=u(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.host){var o=t.host.split(":");t.hostname=o.shift(),o.length?t.port=o.pop():t.port||(t.port=this.secure?"443":"80")}this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized||null,this.open()}function o(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var i=e("./transports"),a=e("component-emitter"),s=e("debug")("engine.io-client:socket"),l=e("indexof"),c=e("engine.io-parser"),u=e("parseuri"),p=e("parsejson"),d=e("parseqs");t.exports=r,r.priorWebsocketSuccess=!1,a(r.prototype),r.protocol=c.protocol,r.Socket=r,r.Transport=e("./transport"),r.transports=e("./transports"),r.parser=e("engine.io-parser"),r.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=o(this.query);t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new i[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return n},r.prototype.open=function(){var e;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1)e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";var e;try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},r.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},r.prototype.probe=function(e){function t(){if(d.onlyBinaryUpgrades){var t=!this.supportsBinary&&d.transport.supportsBinary;p=p||t}p||(s('probe transport "%s" opened',e),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(t){if(!p)if("pong"==t.type&&"probe"==t.data){if(s('probe transport "%s" pong',e),d.upgrading=!0,d.emit("upgrading",u),!u)return;r.priorWebsocketSuccess="websocket"==u.name,s('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){p||"closed"!=d.readyState&&(s("changing transport and sending upgrade packet"),c(),d.setTransport(u),u.send([{type:"upgrade"}]),d.emit("upgrade",u),u=null,d.upgrading=!1,d.flush())})}else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=u.name,d.emit("upgradeError",n)}}))}function n(){p||(p=!0,c(),u.close(),u=null)}function o(t){var r=new Error("probe error: "+t);r.transport=u.name,n(),s('probe transport "%s" failed because of error: %s',e,t),d.emit("upgradeError",r)}function i(){o("transport closed")}function a(){o("socket closed")}function l(e){u&&e.name!=u.name&&(s('"%s" works - aborting "%s"',e.name,u.name),n())}function c(){u.removeListener("open",t),u.removeListener("error",o),u.removeListener("close",i),d.removeListener("close",a),d.removeListener("upgrading",l)}s('probing transport "%s"',e);var u=this.createTransport(e,{probe:1}),p=!1,d=this;r.priorWebsocketSuccess=!1,u.once("open",t),u.once("error",o),u.once("close",i),this.once("close",a),this.once("upgrading",l),u.open()},r.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},r.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(p(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},r.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},r.prototype.ping=function(){this.sendPacket("ping")},r.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},r.prototype.sendPacket=function(e,t,n){if("closing"!=this.readyState&&"closed"!=this.readyState){var r={type:e,data:t};this.emit("packetCreate",r),this.writeBuffer.push(r),this.callbackBuffer.push(n),this.flush()}},r.prototype.close=function(){function e(){r.onClose("forced close"),s("socket closing - telling transport to close"),r.transport.close()}function t(){r.removeListener("upgrade",t),r.removeListener("upgradeError",t),e()}function n(){r.once("upgrade",t),r.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},r.prototype.onError=function(e){s("socket error %j",e),r.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},r.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){s('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){n.writeBuffer=[],n.callbackBuffer=[],n.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},r.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~l(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":14,"./transports":15,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:40,parsejson:32,parseqs:33,parseuri:34}],14:[function(e,t,n){function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized}var o=e("engine.io-parser"),i=e("component-emitter");t.exports=r,i(r.prototype),r.timestamps=0,r.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},r.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(e){var t=o.decodePacket(e,this.socket.binaryType);this.onPacket(t)},r.prototype.onPacket=function(e){this.emit("packet",e)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":9,"engine.io-parser":25}],15:[function(e,t,n){(function(t){function r(e){var n,r=!1,s=!1,l=!1!==e.jsonp;if(t.location){var c="https:"==location.protocol,u=location.port;u||(u=c?443:80),r=e.hostname!=location.hostname||u!=e.port,s=e.secure!=c}if(e.xdomain=r,e.xscheme=s,n=new o(e),"open"in n&&!e.forceJSONP)return new i(e);if(!l)throw new Error("JSONP disabled");return new a(e)}var o=e("xmlhttprequest"),i=e("./polling-xhr"),a=e("./polling-jsonp"),s=e("./websocket");n.polling=r,n.websocket=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(e,t,n){(function(n){function r(){}function o(e){i.call(this,e),this.query=this.query||{},s||(n.___eio||(n.___eio=[]),s=n.___eio),this.index=s.length;var t=this;s.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=r)},!1)}var i=e("./polling"),a=e("component-inherit");t.exports=o;var s,l=/\n/g,c=/\\n/g;a(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),this.script=t;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},o.prototype.doWrite=function(e,t){function n(){r(),t()}function r(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(e);
}catch(e){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,a=document.createElement("form"),s=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=u,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),r(),e=e.replace(c,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==o.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-inherit":21}],17:[function(e,t,n){(function(n){function r(){}function o(e){if(l.call(this,e),n.location){var t="https:"==location.protocol,r=location.port;r||(r=t?443:80),this.xd=e.hostname!=n.location.hostname||r!=e.port,this.xs=e.secure!=t}}function i(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.create()}function a(){for(var e in i.requests)i.requests.hasOwnProperty(e)&&i.requests[e].abort()}var s=e("xmlhttprequest"),l=e("./polling"),c=e("component-emitter"),u=e("component-inherit"),p=e("debug")("engine.io-client:polling-xhr");t.exports=o,t.exports.Request=i,u(o,l),o.prototype.supportsBinary=!0,o.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,new i(e)},o.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),o=this;r.on("success",t),r.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=r},o.prototype.doPoll=function(){p("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},c(i.prototype),i.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new s(e),r=this;try{if(p("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async),this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?r.onLoad():setTimeout(function(){r.onError(t.status)},0))},p("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){r.onError(e)},0)}n.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},i.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},i.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,e)try{this.xhr.abort()}catch(e){}n.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},i.prototype.hasXDR=function(){return"undefined"!=typeof n.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},n.document&&(i.requestsCount=0,i.requests={},n.attachEvent?n.attachEvent("onunload",a):n.addEventListener&&n.addEventListener("beforeunload",a,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-emitter":9,"component-inherit":21,debug:22,xmlhttprequest:20}],18:[function(e,t,n){function r(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),o.call(this,e)}var o=e("../transport"),i=e("parseqs"),a=e("engine.io-parser"),s=e("component-inherit"),l=e("debug")("engine.io-client:polling");t.exports=r;var c=function(){var t=e("xmlhttprequest"),n=new t({xdomain:!1});return null!=n.responseType}();s(r,o),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(e){function t(){l("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(l("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){l("pre-pause polling complete"),--r||t()})),this.writable||(l("we are currently writing - waiting to pause"),r++,this.once("drain",function(){l("pre-pause writing complete"),--r||t()}))}else t()},r.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(e){var t=this;l("polling got data %s",e);var n=function(e,n,r){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};a.decodePayload(e,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},r.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")},t=this;a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+o.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:33,xmlhttprequest:20}],19:[function(e,t,n){function r(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),o.call(this,e)}var o=e("../transport"),i=e("engine.io-parser"),a=e("parseqs"),s=e("component-inherit"),l=e("debug")("engine.io-client:websocket"),c=e("ws");t.exports=r,s(r,o),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.ws=new c(e,t,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(r.prototype.onData=function(e){var t=this;setTimeout(function(){o.prototype.onData.call(t,e)},0)}),r.prototype.write=function(e){function t(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;for(var r=0,o=e.length;r<o;r++)i.encodePacket(e[r],this.supportsBinary,function(e){try{n.ws.send(e)}catch(e){l("websocket closed before onclose event")}});setTimeout(t,0)},r.prototype.onClose=function(){o.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),e=a.encode(e),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e},r.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===r.prototype.name)}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:33,ws:35}],20:[function(e,t,n){var r=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":38}],21:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],22:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function i(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(e){}}function s(){var e;try{e=localStorage.debug}catch(e){}return e}n=t.exports=e("./debug"),n.log=i,n.formatArgs=o,n.save=a,n.load=s,n.useColors=r,n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(s())},{"./debug":23}],23:[function(e,t,n){function r(){return n.colors[u++%n.colors.length]}function o(e){function t(){}function o(){var e=o,t=+new Date,i=t-(c||t);e.diff=i,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var a=Array.prototype.slice.call(arguments);a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;s++;var o=n.formatters[r];if("function"==typeof o){var i=a[s];t=o.call(e,i),a.splice(s,1),s--}return t}),"function"==typeof n.formatArgs&&(a=n.formatArgs.apply(e,a));var l=o.log||n.log||console.log.bind(console);l.apply(e,a)}t.enabled=!1,o.enabled=!0;var i=n.enabled(e)?o:t;return i.namespace=e,i}function i(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,o=0;o<r;o++)t[o]&&(e=t[o].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function a(){n.enable("")}function s(e){var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=o,n.coerce=l,n.disable=a,n.enable=i,n.enabled=s,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var c,u=0},{ms:24}],24:[function(e,t,n){function r(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"y":return n*p;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"h":return n*c;case"minutes":case"minute":case"m":return n*l;case"seconds":case"second":case"s":return n*s;case"ms":return n}}}function o(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=l?Math.round(e/l)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function i(e){return a(e,u,"day")||a(e,c,"hour")||a(e,l,"minute")||a(e,s,"second")||e+" ms"}function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,l=60*s,c=60*l,u=24*c,p=365.25*u;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t.long?i(e):o(e)}},{}],25:[function(e,t,n){(function(t){function r(e,t){var r="b"+n.packets[e.type]+e.data.data;return t(r)}function o(e,t,r){if(!t)return n.encodeBase64Packet(e,r);var o=e.data,i=new Uint8Array(o),a=new Uint8Array(1+o.byteLength);a[0]=v[e.type];for(var s=0;s<i.length;s++)a[s+1]=i[s];return r(a.buffer)}function i(e,t,r){if(!t)return n.encodeBase64Packet(e,r);var o=new FileReader;return o.onload=function(){e.data=o.result,n.encodePacket(e,t,!0,r)},o.readAsArrayBuffer(e.data)}function a(e,t,r){if(!t)return n.encodeBase64Packet(e,r);if(g)return i(e,t,r);var o=new Uint8Array(1);o[0]=v[e.type];var a=new w([o.buffer,e.data]);return r(a)}function s(e,t,n){for(var r=new Array(e.length),o=d(e.length,n),i=function(e,n,o){t(n,function(t,n){r[e]=n,o(t,r)})},a=0;a<e.length;a++)i(a,e[a],o)}var l=e("./keys"),c=e("has-binary"),u=e("arraybuffer.slice"),p=e("base64-arraybuffer"),d=e("after"),h=e("utf8"),f=navigator.userAgent.match(/Android/i),m=/PhantomJS/i.test(navigator.userAgent),g=f||m;n.protocol=3;var v=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=l(v),b={type:"error",data:"parser error"},w=e("blob");n.encodePacket=function(e,n,i,s){"function"==typeof n&&(s=n,n=!1),"function"==typeof i&&(s=i,i=null);var l=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&l instanceof ArrayBuffer)return o(e,n,s);if(w&&l instanceof t.Blob)return a(e,n,s);if(l&&l.base64)return r(e,s);var c=v[e.type];return void 0!==e.data&&(c+=i?h.encode(String(e.data)):String(e.data)),s(""+c)},n.encodeBase64Packet=function(e,r){var o="b"+n.packets[e.type];if(w&&e.data instanceof w){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];r(o+e)},i.readAsDataURL(e.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),l=new Array(s.length),c=0;c<s.length;c++)l[c]=s[c];a=String.fromCharCode.apply(null,l)}return o+=t.btoa(a),r(o)},n.decodePacket=function(e,t,r){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(r)try{e=h.decode(e)}catch(e){return b}var o=e.charAt(0);return Number(o)==o&&y[o]?e.length>1?{type:y[o],data:e.substring(1)}:{type:y[o]}:b}var i=new Uint8Array(e),o=i[0],a=u(e,1);return w&&"blob"===t&&(a=new w([a])),{type:y[o],data:a}},n.decodeBase64Packet=function(e,n){var r=y[e.charAt(0)];if(!t.ArrayBuffer)return{type:r,data:{base64:!0,data:e.substr(1)}};var o=p.decode(e.substr(1));return"blob"===n&&w&&(o=new w([o])),{type:r,data:o}},n.encodePayload=function(e,t,r){function o(e){return e.length+":"+e}function i(e,r){n.encodePacket(e,!!a&&t,!0,function(e){r(null,o(e))})}"function"==typeof t&&(r=t,t=null);var a=c(e);return t&&a?w&&!g?n.encodePayloadAsBlob(e,r):n.encodePayloadAsArrayBuffer(e,r):e.length?void s(e,i,function(e,t){return r(t.join(""))}):r("0:")},n.decodePayload=function(e,t,r){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,r);"function"==typeof t&&(r=t,t=null);var o;if(""==e)return r(b,0,1);for(var i,a,s="",l=0,c=e.length;l<c;l++){var u=e.charAt(l);if(":"!=u)s+=u;else{if(""==s||s!=(i=Number(s)))return r(b,0,1);if(a=e.substr(l+1,i),s!=a.length)return r(b,0,1);if(a.length){if(o=n.decodePacket(a,t,!0),b.type==o.type&&b.data==o.data)return r(b,0,1);var p=r(o,l+i,c);if(!1===p)return}l+=i,s=""}}return""!=s?r(b,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){function r(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void s(e,r,function(e,n){var r=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),o=new Uint8Array(r),i=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);n=r.buffer}t?o[i++]=0:o[i++]=1;for(var s=n.byteLength.toString(),a=0;a<s.length;a++)o[i++]=parseInt(s[a]);o[i++]=255;for(var r=new Uint8Array(n),a=0;a<r.length;a++)o[i++]=r[a]}),t(o.buffer)}):t(new ArrayBuffer(0))},n.encodePayloadAsBlob=function(e,t){function r(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);e=r.buffer,n[0]=0}for(var i=e instanceof ArrayBuffer?e.byteLength:e.size,a=i.toString(),s=new Uint8Array(a.length+1),o=0;o<a.length;o++)s[o]=parseInt(a[o]);if(s[a.length]=255,w){var l=new w([n.buffer,s.buffer,e]);t(null,l)}})}s(e,r,function(e,n){return t(new w(n))})},n.decodePayloadAsBinary=function(e,t,r){"function"==typeof t&&(r=t,t=null);for(var o=e,i=[],a=!1;o.byteLength>0;){for(var s=new Uint8Array(o),l=0===s[0],c="",p=1;255!=s[p];p++){if(c.length>310){a=!0;break}c+=s[p]}if(a)return r(b,0,1);o=u(o,2+c.length),c=parseInt(c);var d=u(o,0,c);if(l)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var h=new Uint8Array(d);d="";for(var p=0;p<h.length;p++)d+=String.fromCharCode(h[p])}i.push(d),o=u(o,c)}var f=i.length;i.forEach(function(e,o){r(n.decodePacket(e,t,!0),o,f)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:27,"arraybuffer.slice":28,"base64-arraybuffer":29,blob:30,"has-binary":36,utf8:31}],26:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},{}],27:[function(e,t,n){function r(e,t,n){function r(e,o){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(i=!0,t(e),t=n):0!==r.count||i||t(null,o)}var i=!1;return n=n||o,r.count=e,0===e?t():r}function o(){}t.exports=r},{}],28:[function(e,t,n){t.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(n-t),a=t,s=0;a<n;a++,s++)i[s]=o[a];return i.buffer}},{}],29:[function(e,t,n){!function(e){"use strict";n.encode=function(t){var n,r=new Uint8Array(t),o=r.length,i="";for(n=0;n<o;n+=3)i+=e[r[n]>>2],i+=e[(3&r[n])<<4|r[n+1]>>4],i+=e[(15&r[n+1])<<2|r[n+2]>>6],i+=e[63&r[n+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},n.decode=function(t){var n,r,o,i,a,s=.75*t.length,l=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var u=new ArrayBuffer(s),p=new Uint8Array(u);for(n=0;n<l;n+=4)r=e.indexOf(t[n]),o=e.indexOf(t[n+1]),i=e.indexOf(t[n+2]),a=e.indexOf(t[n+3]),p[c++]=r<<2|o>>4,p[c++]=(15&o)<<4|i>>2,p[c++]=(3&i)<<6|63&a;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],30:[function(e,t,n){(function(e){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var o=new Uint8Array(n.byteLength);o.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=o.buffer}e[t]=r}}}function r(e,t){t=t||{};var r=new i;n(e);for(var o=0;o<e.length;o++)r.append(e[o]);return t.type?r.getBlob(t.type):r.getBlob()}function o(e,t){return n(e),new Blob(e,t||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,a=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(e){return!1}}(),s=a&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(e){return!1}}(),l=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return a?s?e.Blob:o:l?r:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(t,n,r){(function(t){!function(o){function i(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function a(e){for(var t,n=e.length,r=-1,o="";++r<n;)t=e[r],t>65535&&(t-=65536,o+=w(t>>>10&1023|55296),t=56320|1023&t),o+=w(t);return o}function s(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function l(e,t){return w(e>>t&63|128)}function c(e){if(0==(4294967168&e))return w(e);var t="";return 0==(4294965248&e)?t=w(e>>6&31|192):0==(4294901760&e)?(s(e),t=w(e>>12&15|224),t+=l(e,6)):0==(4292870144&e)&&(t=w(e>>18&7|240),t+=l(e,12),t+=l(e,6)),t+=w(63&e|128)}function u(e){for(var t,n=i(e),r=n.length,o=-1,a="";++o<r;)t=n[o],a+=c(t);return a}function p(){if(b>=y)throw Error("Invalid byte index");var e=255&v[b];if(b++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(){var e,t,n,r,o;if(b>y)throw Error("Invalid byte index");if(b==y)return!1;if(e=255&v[b],b++,0==(128&e))return e;if(192==(224&e)){var t=p();if(o=(31&e)<<6|t,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=p(),n=p(),o=(15&e)<<12|t<<6|n,o>=2048)return s(o),o;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=p(),n=p(),r=p(),o=(15&e)<<18|t<<12|n<<6|r,o>=65536&&o<=1114111))return o;throw Error("Invalid UTF-8 detected")}function h(e){v=i(e),y=v.length,b=0;for(var t,n=[];(t=d())!==!1;)n.push(t);return a(n)}var f="object"==typeof r&&r,m="object"==typeof n&&n&&n.exports==f&&n,g="object"==typeof t&&t;g.global!==g&&g.window!==g||(o=g);var v,y,b,w=String.fromCharCode,_={version:"2.0.0",encode:u,decode:h};if("function"==typeof e&&"object"==typeof e.amd&&e.amd)e(function(){return _});else if(f&&!f.nodeType)if(m)m.exports=_;else{var k={},x=k.hasOwnProperty;for(var D in _)x.call(_,D)&&(f[D]=_[D])}else o.utf8=_}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(a,"").replace(s,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(r,"@").replace(o,"]").replace(i,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},{}],34:[function(e,t,n){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),i=e.indexOf("]");n!=-1&&i!=-1&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));for(var a=r.exec(e||""),s={},l=14;l--;)s[o[l]]=a[l]||"";return n!=-1&&i!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],35:[function(e,t,n){function r(e,t,n){var r;return r=t?new i(e,t):new i(e)}var o=function(){return this}(),i=o.WebSocket||o.MozWebSocket;t.exports=i?r:null,i&&(r.prototype=i.prototype)},{}],36:[function(e,t,n){(function(n){function r(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(o(e)){for(var r=0;r<e.length;r++)if(t(e[r]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return!0}return!1}return t(e)}var o=e("isarray");t.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:37}],37:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],38:[function(e,t,n){var r=e("global");try{t.exports="XMLHttpRequest"in r&&"withCredentials"in new r.XMLHttpRequest}catch(e){t.exports=!1}},{global:39}],39:[function(e,t,n){t.exports=function(){return this}()},{}],40:[function(e,t,n){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],41:[function(e,t,n){var r=Object.prototype.hasOwnProperty;n.keys=Object.keys||function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t},n.values=function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(e[n]);return t},n.merge=function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);return e},n.length=function(e){return n.keys(e).length},n.isEmpty=function(e){return 0==n.length(e)}},{}],42:[function(e,t,n){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=r.exec(e||""),n={},i=14;i--;)n[o[i]]=t[i]||"";return n}},{}],43:[function(e,t,n){(function(t){var r=e("isarray"),o=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(o(e)){var i={_placeholder:!0,num:n.length};return n.push(e),i}if(r(e)){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=t(e[s]);return a}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var l in e)a[l]=t(e[l]);return a}return e}var n=[],i=e.data,a=e;return a.data=t(i),a.attachments=n.length,{packet:a,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){var o=t[e.num];return o}if(r(e)){for(var i=0;i<e.length;i++)e[i]=n(e[i]);return e}if(e&&"object"==typeof e){for(var a in e)e[a]=n(e[a]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function i(e,l,c){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){a++;var u=new FileReader;u.onload=function(){c?c[l]=this.result:s=this.result,--a||n(s)},u.readAsArrayBuffer(e)}else if(r(e))for(var p=0;p<e.length;p++)i(e[p],p,e);else if(e&&"object"==typeof e&&!o(e))for(var d in e)i(e[d],d,e)}var a=0,s=e;i(s),a||n(s)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":45,isarray:46}],44:[function(e,t,n){function r(){}function o(e){var t="",r=!1;return t+=e.type,n.BINARY_EVENT!=e.type&&n.BINARY_ACK!=e.type||(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,t+=e.nsp),null!=e.id&&(r&&(t+=",",r=!1),t+=e.id),null!=e.data&&(r&&(t+=","),t+=p.stringify(e.data)),u("encoded %j as %s",e,t),t}function i(e,t){function n(e){var n=h.deconstructPacket(e),r=o(n.packet),i=n.buffers;i.unshift(r),t(i)}h.removeBlobs(e,n)}function a(){this.reconstructor=null}function s(e){var t={},r=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return c();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var o="";"-"!=e.charAt(++r)&&(o+=e.charAt(r),r!=e.length););if(o!=Number(o)||"-"!=e.charAt(r))throw new Error("Illegal attachments");t.attachments=Number(o)}if("/"==e.charAt(r+1))for(t.nsp="";++r;){var i=e.charAt(r);if(","==i)break;if(t.nsp+=i,r==e.length)break}else t.nsp="/";var a=e.charAt(r+1);if(""!==a&&Number(a)==a){for(t.id="";++r;){var i=e.charAt(r);if(null==i||Number(i)!=i){--r;break}if(t.id+=e.charAt(r),r==e.length)break}t.id=Number(t.id)}if(e.charAt(++r))try{t.data=p.parse(e.substr(r))}catch(e){return c()}return u("decoded %s as %j",e,t),t}function l(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:n.ERROR,data:"parser error"}}var u=e("debug")("socket.io-parser"),p=e("json3"),d=(e("isarray"),e("component-emitter")),h=e("./binary"),f=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=r,n.Decoder=a,r.prototype.encode=function(e,t){if(u("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)i(e,t);else{var r=o(e);t([r])}},d(a.prototype),a.prototype.add=function(e){var t;if("string"==typeof e)t=s(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new l(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!f(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=h.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":43,"./is-buffer":45,"component-emitter":9,debug:10,isarray:46,json3:47}],45:[function(e,t,n){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(e,t,n){t.exports=e(37)},{}],47:[function(t,n,r){!function(t){function n(e){if(n[e]!==a)return n[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=n("json-stringify")&&n("json-parse");else{var r,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var i=u.stringify,l="function"==typeof i&&p;if(l){(r=function(){return 1}).toJSON=r;try{l="0"===i(0)&&"0"===i(new Number)&&'""'==i(new String)&&i(s)===a&&i(a)===a&&i()===a&&"1"===i(r)&&"[1]"==i([r])&&"[null]"==i([a])&&"null"==i(null)&&"[null,null,null]"==i([a,s,null])&&i({a:[r,!0,!1,null,"\0\b\n\f\r\t"]})==o&&"1"===i(null,r)&&"[\n 1,\n 2\n]"==i([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==i(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new Date(-1))}catch(e){l=!1}}t=l}if("json-parse"==e){var c=u.parse;if("function"==typeof c)try{if(0===c("0")&&!c(!1)){r=c(o);var d=5==r.a.length&&1===r.a[0];if(d){try{d=!c('"\t"')}catch(e){}if(d)try{d=1!==c("01")}catch(e){}if(d)try{d=1!==c("1.")}catch(e){}}}}catch(e){d=!1}t=d}}return n[e]=!!t}var o,i,a,s={}.toString,l="function"==typeof e&&e.amd,c="object"==typeof JSON&&JSON,u="object"==typeof r&&r&&!r.nodeType&&r;u&&c?(u.stringify=c.stringify,u.parse=c.parse):u=t.JSON=c||{};var p=new Date(-0xc782b5b800cec);try{p=p.getUTCFullYear()==-109252&&0===p.getUTCMonth()&&1===p.getUTCDate()&&10==p.getUTCHours()&&37==p.getUTCMinutes()&&6==p.getUTCSeconds()&&708==p.getUTCMilliseconds()}catch(e){}if(!n("json")){var d="[object Function]",h="[object Date]",f="[object Number]",m="[object String]",g="[object Array]",v="[object Boolean]",y=n("bug-string-char-index");
if(!p)var b=Math.floor,w=[0,31,59,90,120,151,181,212,243,273,304,334],_=function(e,t){return w[t]+365*(e-1970)+b((e-1969+(t=+(t>1)))/4)-b((e-1901+t)/100)+b((e-1601+t)/400)};(o={}.hasOwnProperty)||(o=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=s?o=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,o=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,o.call(this,e)});var k={boolean:1,number:1,string:1,undefined:1},x=function(e,t){var n=typeof e[t];return"object"==n?!!e[t]:!k[n]};if(i=function(e,t){var n,r,a,l=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(a in r)o.call(r,a)&&l++;return n=r=null,l?i=2==l?function(e,t){var n,r={},i=s.call(e)==d;for(n in e)i&&"prototype"==n||o.call(r,n)||!(r[n]=1)||!o.call(e,n)||t(n)}:function(e,t){var n,r,i=s.call(e)==d;for(n in e)i&&"prototype"==n||!o.call(e,n)||(r="constructor"===n)||t(n);(r||o.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],i=function(e,t){var n,i,a=s.call(e)==d,l=!a&&"function"!=typeof e.constructor&&x(e,"hasOwnProperty")?e.hasOwnProperty:o;for(n in e)a&&"prototype"==n||!l.call(e,n)||t(n);for(i=r.length;n=r[--i];l.call(e,n)&&t(n));}),i(e,t)},!n("json-stringify")){var D={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},C="000000",S=function(e,t){return(C+(t||0)).slice(-e)},E="\\u00",T=function(e){var t,n='"',r=0,o=e.length,i=o>10&&y;for(i&&(t=e.split(""));r<o;r++){var a=e.charCodeAt(r);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=D[a];break;default:if(a<32){n+=E+S(2,a.toString(16));break}n+=i?t[r]:y?e.charAt(r):e[r]}}return n+'"'},$=function(e,t,n,r,l,c,u){var p,d,y,w,k,x,D,C,E,B,A,I,F,R,j,O;try{p=t[e]}catch(e){}if("object"==typeof p&&p)if(d=s.call(p),d!=h||o.call(p,"toJSON"))"function"==typeof p.toJSON&&(d!=f&&d!=m&&d!=g||o.call(p,"toJSON"))&&(p=p.toJSON(e));else if(p>-1/0&&p<1/0){if(_){for(k=b(p/864e5),y=b(k/365.2425)+1970-1;_(y+1,0)<=k;y++);for(w=b((k-_(y,0))/30.42);_(y,w+1)<=k;w++);k=1+k-_(y,w),x=(p%864e5+864e5)%864e5,D=b(x/36e5)%24,C=b(x/6e4)%60,E=b(x/1e3)%60,B=x%1e3}else y=p.getUTCFullYear(),w=p.getUTCMonth(),k=p.getUTCDate(),D=p.getUTCHours(),C=p.getUTCMinutes(),E=p.getUTCSeconds(),B=p.getUTCMilliseconds();p=(y<=0||y>=1e4?(y<0?"-":"+")+S(6,y<0?-y:y):S(4,y))+"-"+S(2,w+1)+"-"+S(2,k)+"T"+S(2,D)+":"+S(2,C)+":"+S(2,E)+"."+S(3,B)+"Z"}else p=null;if(n&&(p=n.call(t,e,p)),null===p)return"null";if(d=s.call(p),d==v)return""+p;if(d==f)return p>-1/0&&p<1/0?""+p:"null";if(d==m)return T(""+p);if("object"==typeof p){for(R=u.length;R--;)if(u[R]===p)throw TypeError();if(u.push(p),A=[],j=c,c+=l,d==g){for(F=0,R=p.length;F<R;F++)I=$(F,p,n,r,l,c,u),A.push(I===a?"null":I);O=A.length?l?"[\n"+c+A.join(",\n"+c)+"\n"+j+"]":"["+A.join(",")+"]":"[]"}else i(r||p,function(e){var t=$(e,p,n,r,l,c,u);t!==a&&A.push(T(e)+":"+(l?" ":"")+t)}),O=A.length?l?"{\n"+c+A.join(",\n"+c)+"\n"+j+"}":"{"+A.join(",")+"}":"{}";return u.pop(),O}};u.stringify=function(e,t,n){var r,o,i,a;if("function"==typeof t||"object"==typeof t&&t)if((a=s.call(t))==d)o=t;else if(a==g){i={};for(var l,c=0,u=t.length;c<u;l=t[c++],a=s.call(l),(a==m||a==f)&&(i[l]=1));}if(n)if((a=s.call(n))==f){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else a==m&&(r=n.length<=10?n:n.slice(0,10));return $("",(l={},l[""]=e,l),o,i,r,"",[])}}if(!n("json-parse")){var B,A,I=String.fromCharCode,F={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},R=function(){throw B=A=null,SyntaxError()},j=function(){for(var e,t,n,r,o,i=A,a=i.length;B<a;)switch(o=i.charCodeAt(B)){case 9:case 10:case 13:case 32:B++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=y?i.charAt(B):i[B],B++,e;case 34:for(e="@",B++;B<a;)if(o=i.charCodeAt(B),o<32)R();else if(92==o)switch(o=i.charCodeAt(++B)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=F[o],B++;break;case 117:for(t=++B,n=B+4;B<n;B++)o=i.charCodeAt(B),o>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||R();e+=I("0x"+i.slice(t,B));break;default:R()}else{if(34==o)break;for(o=i.charCodeAt(B),t=B;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++B);e+=i.slice(t,B)}if(34==i.charCodeAt(B))return B++,e;R();default:if(t=B,45==o&&(r=!0,o=i.charCodeAt(++B)),o>=48&&o<=57){for(48==o&&(o=i.charCodeAt(B+1),o>=48&&o<=57)&&R(),r=!1;B<a&&(o=i.charCodeAt(B),o>=48&&o<=57);B++);if(46==i.charCodeAt(B)){for(n=++B;n<a&&(o=i.charCodeAt(n),o>=48&&o<=57);n++);n==B&&R(),B=n}if(o=i.charCodeAt(B),101==o||69==o){for(o=i.charCodeAt(++B),43!=o&&45!=o||B++,n=B;n<a&&(o=i.charCodeAt(n),o>=48&&o<=57);n++);n==B&&R(),B=n}return+i.slice(t,B)}if(r&&R(),"true"==i.slice(B,B+4))return B+=4,!0;if("false"==i.slice(B,B+5))return B+=5,!1;if("null"==i.slice(B,B+4))return B+=4,null;R()}return"$"},O=function(e){var t,n;if("$"==e&&R(),"string"==typeof e){if("@"==(y?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=j(),"]"!=e;n||(n=!0))n&&(","==e?(e=j(),"]"==e&&R()):R()),","==e&&R(),t.push(O(e));return t}if("{"==e){for(t={};e=j(),"}"!=e;n||(n=!0))n&&(","==e?(e=j(),"}"==e&&R()):R()),","!=e&&"string"==typeof e&&"@"==(y?e.charAt(0):e[0])&&":"==j()||R(),t[e.slice(1)]=O(j());return t}R()}return e},M=function(e,t,n){var r=L(e,t,n);r===a?delete e[t]:e[t]=r},L=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if(s.call(o)==g)for(r=o.length;r--;)M(o,r,n);else i(o,function(e){M(o,e,n)});return n.call(e,t,o)};u.parse=function(e,t){var n,r;return B=0,A=""+e,n=O(j()),"$"!=j()&&R(),B=A=null,t&&s.call(t)==d?L((r={},r[""]=n,r),"",t):n}}}l&&e(function(){return u})}(this)},{}],48:[function(e,t,n){function r(e,t){var n=[];t=t||0;for(var r=t||0;r<e.length;r++)n[r-t]=e[r];return n}t.exports=r},{}]},{},[1])(1)}),function(){var e=this,t=e._,n=Array.prototype,r=Object.prototype,o=Function.prototype,i=n.push,a=n.slice,s=n.concat,l=r.toString,c=r.hasOwnProperty,u=Array.isArray,p=Object.keys,d=o.bind,h=function(e){return e instanceof h?e:this instanceof h?void(this._wrapped=e):new h(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports._=h):e._=h,h.VERSION="1.7.0";var f=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return function(){return e.apply(t,arguments)}};h.iteratee=function(e,t,n){return null==e?h.identity:h.isFunction(e)?f(e,t,n):h.isObject(e)?h.matches(e):h.property(e)},h.each=h.forEach=function(e,t,n){if(null==e)return e;t=f(t,n);var r,o=e.length;if(o===+o)for(r=0;o>r;r++)t(e[r],r,e);else{var i=h.keys(e);for(r=0,o=i.length;o>r;r++)t(e[i[r]],i[r],e)}return e},h.map=h.collect=function(e,t,n){if(null==e)return[];t=h.iteratee(t,n);for(var r,o=e.length!==+e.length&&h.keys(e),i=(o||e).length,a=Array(i),s=0;i>s;s++)r=o?o[s]:s,a[s]=t(e[r],r,e);return a};var m="Reduce of empty array with no initial value";h.reduce=h.foldl=h.inject=function(e,t,n,r){null==e&&(e=[]),t=f(t,r,4);var o,i=e.length!==+e.length&&h.keys(e),a=(i||e).length,s=0;if(arguments.length<3){if(!a)throw new TypeError(m);n=e[i?i[s++]:s++]}for(;a>s;s++)o=i?i[s]:s,n=t(n,e[o],o,e);return n},h.reduceRight=h.foldr=function(e,t,n,r){null==e&&(e=[]),t=f(t,r,4);var o,i=e.length!==+e.length&&h.keys(e),a=(i||e).length;if(arguments.length<3){if(!a)throw new TypeError(m);n=e[i?i[--a]:--a]}for(;a--;)o=i?i[a]:a,n=t(n,e[o],o,e);return n},h.find=h.detect=function(e,t,n){var r;return t=h.iteratee(t,n),h.some(e,function(e,n,o){return t(e,n,o)?(r=e,!0):void 0}),r},h.filter=h.select=function(e,t,n){var r=[];return null==e?r:(t=h.iteratee(t,n),h.each(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r)},h.reject=function(e,t,n){return h.filter(e,h.negate(h.iteratee(t)),n)},h.every=h.all=function(e,t,n){if(null==e)return!0;t=h.iteratee(t,n);var r,o,i=e.length!==+e.length&&h.keys(e),a=(i||e).length;for(r=0;a>r;r++)if(o=i?i[r]:r,!t(e[o],o,e))return!1;return!0},h.some=h.any=function(e,t,n){if(null==e)return!1;t=h.iteratee(t,n);var r,o,i=e.length!==+e.length&&h.keys(e),a=(i||e).length;for(r=0;a>r;r++)if(o=i?i[r]:r,t(e[o],o,e))return!0;return!1},h.contains=h.include=function(e,t){return null!=e&&(e.length!==+e.length&&(e=h.values(e)),h.indexOf(e,t)>=0)},h.invoke=function(e,t){var n=a.call(arguments,2),r=h.isFunction(t);return h.map(e,function(e){return(r?t:e[t]).apply(e,n)})},h.pluck=function(e,t){return h.map(e,h.property(t))},h.where=function(e,t){return h.filter(e,h.matches(t))},h.findWhere=function(e,t){return h.find(e,h.matches(t))},h.max=function(e,t,n){var r,o,i=-1/0,a=-1/0;if(null==t&&null!=e){e=e.length===+e.length?e:h.values(e);for(var s=0,l=e.length;l>s;s++)r=e[s],r>i&&(i=r)}else t=h.iteratee(t,n),h.each(e,function(e,n,r){o=t(e,n,r),(o>a||o===-1/0&&i===-1/0)&&(i=e,a=o)});return i},h.min=function(e,t,n){var r,o,i=1/0,a=1/0;if(null==t&&null!=e){e=e.length===+e.length?e:h.values(e);for(var s=0,l=e.length;l>s;s++)r=e[s],i>r&&(i=r)}else t=h.iteratee(t,n),h.each(e,function(e,n,r){o=t(e,n,r),(a>o||1/0===o&&1/0===i)&&(i=e,a=o)});return i},h.shuffle=function(e){for(var t,n=e&&e.length===+e.length?e:h.values(e),r=n.length,o=Array(r),i=0;r>i;i++)t=h.random(0,i),t!==i&&(o[i]=o[t]),o[t]=n[i];return o},h.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=h.values(e)),e[h.random(e.length-1)]):h.shuffle(e).slice(0,Math.max(0,t))},h.sortBy=function(e,t,n){return t=h.iteratee(t,n),h.pluck(h.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var g=function(e){return function(t,n,r){var o={};return n=h.iteratee(n,r),h.each(t,function(r,i){var a=n(r,i,t);e(o,r,a)}),o}};h.groupBy=g(function(e,t,n){h.has(e,n)?e[n].push(t):e[n]=[t]}),h.indexBy=g(function(e,t,n){e[n]=t}),h.countBy=g(function(e,t,n){h.has(e,n)?e[n]++:e[n]=1}),h.sortedIndex=function(e,t,n,r){n=h.iteratee(n,r,1);for(var o=n(t),i=0,a=e.length;a>i;){var s=i+a>>>1;n(e[s])<o?i=s+1:a=s}return i},h.toArray=function(e){return e?h.isArray(e)?a.call(e):e.length===+e.length?h.map(e,h.identity):h.values(e):[]},h.size=function(e){return null==e?0:e.length===+e.length?e.length:h.keys(e).length},h.partition=function(e,t,n){t=h.iteratee(t,n);var r=[],o=[];return h.each(e,function(e,n,i){(t(e,n,i)?r:o).push(e)}),[r,o]},h.first=h.head=h.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:a.call(e,0,t)},h.initial=function(e,t,n){return a.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},h.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},h.rest=h.tail=h.drop=function(e,t,n){return a.call(e,null==t||n?1:t)},h.compact=function(e){return h.filter(e,h.identity)};var v=function(e,t,n,r){if(t&&h.every(e,h.isArray))return s.apply(r,e);for(var o=0,a=e.length;a>o;o++){var l=e[o];h.isArray(l)||h.isArguments(l)?t?i.apply(r,l):v(l,t,n,r):n||r.push(l)}return r};h.flatten=function(e,t){return v(e,t,!1,[])},h.without=function(e){return h.difference(e,a.call(arguments,1))},h.uniq=h.unique=function(e,t,n,r){if(null==e)return[];h.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=h.iteratee(n,r));for(var o=[],i=[],a=0,s=e.length;s>a;a++){var l=e[a];if(t)a&&i===l||o.push(l),i=l;else if(n){var c=n(l,a,e);h.indexOf(i,c)<0&&(i.push(c),o.push(l))}else h.indexOf(o,l)<0&&o.push(l)}return o},h.union=function(){return h.uniq(v(arguments,!0,!0,[]))},h.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,r=0,o=e.length;o>r;r++){var i=e[r];if(!h.contains(t,i)){for(var a=1;n>a&&h.contains(arguments[a],i);a++);a===n&&t.push(i)}}return t},h.difference=function(e){var t=v(a.call(arguments,1),!0,!0,[]);return h.filter(e,function(e){return!h.contains(t,e)})},h.zip=function(e){if(null==e)return[];for(var t=h.max(arguments,"length").length,n=Array(t),r=0;t>r;r++)n[r]=h.pluck(arguments,r);return n},h.object=function(e,t){if(null==e)return{};for(var n={},r=0,o=e.length;o>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},h.indexOf=function(e,t,n){if(null==e)return-1;var r=0,o=e.length;if(n){if("number"!=typeof n)return r=h.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,o+n):n}for(;o>r;r++)if(e[r]===t)return r;return-1},h.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=e.length;for("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1));--r>=0;)if(e[r]===t)return r;return-1},h.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),o=Array(r),i=0;r>i;i++,e+=n)o[i]=e;return o};var y=function(){};h.bind=function(e,t){var n,r;if(d&&e.bind===d)return d.apply(e,a.call(arguments,1));if(!h.isFunction(e))throw new TypeError("Bind must be called on a function");return n=a.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(a.call(arguments)));y.prototype=e.prototype;var o=new y;y.prototype=null;var i=e.apply(o,n.concat(a.call(arguments)));return h.isObject(i)?i:o}},h.partial=function(e){var t=a.call(arguments,1);return function(){for(var n=0,r=t.slice(),o=0,i=r.length;i>o;o++)r[o]===h&&(r[o]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},h.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=h.bind(e[n],e);return e},h.memoize=function(e,t){var n=function(r){var o=n.cache,i=t?t.apply(this,arguments):r;return h.has(o,i)||(o[i]=e.apply(this,arguments)),o[i]};return n.cache={},n},h.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},h.defer=function(e){return h.delay.apply(h,[e,1].concat(a.call(arguments,1)))},h.throttle=function(e,t,n){var r,o,i,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:h.now(),a=null,i=e.apply(r,o),a||(r=o=null)};return function(){var c=h.now();s||n.leading!==!1||(s=c);var u=t-(c-s);return r=this,o=arguments,0>=u||u>t?(clearTimeout(a),a=null,s=c,i=e.apply(r,o),a||(r=o=null)):a||n.trailing===!1||(a=setTimeout(l,u)),i}},h.debounce=function(e,t,n){var r,o,i,a,s,l=function(){var c=h.now()-a;t>c&&c>0?r=setTimeout(l,t-c):(r=null,n||(s=e.apply(i,o),r||(i=o=null)))};return function(){i=this,o=arguments,a=h.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(s=e.apply(i,o),i=o=null),s}},h.wrap=function(e,t){return h.partial(t,e)},h.negate=function(e){return function(){return!e.apply(this,arguments)}},h.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},h.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},h.before=function(e,t){var n;return function(){return--e>0?n=t.apply(this,arguments):t=null,n}},h.once=h.partial(h.before,2),h.keys=function(e){if(!h.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)h.has(e,n)&&t.push(n);return t},h.values=function(e){for(var t=h.keys(e),n=t.length,r=Array(n),o=0;n>o;o++)r[o]=e[t[o]];return r},h.pairs=function(e){for(var t=h.keys(e),n=t.length,r=Array(n),o=0;n>o;o++)r[o]=[t[o],e[t[o]]];return r},h.invert=function(e){for(var t={},n=h.keys(e),r=0,o=n.length;o>r;r++)t[e[n[r]]]=n[r];return t},h.functions=h.methods=function(e){var t=[];for(var n in e)h.isFunction(e[n])&&t.push(n);return t.sort()},h.extend=function(e){if(!h.isObject(e))return e;for(var t,n,r=1,o=arguments.length;o>r;r++){t=arguments[r];for(n in t)c.call(t,n)&&(e[n]=t[n])}return e},h.pick=function(e,t,n){var r,o={};if(null==e)return o;if(h.isFunction(t)){t=f(t,n);for(r in e){var i=e[r];t(i,r,e)&&(o[r]=i)}}else{var l=s.apply([],a.call(arguments,1));e=new Object(e);for(var c=0,u=l.length;u>c;c++)r=l[c],r in e&&(o[r]=e[r])}return o},h.omit=function(e,t,n){if(h.isFunction(t))t=h.negate(t);else{var r=h.map(s.apply([],a.call(arguments,1)),String);t=function(e,t){return!h.contains(r,t)}}return h.pick(e,t,n)},h.defaults=function(e){if(!h.isObject(e))return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];for(var o in r)void 0===e[o]&&(e[o]=r[o])}return e},h.clone=function(e){return h.isObject(e)?h.isArray(e)?e.slice():h.extend({},e):e},h.tap=function(e,t){return t(e),e};var b=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof h&&(e=e._wrapped),t instanceof h&&(t=t._wrapped);var o=l.call(e);if(o!==l.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var i=n.length;i--;)if(n[i]===e)return r[i]===t;var a=e.constructor,s=t.constructor;if(a!==s&&"constructor"in e&&"constructor"in t&&!(h.isFunction(a)&&a instanceof a&&h.isFunction(s)&&s instanceof s))return!1;n.push(e),r.push(t);var c,u;if("[object Array]"===o){if(c=e.length,u=c===t.length)for(;c--&&(u=b(e[c],t[c],n,r)););}else{var p,d=h.keys(e);if(c=d.length,u=h.keys(t).length===c)for(;c--&&(p=d[c],u=h.has(t,p)&&b(e[p],t[p],n,r)););}return n.pop(),r.pop(),u};h.isEqual=function(e,t){return b(e,t,[],[])},h.isEmpty=function(e){if(null==e)return!0;if(h.isArray(e)||h.isString(e)||h.isArguments(e))return 0===e.length;for(var t in e)if(h.has(e,t))return!1;return!0},h.isElement=function(e){return!(!e||1!==e.nodeType)},h.isArray=u||function(e){return"[object Array]"===l.call(e)},h.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},h.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){h["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}}),h.isArguments(arguments)||(h.isArguments=function(e){return h.has(e,"callee")}),"function"!=typeof/./&&(h.isFunction=function(e){return"function"==typeof e||!1}),h.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},h.isNaN=function(e){return h.isNumber(e)&&e!==+e},h.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===l.call(e)},h.isNull=function(e){return null===e},h.isUndefined=function(e){return void 0===e},h.has=function(e,t){return null!=e&&c.call(e,t)},h.noConflict=function(){return e._=t,this},h.identity=function(e){return e},h.constant=function(e){return function(){return e}},h.noop=function(){},h.property=function(e){return function(t){return t[e]}},h.matches=function(e){var t=h.pairs(e),n=t.length;return function(e){if(null==e)return!n;e=new Object(e);for(var r=0;n>r;r++){var o=t[r],i=o[0];if(o[1]!==e[i]||!(i in e))return!1}return!0}},h.times=function(e,t,n){var r=Array(Math.max(0,e));t=f(t,n,1);for(var o=0;e>o;o++)r[o]=t(o);return r},h.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},h.now=Date.now||function(){return(new Date).getTime()};var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},_=h.invert(w),k=function(e){var t=function(t){return e[t]},n="(?:"+h.keys(e).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(o,t):e}};h.escape=k(w),h.unescape=k(_),h.result=function(e,t){if(null!=e){var n=e[t];return h.isFunction(n)?e[t]():n}};var x=0;h.uniqueId=function(e){var t=++x+"";return e?e+t:t},h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,C={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},S=/\\|'|\r|\n|\u2028|\u2029/g,E=function(e){return"\\"+C[e]};h.template=function(e,t,n){!t&&n&&(t=n),t=h.defaults({},t,h.templateSettings);var r=RegExp([(t.escape||D).source,(t.interpolate||D).source,(t.evaluate||D).source].join("|")+"|$","g"),o=0,i="__p+='";e.replace(r,function(t,n,r,a,s){return i+=e.slice(o,s).replace(S,E),o=s+t.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var a=new Function(t.variable||"obj","_",i)}catch(e){throw e.source=i,e}var s=function(e){return a.call(this,e,h)},l=t.variable||"obj";return s.source="function("+l+"){\n"+i+"}",s},h.chain=function(e){var t=h(e);return t._chain=!0,t};var T=function(e){return this._chain?h(e).chain():e};h.mixin=function(e){h.each(h.functions(e),function(t){var n=h[t]=e[t];h.prototype[t]=function(){var e=[this._wrapped];return i.apply(e,arguments),T.call(this,n.apply(h,e))}})},h.mixin(h),h.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];h.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],T.call(this,n)}}),h.each(["concat","join","slice"],function(e){var t=n[e];h.prototype[e]=function(){return T.call(this,t.apply(this._wrapped,arguments))}}),h.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return h})}.call(this),function(e){e.fn.hoverIntent=function(t,n,r,o){var i={interval:o||400,sensitivity:5,timeout:600};i="object"==typeof t?e.extend(i,t):e.isFunction(n)?e.extend(i,{over:t,out:n,selector:r}):e.extend(i,{over:t,out:t,selector:n});var a,s,l,c,u=function(e){a=e.pageX,s=e.pageY},p=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.sqrt((l-a)*(l-a)+(c-s)*(c-s))<i.sensitivity?(e(n).off("mousemove.hoverIntent",u),n.hoverIntent_s=!0,i.over.apply(n,[t])):(l=a,c=s,n.hoverIntent_t=setTimeout(function(){p(t,n)},i.interval),void 0)},d=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=!1,i.out.apply(t,[e])},h=function(t){var n=e.extend({},t),r=this;r.hoverIntent_t&&(r.hoverIntent_t=clearTimeout(r.hoverIntent_t)),"mouseenter"===t.type?(l=n.pageX,c=n.pageY,e(r).on("mousemove.hoverIntent",u),r.hoverIntent_s||(r.hoverIntent_t=setTimeout(function(){p(n,r)},i.interval))):(e(r).off("mousemove.hoverIntent",u),r.hoverIntent_s&&(r.hoverIntent_t=setTimeout(function(){d(n,r)},i.timeout)))};return this.on({"mouseenter.hoverIntent":h,"mouseleave.hoverIntent":h},i.selector)}}(jQuery),define("jquery_hoverIntent",["jquery"],function(e){return function(){var t;return t||e.$.fn.hoverIntent}}(this)),define("sfAjax",["jquery"],function(e){"use strict";e.sfAjax=function(t,n,r,o){var i,a,s,l;a=e.extend({id:t.data("id")||t.closest(".js__content-ops").data("id"),do:t.data("do")||t.data("action"),type:t.data("type")},r),i=a.do,s=i.indexOf("/cancel")>0?i.replace("/cancel",""):i+"/cancel",l="/api/"+a.type+"/"+a.id+"/"+a.do,e.post(l,function(e){0===e.status?(t.data("do",s),n?n(e):location.reload()):o&&o(e)})}}),function(e){"function"==typeof define&&define.amd?define("jquery_cookie",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return s.raw?e:encodeURIComponent(e)}function n(e){return s.raw?e:decodeURIComponent(e)}function r(e){return t(s.json?JSON.stringify(e):String(e))}function o(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(a," ")),s.json?JSON.parse(e):e}catch(e){}}function i(t,n){var r=s.raw?t:o(t);return e.isFunction(n)?n(r):r}var a=/\+/g,s=e.cookie=function(o,a,l){if(void 0!==a&&!e.isFunction(a)){if(l=e.extend({},s.defaults,l),"number"==typeof l.expires){var c=l.expires,u=l.expires=new Date;u.setTime(+u+864e5*c)}return document.cookie=[t(o),"=",r(a),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var p=o?void 0:{},d=document.cookie?document.cookie.split("; "):[],h=0,f=d.length;h<f;h++){var m=d[h].split("="),g=n(m.shift()),v=m.join("=");if(o&&o===g){p=i(v,a);break}o||void 0===(v=i(v))||(p[g]=v)}return p};s.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),function(e,t,n,r){var o=e(t);e.fn.lazyload=function(i){function a(){var t=0;l.each(function(){var n=e(this);if(!c.skip_invisible||n.is(":visible"))if(e.abovethetop(this,c)||e.leftofbegin(this,c));else if(e.belowthefold(this,c)||e.rightoffold(this,c)){if(++t>c.failure_limit)return!1}else n.trigger("appear"),t=0})}var s,l=this,c={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:SF.staticUrl+"/global/img/squares.svg"};return i&&(r!==i.failurelimit&&(i.failure_limit=i.failurelimit,delete i.failurelimit),r!==i.effectspeed&&(i.effect_speed=i.effectspeed,delete i.effectspeed),e.extend(c,i)),s=c.container===r||c.container===t?o:e(c.container),0===c.event.indexOf("scroll")&&s.bind(c.event,function(){return a()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,n.attr("src")!==r&&n.attr("src")!==!1||n.is("img")&&n.attr("src",c.placeholder),n.one("appear",function(){if(!this.loaded){if(c.appear){var r=l.length;c.appear.call(t,r,c)}e("<img />").bind("load",function(){var r=n.attr("data-"+c.data_attribute);n.hide(),n.is("img")?n.attr("src",r):n.css("background-image","url('"+r+"')"),n[c.effect](c.effect_speed),t.loaded=!0;var o=e.grep(l,function(e){return!e.loaded});if(l=e(o),c.load){var i=l.length;c.load.call(t,i,c)}}).attr("src",n.attr("data-"+c.data_attribute))}}),0!==c.event.indexOf("scroll")&&n.bind(c.event,function(){t.loaded||n.trigger("appear")})}),o.bind("resize",function(){a()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&o.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&l.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){a()}),this},e.belowthefold=function(n,i){var a;return a=i.container===r||i.container===t?(t.innerHeight?t.innerHeight:o.height())+o.scrollTop():e(i.container).offset().top+e(i.container).height(),a<=e(n).offset().top-i.threshold},e.rightoffold=function(n,i){var a;return a=i.container===r||i.container===t?o.width()+o.scrollLeft():e(i.container).offset().left+e(i.container).width(),a<=e(n).offset().left-i.threshold},e.abovethetop=function(n,i){var a;return a=i.container===r||i.container===t?o.scrollTop():e(i.container).offset().top,a>=e(n).offset().top+i.threshold+e(n).height()},e.leftofbegin=function(n,i){var a;return a=i.container===r||i.container===t?o.scrollLeft():e(i.container).offset().left,a>=e(n).offset().left+i.threshold+e(n).width()},e.inviewport=function(t,n){return!(e.rightoffold(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),define("jquery_lazyload",["jquery"],function(e){return function(){var t;return t||e.$.fn.lazyload}}(this)),function(e){function t(t,n,r,o){var i={data:o||0===o||o===!1?o:n?n.data:{},_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:c,nest:u,wrap:p,html:d,update:h};return t&&e.extend(i,t,{nodes:[],parent:n}),r&&(i.tmpl=r,i._ctnt=i._ctnt||i.tmpl(e,i),i.key=++_,(x.length?b:y)[_]=i),i}function n(t,o,i){var a,s=i?e.map(i,function(e){return"string"==typeof e?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+g+'="'+t.key+'" $2'):e:n(e,t,e._ctnt)}):t;return o?s:(s=s.join(""),s.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,n,o,i){a=e(o).get(),l(a),n&&(a=r(n).concat(a)),i&&(a=a.concat(r(i)))}),a?a:r(s))}function r(t){var n=document.createElement("div");return n.innerHTML=t,e.makeArray(n.childNodes)}function o(t){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,n,r,o,i,s,l){var c,u,p,d=e.tmpl.tag[r];if(!d)throw"Unknown template tag: "+r;return c=d._default||[],s&&!/\w$/.test(i)&&(i+=s,s=""),i?(i=a(i),l=l?","+a(l)+")":s?")":"",u=s?i.indexOf(".")>-1?i+a(s):"("+i+").call($item"+l:i,p=s?u:"(typeof("+i+")==='function'?("+i+").call($item):("+i+"))"):p=u=c.$1||"null",o=a(o),"');"+d[n?"close":"open"].split("$notnull_1").join(i?"typeof("+i+")!=='undefined' && ("+i+")!=null":"true").split("$1a").join(p).split("$1").join(u).split("$2").join(o||c.$2||"")+"__.push('"})+"');}return __;")}function i(t,r){t._wrap=n(t,!0,e.isArray(r)?r:[v.test(r)?r:e(r).html()]).join("")}function a(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function l(n){function r(n){function r(e){e+=c,a=u[e]=u[e]||t(a,y[a.parent.key+c]||a.parent)}var o,i,a,s,l=n;if(s=n.getAttribute(g)){for(;l.parentNode&&1===(l=l.parentNode).nodeType&&!(o=l.getAttribute(g)););o!==s&&(l=l.parentNode?11===l.nodeType?0:l.getAttribute(g)||0:0,(a=y[s])||(a=b[s],a=t(a,y[l]||b[l]),a.key=++_,y[_]=a),k&&r(s)),n.removeAttribute(g)}else k&&(a=e.data(n,"tmplItem"))&&(r(a.key),y[a.key]=a,l=e.data(n.parentNode,"tmplItem"),l=l?l.key:0);if(a){for(i=a;i&&i.key!=l;)i.nodes.push(n),i=i.parent;delete a._ctnt,delete a._wrap,e.data(n,"tmplItem",a)}}var o,i,a,s,l,c="_"+k,u={};for(a=0,s=n.length;a<s;a++)if(1===(o=n[a]).nodeType){for(i=o.getElementsByTagName("*"),l=i.length-1;l>=0;l--)r(i[l]);r(o)}}function c(e,t,n,r){return e?void x.push({_:e,tmpl:t,item:this,data:n,options:r}):x.pop()}function u(t,n,r){return e.tmpl(e.template(t),n,r,this)}function p(t,n){var r=t.options||{};return r.wrapped=n,e.tmpl(e.template(t.tmpl),t.data,r,t.item)}function d(t,n){var r=this._wrap;return e.map(e(e.isArray(r)?r.join(""):r).filter(t||"*"),function(e){return n?e.innerText||e.textContent:e.outerHTML||s(e)})}function h(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}var f,m=e.fn.domManip,g="_tmplitem",v=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,y={},b={},w={key:0,data:{}},_=0,k=0,x=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(r){var o,i,a,s,l=[],c=e(r),u=1===this.length&&this[0].parentNode;if(f=y||{},u&&11===u.nodeType&&1===u.childNodes.length&&1===c.length)c[n](this[0]),l=this;else{for(i=0,a=c.length;i<a;i++)k=i,o=(i>0?this.clone(!0):this).get(),e(c[i])[n](o),l=l.concat(o);k=0,l=this.pushStack(l,t,c.selector)}return s=f,f=null,e.tmpl.complete(s),l}}),e.fn.extend({tmpl:function(t,n,r){return e.tmpl(this[0],t,n,r)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(t,n,r){if(t[0]&&e.isArray(t[0])){for(var o,i=e.makeArray(arguments),a=t[0],s=a.length,l=0;l<s&&!(o=e.data(a[l++],"tmplItem")););o&&k&&(i[2]=function(t){e.tmpl.afterManip(this,t,r)}),m.apply(this,i)}else m.apply(this,arguments);return k=0,!f&&e.tmpl.complete(y),this}}),e.extend({tmpl:function(r,o,a,s){var l,c=!s;if(c)s=w,r=e.template[r]||e.template(null,r),b={};else if(!r)return r=s.tmpl,y[s.key]=s,s.nodes=[],s.wrapped&&i(s,s.wrapped),e(n(s,null,s.tmpl(e,s)));return r?("function"==typeof o&&(o=o.call(s||{})),a&&a.wrapped&&i(a,a.wrapped),l=e.isArray(o)?e.map(o,function(e){return e?t(a,s,r,e):null}):[t(a,s,r,o)],c?e(n(s,null,l)):l):[]},tmplItem:function(t){var n;for(t instanceof e&&(t=t[0]);t&&1===t.nodeType&&!(n=e.data(t,"tmplItem"))&&(t=t.parentNode););return n||w},template:function(t,n){return n?("string"==typeof n?n=o(n):n instanceof e&&(n=n[0]||{}),
n.nodeType&&(n=e.data(n,"tmpl")||e.data(n,"tmpl",o(n.innerHTML))),"string"==typeof t?e.template[t]=n:n):t?"string"!=typeof t?e.template(null,t):e.template[t]||e.template(null,v.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){y={}},afterManip:function(t,n,r){var o=11===n.nodeType?e.makeArray(n.childNodes):1===n.nodeType?[n]:[];r.call(t,n),l(o),k++}})}(jQuery),define("jquery_tmpl",["jquery"],function(e){return function(){var t;return t||e.$.fn.tmpl}}(this)),define("typeHelper",["jquery","jquery_tmpl"],function(e){"use strict";var t,n,r,o,i,a,s,l;s='<ul class="dropdown-menu" role="menu"></ul>',o=void 0,t=void 0,r=void 0,n=void 0,i=void 0,a=["gmail.com","qq.com","163.com","hotmail.com","sina.com","126.com","live.com","live.cn","vip.sina.com","vip.qq.com","sina.cn","sohu.com","139.com","wo.com.cn","189.cn","21cn.com"],l='<button class="btn btn-default result" type="button">${result}</button><a href="#" class="i-cancel ml10 delete-result">&times;</a>',e.fn.typeHelperOld=function(c){var u;o=e.extend({data:null,tpl:'<li><a href="#" data-value="${name}">${name}</a></li>',defaultList:[],showNum:5,remoteData:null,submitKey:null,onlyResult:!0,autoSelect:!0,emailMode:!1,insertHandler:function(){}},c),u=[],n=e(this),0!==n.length&&(n.after(e("<div></div>").addClass("typehelper")).siblings(".typehelper").append(n),t=n.parent().css("position","relative"),e.tmpl(s).insertAfter(n),r=t.find("ul").hide().css("minWidth",n.outerWidth()),e.each(o.defaultList,function(t,n){e.tmpl(o.tpl,n).appendTo(r)}),n.on("focus",function(){o.defaultList.length>0&&e(this).parent().trigger("show.typehelper")}),n.on("input",function(t){n.is(":focus")&&(e(this).parent().trigger("search.typehelper"),e(this).parent().trigger("show.typehelper"))}),n.on("keydown",function(t){e(this).parent().trigger("select.typehelper",t)}),r.delegate("li","mouseover",function(){e(this).siblings("li").removeClass("active"),e(this).addClass("active")}),n.on("blur",function(){var t,n;e(this).parent().trigger("hide.typehelper"),o.autoSelect&&(e(this).siblings("ul").find(".active").length>0?(t=r.find(".active").index(),n=u[t],e(this).parent().trigger("insert.typehelper",[r.find(".active a"),n])):e(this).val(""))}),t.on("show.typehelper",function(){e(this).find("ul").show()}),t.on("hide.typehelper",function(){e(this).find("ul").hide()}),t.on("insert.typehelper",function(i,a,s){t=e(this),n=t.find("input"),r=t.find("ul"),n.val(e(a).data("value")),e(".result",t).length>0&&(e(".result",t).remove(),t.find(".delete-result").remove()),o.onlyResult&&(n.hide(),r.after(e.tmpl(l,{result:n.val()})),o.submitKey&&n.data(o.submitKey,e(a).data(o.submitKey)),t.find(".result").on("click",function(){e(this).siblings(".delete-result").remove(),e(this).remove(),n.show().focus(),t.trigger("search.typehelper")}),t.find(".delete-result").on("click",function(){return e(this).siblings(".result").remove(),e(this).remove(),n.val("").show(),!1})),t.parents(".form-group").next(".form-group").find("input").focus(),o.insertHandler(s)}),t.on("select.typehelper",function(o,i){var a,s,l,c,p,d;if(t=e(this),n=t.find("input"),r=t.find("ul"),a=r.find("li"),i)switch(i.keyCode){case 9:i.shiftKey||(i.preventDefault(),t.parent(".form-group").next(".form-group").find("input").focus());break;case 38:i.preventDefault(),a.length&&(r.find(".active").length?r.find(".active").removeClass("active").prev("li").addClass("active"):a.last().addClass("active"));break;case 40:i.preventDefault(),a.length&&(r.find(".active").length?r.find(".active").removeClass("active").next("li").addClass("active"):a.first().addClass("active"));break;case 13:if(i.stopPropagation(),i.preventDefault(),r.find(".active").length<=0)return;c=r.find(".active").index(),d=u[c],t.trigger("insert.typehelper",[r.find(".active a"),d]),t.trigger("hide.typehelper");break;case 9:s=e(this).parents("form").find("input"),l=s.index(e("input:focus")),l!==-1&&(p=s.slice(l+1),p.length&&p.each(function(){var t,n;if(n=e(this).attr("type"),t=["text","email","password","url"],!e(this).val()&&t.indexOf(n)!==-1)return e(this).focus(),!1}));break;case 27:i.preventDefault();break;default:return}}),t.on("search.typehelper",function(){var s,l,c,p;if(t=e(this),n=t.find("input"),r=t.find("ul"),n.val().length)if(c=[],o.remoteData)o.remoteData(n.val(),function(t){u=t,c=t,c.length>0&&(r.children().remove(),e.tmpl(o.tpl,c).appendTo(r),1===c.length&&r.children().first().addClass("active"))});else{for(p=0,o.emailMode&&(o.data=[{name:n.val()}],e.each(a,function(e,t){n.val().split("@")[1]!=t&&o.data.push({name:n.val().replace(/@.*$/,"")+"@"+t})})),i=o.data.length,l=0;l<i&&(s=o.data[l],!(0===s.name.toLowerCase().indexOf(n.val().toLowerCase())&&(c.push(s),p++,p>=o.showNum)));)l++;c.length>0&&(r.children().remove(),e.tmpl(o.tpl,c).appendTo(r),(1===c.length||o.emailMode)&&r.children().first().addClass("active"))}}),n.val().length>0&&t.trigger("insert.typehelper",n))}}),function(e){"function"==typeof define&&define.amd?define("jquery-mousewheel",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,s=l.call(arguments,1),c=0,p=0,d=0,h=0,f=0,m=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(d=a.detail*-1),"wheelDelta"in a&&(d=a.wheelDelta),"wheelDeltaY"in a&&(d=a.wheelDeltaY),"wheelDeltaX"in a&&(p=a.wheelDeltaX*-1),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(p=d*-1,d=0),c=0===d?p:d,"deltaY"in a&&(d=a.deltaY*-1,c=d),"deltaX"in a&&(p=a.deltaX,0===d&&(c=p*-1)),0!==d||0!==p){if(1===a.deltaMode){var g=e.data(this,"mousewheel-line-height");c*=g,d*=g,p*=g}else if(2===a.deltaMode){var v=e.data(this,"mousewheel-page-height");c*=v,d*=v,p*=v}if(h=Math.max(Math.abs(d),Math.abs(p)),(!i||h<i)&&(i=h,r(a,h)&&(i/=40)),r(a,h)&&(c/=40,p/=40,d/=40),c=Math[c>=1?"floor":"ceil"](c/i),p=Math[p>=1?"floor":"ceil"](p/i),d=Math[d>=1?"floor":"ceil"](d/i),u.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();f=t.clientX-y.left,m=t.clientY-y.top}return t.deltaX=p,t.deltaY=d,t.deltaFactor=i,t.offsetX=f,t.offsetY=m,t.deltaMode=0,s.unshift(t,c,p,d),o&&clearTimeout(o),o=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function n(){i=null}function r(e,t){return u.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var o,i,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var c=a.length;c;)e.event.fixHooks[a[--c]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),r=n["offsetParent"in e.fn?"offsetParent":"parent"]();return r.length||(r=e("body")),parseInt(r.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e){"undefined"!=typeof module&&module.exports?module.exports=e:e(jQuery,window,document)}(function(e){!function(t){var n="function"==typeof define&&define.amd,r="undefined"!=typeof module&&module.exports,o="https:"==document.location.protocol?"https:":"http:",i="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js";n||(r?require("jquery-mousewheel")(e):e.event.special.mousewheel||e("head").append(decodeURI("%3Cscript src="+o+"//"+i+"%3E%3C/script%3E"))),t()}(function(){var t,n="mCustomScrollbar",r="mCS",o=".mCustomScrollbar",i={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},a=0,s={},l=window.attachEvent&&!window.addEventListener?1:0,c=!1,u=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],p={init:function(t){var t=e.extend(!0,{},i,t),n=d.call(this);if(t.live){var l=t.liveSelector||this.selector||o,c=e(l);if("off"===t.live)return void f(l);s[l]=setTimeout(function(){c.mCustomScrollbar(t),"once"===t.live&&c.length&&f(l)},500)}else f(l);return t.setWidth=t.set_width?t.set_width:t.setWidth,t.setHeight=t.set_height?t.set_height:t.setHeight,t.axis=t.horizontalScroll?"x":m(t.axis),t.scrollInertia=t.scrollInertia>0&&t.scrollInertia<17?17:t.scrollInertia,"object"!=typeof t.mouseWheel&&1==t.mouseWheel&&(t.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),t.mouseWheel.scrollAmount=t.mouseWheelPixels?t.mouseWheelPixels:t.mouseWheel.scrollAmount,t.mouseWheel.normalizeDelta=t.advanced.normalizeMouseWheelDelta?t.advanced.normalizeMouseWheelDelta:t.mouseWheel.normalizeDelta,t.scrollButtons.scrollType=g(t.scrollButtons.scrollType),h(t),e(n).each(function(){var n=e(this);if(!n.data(r)){n.data(r,{idx:++a,opt:t,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:n.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var o=n.data(r),i=o.opt,s=n.data("mcs-axis"),l=n.data("mcs-scrollbar-position"),c=n.data("mcs-theme");s&&(i.axis=s),l&&(i.scrollbarPosition=l),c&&(i.theme=c,h(i)),v.call(this),o&&i.callbacks.onCreate&&"function"==typeof i.callbacks.onCreate&&i.callbacks.onCreate.call(this),e("#mCSB_"+o.idx+"_container img:not(."+u[2]+")").addClass(u[2]),p.update.call(null,n)}})},update:function(t,n){var o=t||d.call(this);return e(o).each(function(){var t=e(this);if(t.data(r)){var o=t.data(r),i=o.opt,a=e("#mCSB_"+o.idx+"_container"),s=e("#mCSB_"+o.idx),l=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")];if(!a.length)return;o.tweenRunning&&X(t),n&&o&&i.callbacks.onBeforeUpdate&&"function"==typeof i.callbacks.onBeforeUpdate&&i.callbacks.onBeforeUpdate.call(this),t.hasClass(u[3])&&t.removeClass(u[3]),t.hasClass(u[4])&&t.removeClass(u[4]),s.css("max-height","none"),s.height()!==t.height()&&s.css("max-height",t.height()),b.call(this),"y"===i.axis||i.advanced.autoExpandHorizontalScroll||a.css("width",y(a)),o.overflowed=D.call(this),T.call(this),i.autoDraggerLength&&_.call(this),k.call(this),S.call(this);var c=[Math.abs(a[0].offsetTop),Math.abs(a[0].offsetLeft)];"x"!==i.axis&&(o.overflowed[0]?l[0].height()>l[0].parent().height()?C.call(this):(V(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}),o.contentReset.y=null):(C.call(this),"y"===i.axis?E.call(this):"yx"===i.axis&&o.overflowed[1]&&V(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==i.axis&&(o.overflowed[1]?l[1].width()>l[1].parent().width()?C.call(this):(V(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}),o.contentReset.x=null):(C.call(this),"x"===i.axis?E.call(this):"yx"===i.axis&&o.overflowed[0]&&V(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),n&&o&&(2===n&&i.callbacks.onImageLoad&&"function"==typeof i.callbacks.onImageLoad?i.callbacks.onImageLoad.call(this):3===n&&i.callbacks.onSelectorChange&&"function"==typeof i.callbacks.onSelectorChange?i.callbacks.onSelectorChange.call(this):i.callbacks.onUpdate&&"function"==typeof i.callbacks.onUpdate&&i.callbacks.onUpdate.call(this)),U.call(this)}})},scrollTo:function(t,n){if("undefined"!=typeof t&&null!=t){var o=d.call(this);return e(o).each(function(){var o=e(this);if(o.data(r)){var i=o.data(r),a=i.opt,s={trigger:"external",scrollInertia:a.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},l=e.extend(!0,{},s,n),c=H.call(this,t),u=l.scrollInertia>0&&l.scrollInertia<17?17:l.scrollInertia;c[0]=z.call(this,c[0],"y"),c[1]=z.call(this,c[1],"x"),l.moveDragger&&(c[0]*=i.scrollRatio.y,c[1]*=i.scrollRatio.x),l.dur=ne()?0:u,setTimeout(function(){null!==c[0]&&"undefined"!=typeof c[0]&&"x"!==a.axis&&i.overflowed[0]&&(l.dir="y",l.overwrite="all",V(o,c[0].toString(),l)),null!==c[1]&&"undefined"!=typeof c[1]&&"y"!==a.axis&&i.overflowed[1]&&(l.dir="x",l.overwrite="none",V(o,c[1].toString(),l))},l.timeout)}})}},stop:function(){var t=d.call(this);return e(t).each(function(){var t=e(this);t.data(r)&&X(t)})},disable:function(t){var n=d.call(this);return e(n).each(function(){var n=e(this);if(n.data(r)){n.data(r);U.call(this,"remove"),E.call(this),t&&C.call(this),T.call(this,!0),n.addClass(u[3])}})},destroy:function(){var t=d.call(this);return e(t).each(function(){var o=e(this);if(o.data(r)){var i=o.data(r),a=i.opt,s=e("#mCSB_"+i.idx),l=e("#mCSB_"+i.idx+"_container"),c=e(".mCSB_"+i.idx+"_scrollbar");a.live&&f(a.liveSelector||e(t).selector),U.call(this,"remove"),E.call(this),C.call(this),o.removeData(r),Q(this,"mcs"),c.remove(),l.find("img."+u[2]).removeClass(u[2]),s.replaceWith(l.contents()),o.removeClass(n+" _"+r+"_"+i.idx+" "+u[6]+" "+u[7]+" "+u[5]+" "+u[3]).addClass(u[4])}})}},d=function(){return"object"!=typeof e(this)||e(this).length<1?o:this},h=function(t){var n=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],r=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],o=["minimal","minimal-dark"],i=["minimal","minimal-dark"],a=["minimal","minimal-dark"];t.autoDraggerLength=!(e.inArray(t.theme,n)>-1)&&t.autoDraggerLength,t.autoExpandScrollbar=!(e.inArray(t.theme,r)>-1)&&t.autoExpandScrollbar,t.scrollButtons.enable=!(e.inArray(t.theme,o)>-1)&&t.scrollButtons.enable,t.autoHideScrollbar=e.inArray(t.theme,i)>-1||t.autoHideScrollbar,t.scrollbarPosition=e.inArray(t.theme,a)>-1?"outside":t.scrollbarPosition},f=function(e){s[e]&&(clearTimeout(s[e]),Q(s,e))},m=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},g=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},v=function(){var t=e(this),o=t.data(r),i=o.opt,a=i.autoExpandScrollbar?" "+u[1]+"_expand":"",s=["<div id='mCSB_"+o.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+o.idx+"_scrollbar mCS-"+i.theme+" mCSB_scrollTools_vertical"+a+"'><div class='"+u[12]+"'><div id='mCSB_"+o.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+o.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+o.idx+"_scrollbar mCS-"+i.theme+" mCSB_scrollTools_horizontal"+a+"'><div class='"+u[12]+"'><div id='mCSB_"+o.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],l="yx"===i.axis?"mCSB_vertical_horizontal":"x"===i.axis?"mCSB_horizontal":"mCSB_vertical",c="yx"===i.axis?s[0]+s[1]:"x"===i.axis?s[1]:s[0],p="yx"===i.axis?"<div id='mCSB_"+o.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",d=i.autoHideScrollbar?" "+u[6]:"",h="x"!==i.axis&&"rtl"===o.langDir?" "+u[7]:"";i.setWidth&&t.css("width",i.setWidth),i.setHeight&&t.css("height",i.setHeight),i.setLeft="y"!==i.axis&&"rtl"===o.langDir?"989999px":i.setLeft,t.addClass(n+" _"+r+"_"+o.idx+d+h).wrapInner("<div id='mCSB_"+o.idx+"' class='mCustomScrollBox mCS-"+i.theme+" "+l+"'><div id='mCSB_"+o.idx+"_container' class='mCSB_container' style='position:relative; top:"+i.setTop+"; left:"+i.setLeft+";' dir="+o.langDir+" /></div>");var f=e("#mCSB_"+o.idx),m=e("#mCSB_"+o.idx+"_container");"y"===i.axis||i.advanced.autoExpandHorizontalScroll||m.css("width",y(m)),"outside"===i.scrollbarPosition?("static"===t.css("position")&&t.css("position","relative"),t.css("overflow","visible"),f.addClass("mCSB_outside").after(c)):(f.addClass("mCSB_inside").append(c),m.wrap(p)),w.call(this);var g=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")];g[0].css("min-height",g[0].height()),g[1].css("min-width",g[1].width())},y=function(t){var n=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return e(this).outerWidth(!0)}).get())],r=t.parent().width();return n[0]>r?n[0]:n[1]>r?n[1]:"100%"},b=function(){var t=e(this),n=t.data(r),o=n.opt,i=e("#mCSB_"+n.idx+"_container");if(o.advanced.autoExpandHorizontalScroll&&"y"!==o.axis){i.css({width:"auto","min-width":0,"overflow-x":"scroll"});var a=Math.ceil(i[0].scrollWidth);3===o.advanced.autoExpandHorizontalScroll||2!==o.advanced.autoExpandHorizontalScroll&&a>i.parent().width()?i.css({width:a,"min-width":"100%","overflow-x":"inherit"}):i.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(i[0].getBoundingClientRect().right+.4)-Math.floor(i[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},w=function(){var t=e(this),n=t.data(r),o=n.opt,i=e(".mCSB_"+n.idx+"_scrollbar:first"),a=ee(o.scrollButtons.tabindex)?"tabindex='"+o.scrollButtons.tabindex+"'":"",s=["<a href='#' class='"+u[13]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[14]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[15]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[16]+"' oncontextmenu='return false;' "+a+" />"],l=["x"===o.axis?s[2]:s[0],"x"===o.axis?s[3]:s[1],s[2],s[3]];o.scrollButtons.enable&&i.prepend(l[0]).append(l[1]).next(".mCSB_scrollTools").prepend(l[2]).append(l[3])},_=function(){var t=e(this),n=t.data(r),o=e("#mCSB_"+n.idx),i=e("#mCSB_"+n.idx+"_container"),a=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")],s=[o.height()/i.outerHeight(!1),o.width()/i.outerWidth(!1)],c=[parseInt(a[0].css("min-height")),Math.round(s[0]*a[0].parent().height()),parseInt(a[1].css("min-width")),Math.round(s[1]*a[1].parent().width())],u=l&&c[1]<c[0]?c[0]:c[1],p=l&&c[3]<c[2]?c[2]:c[3];a[0].css({height:u,"max-height":a[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":c[0]+"px"}),a[1].css({width:p,"max-width":a[1].parent().width()-10})},k=function(){var t=e(this),n=t.data(r),o=e("#mCSB_"+n.idx),i=e("#mCSB_"+n.idx+"_container"),a=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")],s=[i.outerHeight(!1)-o.height(),i.outerWidth(!1)-o.width()],l=[s[0]/(a[0].parent().height()-a[0].height()),s[1]/(a[1].parent().width()-a[1].width())];n.scrollRatio={y:l[0],x:l[1]}},x=function(e,t,n){var r=n?u[0]+"_expanded":"",o=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(u[0]+" "+r),o.toggleClass(u[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(u[0]),o.removeClass(u[1])):(e.addClass(u[0]),o.addClass(u[1])))},D=function(){var t=e(this),n=t.data(r),o=e("#mCSB_"+n.idx),i=e("#mCSB_"+n.idx+"_container"),a=null==n.overflowed?i.height():i.outerHeight(!1),s=null==n.overflowed?i.width():i.outerWidth(!1),l=i[0].scrollHeight,c=i[0].scrollWidth;return l>a&&(a=l),c>s&&(s=c),[a>o.height(),s>o.width()]},C=function(){var t=e(this),n=t.data(r),o=n.opt,i=e("#mCSB_"+n.idx),a=e("#mCSB_"+n.idx+"_container"),s=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")];if(X(t),("x"!==o.axis&&!n.overflowed[0]||"y"===o.axis&&n.overflowed[0])&&(s[0].add(a).css("top",0),V(t,"_resetY")),"y"!==o.axis&&!n.overflowed[1]||"x"===o.axis&&n.overflowed[1]){var l=dx=0;"rtl"===n.langDir&&(l=i.width()-a.outerWidth(!1),dx=Math.abs(l/n.scrollRatio.x)),a.css("left",l),s[1].css("left",dx),V(t,"_resetX")}},S=function(){function t(){a=setTimeout(function(){e.event.special.mousewheel?(clearTimeout(a),F.call(n[0])):t()},100)}var n=e(this),o=n.data(r),i=o.opt;if(!o.bindEvents){if(B.call(this),i.contentTouchScroll&&A.call(this),I.call(this),i.mouseWheel.enable){var a;t()}O.call(this),L.call(this),i.advanced.autoScrollOnFocus&&M.call(this),i.scrollButtons.enable&&q.call(this),i.keyboard.enable&&P.call(this),o.bindEvents=!0}},E=function(){var t=e(this),n=t.data(r),o=n.opt,i=r+"_"+n.idx,a=".mCSB_"+n.idx+"_scrollbar",s=e("#mCSB_"+n.idx+",#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,"+a+" ."+u[12]+",#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal,"+a+">a"),l=e("#mCSB_"+n.idx+"_container");o.advanced.releaseDraggableSelectors&&s.add(e(o.advanced.releaseDraggableSelectors)),o.advanced.extraDraggableSelectors&&s.add(e(o.advanced.extraDraggableSelectors)),n.bindEvents&&(e(document).add(e(!R()||top.document)).unbind("."+i),s.each(function(){e(this).unbind("."+i)}),clearTimeout(t[0]._focusTimeout),Q(t[0],"_focusTimeout"),clearTimeout(n.sequential.step),Q(n.sequential,"step"),clearTimeout(l[0].onCompleteTimeout),Q(l[0],"onCompleteTimeout"),n.bindEvents=!1)},T=function(t){var n=e(this),o=n.data(r),i=o.opt,a=e("#mCSB_"+o.idx+"_container_wrapper"),s=a.length?a:e("#mCSB_"+o.idx+"_container"),l=[e("#mCSB_"+o.idx+"_scrollbar_vertical"),e("#mCSB_"+o.idx+"_scrollbar_horizontal")],c=[l[0].find(".mCSB_dragger"),l[1].find(".mCSB_dragger")];"x"!==i.axis&&(o.overflowed[0]&&!t?(l[0].add(c[0]).add(l[0].children("a")).css("display","block"),s.removeClass(u[8]+" "+u[10])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&c[0].css("display","none"),s.removeClass(u[10])):(l[0].css("display","none"),s.addClass(u[10])),s.addClass(u[8]))),"y"!==i.axis&&(o.overflowed[1]&&!t?(l[1].add(c[1]).add(l[1].children("a")).css("display","block"),s.removeClass(u[9]+" "+u[11])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&c[1].css("display","none"),s.removeClass(u[11])):(l[1].css("display","none"),s.addClass(u[11])),s.addClass(u[9]))),o.overflowed[0]||o.overflowed[1]?n.removeClass(u[5]):n.addClass(u[5])},$=function(t){var n=t.type,r=t.target.ownerDocument!==document?[e(frameElement).offset().top,e(frameElement).offset().left]:null,o=R()&&t.target.ownerDocument!==top.document?[e(t.view.frameElement).offset().top,e(t.view.frameElement).offset().left]:[0,0];switch(n){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return r?[t.originalEvent.pageY-r[0]+o[0],t.originalEvent.pageX-r[1]+o[1],!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],a=t.originalEvent.touches.length||t.originalEvent.changedTouches.length;return t.target.ownerDocument!==document?[i.screenY,i.screenX,a>1]:[i.pageY,i.pageX,a>1];default:return r?[t.pageY-r[0]+o[0],t.pageX-r[1]+o[1],!1]:[t.pageY,t.pageX,!1]}},B=function(){function t(e){var t=f.find("iframe");if(t.length){var n=e?"auto":"none";t.css("pointer-events",n)}}function n(e,t,n,r){if(f[0].idleTimer=p.scrollInertia<233?250:0,o.attr("id")===h[1])var i="x",a=(o[0].offsetLeft-t+r)*u.scrollRatio.x;else var i="y",a=(o[0].offsetTop-e+n)*u.scrollRatio.y;V(s,a.toString(),{dir:i,drag:!0})}var o,i,a,s=e(this),u=s.data(r),p=u.opt,d=r+"_"+u.idx,h=["mCSB_"+u.idx+"_dragger_vertical","mCSB_"+u.idx+"_dragger_horizontal"],f=e("#mCSB_"+u.idx+"_container"),m=e("#"+h[0]+",#"+h[1]),g=p.advanced.releaseDraggableSelectors?m.add(e(p.advanced.releaseDraggableSelectors)):m,v=p.advanced.extraDraggableSelectors?e(!R()||top.document).add(e(p.advanced.extraDraggableSelectors)):e(!R()||top.document);m.bind("mousedown."+d+" touchstart."+d+" pointerdown."+d+" MSPointerDown."+d,function(n){if(n.stopImmediatePropagation(),n.preventDefault(),G(n)){c=!0,l&&(document.onselectstart=function(){return!1}),t(!1),X(s),o=e(this);var r=o.offset(),u=$(n)[0]-r.top,d=$(n)[1]-r.left,h=o.height()+r.top,f=o.width()+r.left;u<h&&u>0&&d<f&&d>0&&(i=u,a=d),x(o,"active",p.autoExpandScrollbar)}}).bind("touchmove."+d,function(e){e.stopImmediatePropagation(),e.preventDefault();var t=o.offset(),r=$(e)[0]-t.top,s=$(e)[1]-t.left;n(i,a,r,s)}),e(document).add(v).bind("mousemove."+d+" pointermove."+d+" MSPointerMove."+d,function(e){if(o){var t=o.offset(),r=$(e)[0]-t.top,s=$(e)[1]-t.left;if(i===r&&a===s)return;n(i,a,r,s)}}).add(g).bind("mouseup."+d+" touchend."+d+" pointerup."+d+" MSPointerUp."+d,function(e){o&&(x(o,"active",p.autoExpandScrollbar),o=null),c=!1,l&&(document.onselectstart=null),t(!0)})},A=function(){function n(e){if(!Z(e)||c||$(e)[2])return void(t=0);t=1,k=0,x=0,u=1,D.removeClass("mCS_touch_action");var n=B.offset();p=$(e)[0]-n.top,d=$(e)[1]-n.left,M=[$(e)[0],$(e)[1]]}function o(e){if(Z(e)&&!c&&!$(e)[2]&&(S.documentTouchScroll||e.preventDefault(),e.stopImmediatePropagation(),(!x||k)&&u)){g=Y();var t=T.offset(),n=$(e)[0]-t.top,r=$(e)[1]-t.left,o="mcsLinearOut";if(I.push(n),F.push(r),M[2]=Math.abs($(e)[0]-M[0]),M[3]=Math.abs($(e)[1]-M[1]),C.overflowed[0])var i=A[0].parent().height()-A[0].height(),a=p-n>0&&n-p>-(i*C.scrollRatio.y)&&(2*M[3]<M[2]||"yx"===S.axis);if(C.overflowed[1])var s=A[1].parent().width()-A[1].width(),h=d-r>0&&r-d>-(s*C.scrollRatio.x)&&(2*M[2]<M[3]||"yx"===S.axis);a||h?(P||e.preventDefault(),k=1):(x=1,D.addClass("mCS_touch_action")),P&&e.preventDefault(),w="yx"===S.axis?[p-n,d-r]:"x"===S.axis?[null,d-r]:[p-n,null],B[0].idleTimer=250,C.overflowed[0]&&l(w[0],j,o,"y","all",!0),C.overflowed[1]&&l(w[1],j,o,"x",O,!0)}}function i(e){if(!Z(e)||c||$(e)[2])return void(t=0);t=1,e.stopImmediatePropagation(),X(D),m=Y();var n=T.offset();h=$(e)[0]-n.top,f=$(e)[1]-n.left,I=[],F=[]}function a(e){if(Z(e)&&!c&&!$(e)[2]){u=0,e.stopImmediatePropagation(),k=0,x=0,v=Y();var t=T.offset(),n=$(e)[0]-t.top,r=$(e)[1]-t.left;if(!(v-g>30)){b=1e3/(v-m);var o="mcsEaseOut",i=b<2.5,a=i?[I[I.length-2],F[F.length-2]]:[0,0];y=i?[n-a[0],r-a[1]]:[n-h,r-f];var p=[Math.abs(y[0]),Math.abs(y[1])];b=i?[Math.abs(y[0]/4),Math.abs(y[1]/4)]:[b,b];var d=[Math.abs(B[0].offsetTop)-y[0]*s(p[0]/b[0],b[0]),Math.abs(B[0].offsetLeft)-y[1]*s(p[1]/b[1],b[1])];w="yx"===S.axis?[d[0],d[1]]:"x"===S.axis?[null,d[1]]:[d[0],null],_=[4*p[0]+S.scrollInertia,4*p[1]+S.scrollInertia];var D=parseInt(S.contentTouchScroll)||0;w[0]=p[0]>D?w[0]:0,w[1]=p[1]>D?w[1]:0,C.overflowed[0]&&l(w[0],_[0],o,"y",O,!1),C.overflowed[1]&&l(w[1],_[1],o,"x",O,!1)}}}function s(e,t){var n=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?n[0]:n[3]:e>60?t>3?n[3]:n[2]:e>30?t>8?n[1]:t>6?n[0]:t>4?t:n[2]:t>8?t:n[3]}function l(e,t,n,r,o,i){e&&V(D,e.toString(),{dur:t,scrollEasing:n,dir:r,overwrite:o,drag:i})}var u,p,d,h,f,m,g,v,y,b,w,_,k,x,D=e(this),C=D.data(r),S=C.opt,E=r+"_"+C.idx,T=e("#mCSB_"+C.idx),B=e("#mCSB_"+C.idx+"_container"),A=[e("#mCSB_"+C.idx+"_dragger_vertical"),e("#mCSB_"+C.idx+"_dragger_horizontal")],I=[],F=[],j=0,O="yx"===S.axis?"none":"all",M=[],L=B.find("iframe"),q=["touchstart."+E+" pointerdown."+E+" MSPointerDown."+E,"touchmove."+E+" pointermove."+E+" MSPointerMove."+E,"touchend."+E+" pointerup."+E+" MSPointerUp."+E],P=void 0!==document.body.style.touchAction;B.bind(q[0],function(e){n(e)}).bind(q[1],function(e){o(e)}),T.bind(q[0],function(e){i(e)}).bind(q[2],function(e){a(e)}),L.length&&L.each(function(){e(this).load(function(){R(this)&&e(this.contentDocument||this.contentWindow.document).bind(q[0],function(e){n(e),i(e)}).bind(q[1],function(e){o(e)}).bind(q[2],function(e){a(e)})})})},I=function(){function n(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function o(e,t,n){u.type=n&&i?"stepped":"stepless",u.scrollAmount=10,N(a,e,t,"mcsLinearOut",n?60:null)}var i,a=e(this),s=a.data(r),l=s.opt,u=s.sequential,p=r+"_"+s.idx,d=e("#mCSB_"+s.idx+"_container"),h=d.parent();d.bind("mousedown."+p,function(e){t||i||(i=1,c=!0)}).add(document).bind("mousemove."+p,function(e){if(!t&&i&&n()){var r=d.offset(),a=$(e)[0]-r.top+d[0].offsetTop,c=$(e)[1]-r.left+d[0].offsetLeft;a>0&&a<h.height()&&c>0&&c<h.width()?u.step&&o("off",null,"stepped"):("x"!==l.axis&&s.overflowed[0]&&(a<0?o("on",38):a>h.height()&&o("on",40)),"y"!==l.axis&&s.overflowed[1]&&(c<0?o("on",37):c>h.width()&&o("on",39)))}}).bind("mouseup."+p+" dragend."+p,function(e){t||(i&&(i=0,o("off",null)),c=!1)})},F=function(){function t(t,r){if(X(n),!j(n,t.target)){var a="auto"!==i.mouseWheel.deltaFactor?parseInt(i.mouseWheel.deltaFactor):l&&t.deltaFactor<100?100:t.deltaFactor||100,u=i.scrollInertia;if("x"===i.axis||"x"===i.mouseWheel.axis)var p="x",d=[Math.round(a*o.scrollRatio.x),parseInt(i.mouseWheel.scrollAmount)],h="auto"!==i.mouseWheel.scrollAmount?d[1]:d[0]>=s.width()?.9*s.width():d[0],f=Math.abs(e("#mCSB_"+o.idx+"_container")[0].offsetLeft),m=c[1][0].offsetLeft,g=c[1].parent().width()-c[1].width(),v=t.deltaX||t.deltaY||r;else var p="y",d=[Math.round(a*o.scrollRatio.y),parseInt(i.mouseWheel.scrollAmount)],h="auto"!==i.mouseWheel.scrollAmount?d[1]:d[0]>=s.height()?.9*s.height():d[0],f=Math.abs(e("#mCSB_"+o.idx+"_container")[0].offsetTop),m=c[0][0].offsetTop,g=c[0].parent().height()-c[0].height(),v=t.deltaY||r;"y"===p&&!o.overflowed[0]||"x"===p&&!o.overflowed[1]||((i.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(v=-v),i.mouseWheel.normalizeDelta&&(v=v<0?-1:1),(v>0&&0!==m||v<0&&m!==g||i.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),t.deltaFactor<2&&!i.mouseWheel.normalizeDelta&&(h=t.deltaFactor,u=17),V(n,(f-v*h).toString(),{dir:p,dur:u}))}}if(e(this).data(r)){var n=e(this),o=n.data(r),i=o.opt,a=r+"_"+o.idx,s=e("#mCSB_"+o.idx),c=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")],u=e("#mCSB_"+o.idx+"_container").find("iframe");u.length&&u.each(function(){e(this).load(function(){R(this)&&e(this.contentDocument||this.contentWindow.document).bind("mousewheel."+a,function(e,n){t(e,n)})})}),s.bind("mousewheel."+a,function(e,n){t(e,n)})}},R=function(e){var t=null;if(e){try{var n=e.contentDocument||e.contentWindow.document;t=n.body.innerHTML}catch(e){}return null!==t}try{var n=top.document;t=n.body.innerHTML}catch(e){}return null!==t},j=function(t,n){var o=n.nodeName.toLowerCase(),i=t.data(r).opt.mouseWheel.disableOver,a=["select","textarea"];return e.inArray(o,i)>-1&&!(e.inArray(o,a)>-1&&!e(n).is(":focus"))},O=function(){var t,n=e(this),o=n.data(r),i=r+"_"+o.idx,a=e("#mCSB_"+o.idx+"_container"),s=a.parent(),l=e(".mCSB_"+o.idx+"_scrollbar ."+u[12]);l.bind("mousedown."+i+" touchstart."+i+" pointerdown."+i+" MSPointerDown."+i,function(n){
c=!0,e(n.target).hasClass("mCSB_dragger")||(t=1)}).bind("touchend."+i+" pointerup."+i+" MSPointerUp."+i,function(e){c=!1}).bind("click."+i,function(r){if(t&&(t=0,e(r.target).hasClass(u[12])||e(r.target).hasClass("mCSB_draggerRail"))){X(n);var i=e(this),l=i.find(".mCSB_dragger");if(i.parent(".mCSB_scrollTools_horizontal").length>0){if(!o.overflowed[1])return;var c="x",p=r.pageX>l.offset().left?-1:1,d=Math.abs(a[0].offsetLeft)-p*(.9*s.width())}else{if(!o.overflowed[0])return;var c="y",p=r.pageY>l.offset().top?-1:1,d=Math.abs(a[0].offsetTop)-p*(.9*s.height())}V(n,d.toString(),{dir:c,scrollEasing:"mcsEaseInOut"})}})},M=function(){var t=e(this),n=t.data(r),o=n.opt,i=r+"_"+n.idx,a=e("#mCSB_"+n.idx+"_container"),s=a.parent();a.bind("focusin."+i,function(n){var r=e(document.activeElement),i=a.find(".mCustomScrollBox").length,l=0;r.is(o.advanced.autoScrollOnFocus)&&(X(t),clearTimeout(t[0]._focusTimeout),t[0]._focusTimer=i?(l+17)*i:0,t[0]._focusTimeout=setTimeout(function(){var e=[te(r)[0],te(r)[1]],n=[a[0].offsetTop,a[0].offsetLeft],i=[n[0]+e[0]>=0&&n[0]+e[0]<s.height()-r.outerHeight(!1),n[1]+e[1]>=0&&n[0]+e[1]<s.width()-r.outerWidth(!1)],c="yx"!==o.axis||i[0]||i[1]?"all":"none";"x"===o.axis||i[0]||V(t,e[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:c,dur:l}),"y"===o.axis||i[1]||V(t,e[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:c,dur:l})},t[0]._focusTimer))})},L=function(){var t=e(this),n=t.data(r),o=r+"_"+n.idx,i=e("#mCSB_"+n.idx+"_container").parent();i.bind("scroll."+o,function(t){0===i.scrollTop()&&0===i.scrollLeft()||e(".mCSB_"+n.idx+"_scrollbar").css("visibility","hidden")})},q=function(){var t=e(this),n=t.data(r),o=n.opt,i=n.sequential,a=r+"_"+n.idx,s=".mCSB_"+n.idx+"_scrollbar",l=e(s+">a");l.bind("mousedown."+a+" touchstart."+a+" pointerdown."+a+" MSPointerDown."+a+" mouseup."+a+" touchend."+a+" pointerup."+a+" MSPointerUp."+a+" mouseout."+a+" pointerout."+a+" MSPointerOut."+a+" click."+a,function(r){function a(e,n){i.scrollAmount=o.scrollButtons.scrollAmount,N(t,e,n)}if(r.preventDefault(),G(r)){var s=e(this).attr("class");switch(i.type=o.scrollButtons.scrollType,r.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===i.type)return;c=!0,n.tweenRunning=!1,a("on",s);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===i.type)return;c=!1,i.dir&&a("off",s);break;case"click":if("stepped"!==i.type||n.tweenRunning)return;a("on",s)}}})},P=function(){function t(t){function r(e,t){a.type=i.keyboard.scrollType,a.scrollAmount=i.keyboard.scrollAmount,"stepped"===a.type&&o.tweenRunning||N(n,e,t)}switch(t.type){case"blur":o.tweenRunning&&a.dir&&r("off",null);break;case"keydown":case"keyup":var s=t.keyCode?t.keyCode:t.which,l="on";if("x"!==i.axis&&(38===s||40===s)||"y"!==i.axis&&(37===s||39===s)){if((38===s||40===s)&&!o.overflowed[0]||(37===s||39===s)&&!o.overflowed[1])return;"keyup"===t.type&&(l="off"),e(document.activeElement).is(p)||(t.preventDefault(),t.stopImmediatePropagation(),r(l,s))}else if(33===s||34===s){if((o.overflowed[0]||o.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type){X(n);var d=34===s?-1:1;if("x"===i.axis||"yx"===i.axis&&o.overflowed[1]&&!o.overflowed[0])var h="x",f=Math.abs(c[0].offsetLeft)-d*(.9*u.width());else var h="y",f=Math.abs(c[0].offsetTop)-d*(.9*u.height());V(n,f.toString(),{dir:h,scrollEasing:"mcsEaseInOut"})}}else if((35===s||36===s)&&!e(document.activeElement).is(p)&&((o.overflowed[0]||o.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type)){if("x"===i.axis||"yx"===i.axis&&o.overflowed[1]&&!o.overflowed[0])var h="x",f=35===s?Math.abs(u.width()-c.outerWidth(!1)):0;else var h="y",f=35===s?Math.abs(u.height()-c.outerHeight(!1)):0;V(n,f.toString(),{dir:h,scrollEasing:"mcsEaseInOut"})}}}var n=e(this),o=n.data(r),i=o.opt,a=o.sequential,s=r+"_"+o.idx,l=e("#mCSB_"+o.idx),c=e("#mCSB_"+o.idx+"_container"),u=c.parent(),p="input,textarea,select,datalist,keygen,[contenteditable='true']",d=c.find("iframe"),h=["blur."+s+" keydown."+s+" keyup."+s];d.length&&d.each(function(){e(this).load(function(){R(this)&&e(this.contentDocument||this.contentWindow.document).bind(h[0],function(e){t(e)})})}),l.attr("tabindex","0").bind(h[0],function(e){t(e)})},N=function(t,n,o,i,a){function s(e){p.snapAmount&&(d.scrollAmount=p.snapAmount instanceof Array?"x"===d.dir[0]?p.snapAmount[1]:p.snapAmount[0]:p.snapAmount);var n="stepped"!==d.type,r=a?a:e?n?m/1.5:g:1e3/60,o=e?n?7.5:40:2.5,l=[Math.abs(h[0].offsetTop),Math.abs(h[0].offsetLeft)],u=[c.scrollRatio.y>10?10:c.scrollRatio.y,c.scrollRatio.x>10?10:c.scrollRatio.x],f="x"===d.dir[0]?l[1]+d.dir[1]*(u[1]*o):l[0]+d.dir[1]*(u[0]*o),v="x"===d.dir[0]?l[1]+d.dir[1]*parseInt(d.scrollAmount):l[0]+d.dir[1]*parseInt(d.scrollAmount),y="auto"!==d.scrollAmount?v:f,b=i?i:e?n?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",w=!!e;return e&&r<17&&(y="x"===d.dir[0]?l[1]:l[0]),V(t,y.toString(),{dir:d.dir[0],scrollEasing:b,dur:r,onComplete:w}),e?void(d.dir=!1):(clearTimeout(d.step),void(d.step=setTimeout(function(){s()},r)))}function l(){clearTimeout(d.step),Q(d,"step"),X(t)}var c=t.data(r),p=c.opt,d=c.sequential,h=e("#mCSB_"+c.idx+"_container"),f="stepped"===d.type,m=p.scrollInertia<26?26:p.scrollInertia,g=p.scrollInertia<1?17:p.scrollInertia;switch(n){case"on":if(d.dir=[o===u[16]||o===u[15]||39===o||37===o?"x":"y",o===u[13]||o===u[15]||38===o||37===o?-1:1],X(t),ee(o)&&"stepped"===d.type)return;s(f);break;case"off":l(),(f||c.tweenRunning&&d.dir)&&s(!0)}},H=function(t){var n=e(this).data(r).opt,o=[];return"function"==typeof t&&(t=t()),t instanceof Array?o=t.length>1?[t[0],t[1]]:"x"===n.axis?[null,t[0]]:[t[0],null]:(o[0]=t.y?t.y:t.x||"x"===n.axis?null:t,o[1]=t.x?t.x:t.y||"y"===n.axis?null:t),"function"==typeof o[0]&&(o[0]=o[0]()),"function"==typeof o[1]&&(o[1]=o[1]()),o},z=function(t,n){if(null!=t&&"undefined"!=typeof t){var o=e(this),i=o.data(r),a=i.opt,s=e("#mCSB_"+i.idx+"_container"),l=s.parent(),c=typeof t;n||(n="x"===a.axis?"x":"y");var u="x"===n?s.outerWidth(!1):s.outerHeight(!1),d="x"===n?s[0].offsetLeft:s[0].offsetTop,h="x"===n?"left":"top";switch(c){case"function":return t();case"object":var f=t.jquery?t:e(t);if(!f.length)return;return"x"===n?te(f)[1]:te(f)[0];case"string":case"number":if(ee(t))return Math.abs(t);if(t.indexOf("%")!==-1)return Math.abs(u*parseInt(t)/100);if(t.indexOf("-=")!==-1)return Math.abs(d-parseInt(t.split("-=")[1]));if(t.indexOf("+=")!==-1){var m=d+parseInt(t.split("+=")[1]);return m>=0?0:Math.abs(m)}if(t.indexOf("px")!==-1&&ee(t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(l.height()-s.outerHeight(!1));if("right"===t)return Math.abs(l.width()-s.outerWidth(!1));if("first"===t||"last"===t){var f=s.find(":"+t);return"x"===n?te(f)[1]:te(f)[0]}return e(t).length?"x"===n?te(e(t))[1]:te(e(t))[0]:(s.css(h,t),void p.update.call(null,o[0]))}}},U=function(t){function n(){return clearTimeout(d[0].autoUpdate),0===s.parents("html").length?void(s=null):void(d[0].autoUpdate=setTimeout(function(){return c.advanced.updateOnSelectorChange&&(l.poll.change.n=i(),l.poll.change.n!==l.poll.change.o)?(l.poll.change.o=l.poll.change.n,void a(3)):c.advanced.updateOnContentResize&&(l.poll.size.n=s[0].scrollHeight+s[0].scrollWidth+d[0].offsetHeight+s[0].offsetHeight+s[0].offsetWidth,l.poll.size.n!==l.poll.size.o)?(l.poll.size.o=l.poll.size.n,void a(1)):!c.advanced.updateOnImageLoad||"auto"===c.advanced.updateOnImageLoad&&"y"===c.axis||(l.poll.img.n=d.find("img").length,l.poll.img.n===l.poll.img.o)?void((c.advanced.updateOnSelectorChange||c.advanced.updateOnContentResize||c.advanced.updateOnImageLoad)&&n()):(l.poll.img.o=l.poll.img.n,void d.find("img").each(function(){o(this)}))},c.advanced.autoUpdateTimeout))}function o(t){function n(e,t){return function(){return t.apply(e,arguments)}}function r(){this.onload=null,e(t).addClass(u[2]),a(2)}if(e(t).hasClass(u[2]))return void a();var o=new Image;o.onload=n(o,r),o.src=t.src}function i(){c.advanced.updateOnSelectorChange===!0&&(c.advanced.updateOnSelectorChange="*");var e=0,t=d.find(c.advanced.updateOnSelectorChange);return c.advanced.updateOnSelectorChange&&t.length>0&&t.each(function(){e+=this.offsetHeight+this.offsetWidth}),e}function a(e){clearTimeout(d[0].autoUpdate),p.update.call(null,s[0],e)}var s=e(this),l=s.data(r),c=l.opt,d=e("#mCSB_"+l.idx+"_container");return t?(clearTimeout(d[0].autoUpdate),void Q(d[0],"autoUpdate")):void n()},W=function(e,t,n){return Math.round(e/t)*t-n},X=function(t){var n=t.data(r),o=e("#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal");o.each(function(){J.call(this)})},V=function(t,n,o){function i(e){return l&&c.callbacks[e]&&"function"==typeof c.callbacks[e]}function a(){return[c.callbacks.alwaysTriggerOffsets||w>=_[0]+D,c.callbacks.alwaysTriggerOffsets||w<=-C]}function s(){var e=[h[0].offsetTop,h[0].offsetLeft],n=[y[0].offsetTop,y[0].offsetLeft],r=[h.outerHeight(!1),h.outerWidth(!1)],i=[d.height(),d.width()];t[0].mcs={content:h,top:e[0],left:e[1],draggerTop:n[0],draggerLeft:n[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(r[0])-i[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(r[1])-i[1])),direction:o.dir}}var l=t.data(r),c=l.opt,u={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:c.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},o=e.extend(u,o),p=[o.dur,o.drag?0:o.dur],d=e("#mCSB_"+l.idx),h=e("#mCSB_"+l.idx+"_container"),f=h.parent(),m=c.callbacks.onTotalScrollOffset?H.call(t,c.callbacks.onTotalScrollOffset):[0,0],g=c.callbacks.onTotalScrollBackOffset?H.call(t,c.callbacks.onTotalScrollBackOffset):[0,0];if(l.trigger=o.trigger,0===f.scrollTop()&&0===f.scrollLeft()||(e(".mCSB_"+l.idx+"_scrollbar").css("visibility","visible"),f.scrollTop(0).scrollLeft(0)),"_resetY"!==n||l.contentReset.y||(i("onOverflowYNone")&&c.callbacks.onOverflowYNone.call(t[0]),l.contentReset.y=1),"_resetX"!==n||l.contentReset.x||(i("onOverflowXNone")&&c.callbacks.onOverflowXNone.call(t[0]),l.contentReset.x=1),"_resetY"!==n&&"_resetX"!==n){if(!l.contentReset.y&&t[0].mcs||!l.overflowed[0]||(i("onOverflowY")&&c.callbacks.onOverflowY.call(t[0]),l.contentReset.x=null),!l.contentReset.x&&t[0].mcs||!l.overflowed[1]||(i("onOverflowX")&&c.callbacks.onOverflowX.call(t[0]),l.contentReset.x=null),c.snapAmount){var v=c.snapAmount instanceof Array?"x"===o.dir?c.snapAmount[1]:c.snapAmount[0]:c.snapAmount;n=W(n,v,c.snapOffset)}switch(o.dir){case"x":var y=e("#mCSB_"+l.idx+"_dragger_horizontal"),b="left",w=h[0].offsetLeft,_=[d.width()-h.outerWidth(!1),y.parent().width()-y.width()],k=[n,0===n?0:n/l.scrollRatio.x],D=m[1],C=g[1],S=D>0?D/l.scrollRatio.x:0,E=C>0?C/l.scrollRatio.x:0;break;case"y":var y=e("#mCSB_"+l.idx+"_dragger_vertical"),b="top",w=h[0].offsetTop,_=[d.height()-h.outerHeight(!1),y.parent().height()-y.height()],k=[n,0===n?0:n/l.scrollRatio.y],D=m[0],C=g[0],S=D>0?D/l.scrollRatio.y:0,E=C>0?C/l.scrollRatio.y:0}k[1]<0||0===k[0]&&0===k[1]?k=[0,0]:k[1]>=_[1]?k=[_[0],_[1]]:k[0]=-k[0],t[0].mcs||(s(),i("onInit")&&c.callbacks.onInit.call(t[0])),clearTimeout(h[0].onCompleteTimeout),K(y[0],b,Math.round(k[1]),p[1],o.scrollEasing),!l.tweenRunning&&(0===w&&k[0]>=0||w===_[0]&&k[0]<=_[0])||K(h[0],b,Math.round(k[0]),p[0],o.scrollEasing,o.overwrite,{onStart:function(){o.callbacks&&o.onStart&&!l.tweenRunning&&(i("onScrollStart")&&(s(),c.callbacks.onScrollStart.call(t[0])),l.tweenRunning=!0,x(y),l.cbOffsets=a())},onUpdate:function(){o.callbacks&&o.onUpdate&&i("whileScrolling")&&(s(),c.callbacks.whileScrolling.call(t[0]))},onComplete:function(){if(o.callbacks&&o.onComplete){"yx"===c.axis&&clearTimeout(h[0].onCompleteTimeout);var e=h[0].idleTimer||0;h[0].onCompleteTimeout=setTimeout(function(){i("onScroll")&&(s(),c.callbacks.onScroll.call(t[0])),i("onTotalScroll")&&k[1]>=_[1]-S&&l.cbOffsets[0]&&(s(),c.callbacks.onTotalScroll.call(t[0])),i("onTotalScrollBack")&&k[1]<=E&&l.cbOffsets[1]&&(s(),c.callbacks.onTotalScrollBack.call(t[0])),l.tweenRunning=!1,h[0].idleTimer=0,x(y,"hide")},e)}}})}},K=function(e,t,n,r,o,i,a){function s(){_.stop||(y||f.call(),y=Y()-v,l(),y>=_.time&&(_.time=y>_.time?y+d-(y-_.time):y+d-1,_.time<y+1&&(_.time=y+1)),_.time<r?_.id=h(s):g.call())}function l(){r>0?(_.currVal=p(_.time,b,k,r,o),w[t]=Math.round(_.currVal)+"px"):w[t]=n+"px",m.call()}function c(){d=1e3/60,_.time=y+d,h=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return l(),setTimeout(e,.01)},_.id=h(s)}function u(){null!=_.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(_.id):clearTimeout(_.id),_.id=null)}function p(e,t,n,r,o){switch(o){case"linear":case"mcsLinear":return n*e/r+t;case"mcsLinearOut":return e/=r,e--,n*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return e/=r/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t);case"easeInOutStrong":return e/=r/2,e<1?n/2*Math.pow(2,10*(e-1))+t:(e--,n/2*(-Math.pow(2,-10*e)+2)+t);case"easeInOut":case"mcsEaseInOut":return e/=r/2,e<1?n/2*e*e*e+t:(e-=2,n/2*(e*e*e+2)+t);case"easeOutSmooth":return e/=r,e--,-n*(e*e*e*e-1)+t;case"easeOutStrong":return n*(-Math.pow(2,-10*e/r)+1)+t;case"easeOut":case"mcsEaseOut":default:var i=(e/=r)*e,a=i*e;return t+n*(.499999999999997*a*i+-2.5*i*i+5.5*a+-6.5*i+4*e)}}e._mTween||(e._mTween={top:{},left:{}});var d,h,a=a||{},f=a.onStart||function(){},m=a.onUpdate||function(){},g=a.onComplete||function(){},v=Y(),y=0,b=e.offsetTop,w=e.style,_=e._mTween[t];"left"===t&&(b=e.offsetLeft);var k=n-b;_.stop=0,"none"!==i&&u(),c()},Y=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},J=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],n=0;n<t.length;n++){var r=t[n];e._mTween[r].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[r].id):clearTimeout(e._mTween[r].id),e._mTween[r].id=null,e._mTween[r].stop=1)}},Q=function(e,t){try{delete e[t]}catch(n){e[t]=null}},G=function(e){return!(e.which&&1!==e.which)},Z=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},ee=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},te=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]},ne=function(){function e(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}var t=e();return!!t&&document[t]};e.fn[n]=function(t){return p[t]?p[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):p.init.apply(this,arguments)},e[n]=function(t){return p[t]?p[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):p.init.apply(this,arguments)},e[n].defaults=i,window[n]=!0,e(window).load(function(){e(o)[n](),e.extend(e.expr[":"],{mcsInView:e.expr[":"].mcsInView||function(t){var n,r,o=e(t),i=o.parents(".mCSB_container");if(i.length)return n=i.parent(),r=[i[0].offsetTop,i[0].offsetLeft],r[0]+te(o)[0]>=0&&r[0]+te(o)[0]<n.height()-o.outerHeight(!1)&&r[1]+te(o)[1]>=0&&r[1]+te(o)[1]<n.width()-o.outerWidth(!1)},mcsOverflow:e.expr[":"].mcsOverflow||function(t){var n=e(t).data(r);if(n)return n.overflowed[0]||n.overflowed[1]}})})})}),define("mCustomScrollbar",["jquery"],function(e){return function(){var t;return t||e.$.fn.mCustomScrollbar}}(this)),define("formAjax",["sfModal","mobile"],function(e,t){var n={_:window.SF.token};$(document).ajaxComplete(function(t,r,o){var i,a,s,l,c,u,p;if(window.captchaPostData=null!=(s=window.captchaPostData)?s:{},r.responseText)if(r.responseText.indexOf("<br />")!==-1||r.responseText.indexOf("<pre>exception ")!==-1)console.log("后端返回错误信息=> ",r.responseText),"localhost"===location.hostname&&e({title:"警告：前方高能！",$content:r.responseText,hideClose:!0,modalSize:"modal-lg"});else if(r.responseJSON&&1===r.responseJSON.status){if(p=r.responseJSON,!p.data)return;var d=p.data[0];if(o.url.indexOf("/user/stat")===-1&&"login"===d)require("main").register();else if("form"===d&&p.data[1].hasOwnProperty("captcha")&&1===_.keys(p.data[1]).length)captchaPostData.api=o.url,captchaPostData.data=o.data,e({modalSize:"modal-sm",title:p.data[1].captcha,content:"<div id='captchaPostForm' ><div class='reloadCaptcha'><img title='点击切换验证码'  src='/user/captcha?w=240&h=50' ></div><div class='form-group'><input class='form-action form-control' name='captcha'></div></div>",hideClose:!0,doneText:"确认并提交",doneFn:function(){var e;return e=$("#captchaPostForm").find("input[name=captcha]"),captchaPostData.captcha=e.val(),$.post("/api/captcha/check",{captcha:captchaPostData.captcha},function(t){if(!t.status)return t.data?$.post(captchaPostData.api,captchaPostData.data+"&captcha="+captchaPostData.captcha,function(e){return window.captchaPostData={},e.data.hasOwnProperty("url")?location.href=e.data.url:location.reload()}):(e.addClass("error"),console.log("验证码错误"),$(".reloadCaptcha").trigger("click"))})}});else if("robot"===d)location.href="/stop-robot";else if("unactivated"===d)e("hide"),$("#activate").modal("show");else if("nonBlocked"===d)e(p.data[1]);else if("access"===d)e({title:p.data[1][0],content:p.data[1][1],hideClose:!0});else if("form"===d){var h=o.url.split("?")[0];u=o.url.split("/")[2],u=u.split("?")[0],l=new RegExp("[?&]_="+n._),c=o.url.replace(l,""),i=!0;var f=p.data[1];$.each(f,function(e,t){var n,r,o,a;if("captcha"===e&&($("[name=captcha]").parents(".form-group").show(),$(".captcha").parent("a").click()),o=e.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),"tags"===e&&"必须填写标签"===t)return void $("#article .sf-typeHelper, #question .sf-typeHelper , #live .sf-typeHelper, #liveSeries .sf-typeHelper, .blog-post .sf-typeHelper, .sf-typeHelper--fortags").addClass("error").after('<span class="error--msg">'+t+"</span>");if("cap"===e)return $('input[name="cap"]').closest(".form-group").find(".help-block.err").remove(),$(".captchaInput").addClass("has-error"),$('input[name="cap"]').closest(".form-group").addClass("has-error"),void $('input[name="cap"]').addClass("error").after('<span class="help-block err">'+t+"</span>");if("list"===e)return void $("#liveSeries .liveseries-select").addClass("error").after('<span class="error--msg">'+t+"</span>");if(a="#"+u+o,0===$(a).length&&(a="#"+u.replace(/s$/,"")+o),r=$("form#"+u+" *[name="+e+"]").not("[type=hidden]").parents(".form-group"),0===r.length&&(r=$("form#"+u.replace(/s$/,"")+" *[name="+e+"]").not("[type=hidden]").parents(".form-group")),n=$('form[action="'+h+'"] *[name='+e+"]").not("[type=hidden]").parents(".form-group"),n.length||(n=$('form[action="'+c+'"] *[name='+e+"]").not("[type=hidden]").parents(".form-group"),n.length||(n=$('.form[action="'+h+'"] *[name='+e+"]").not("[type=hidden]").parents(".form-group"),n.length||(n=$("form *[name="+e+"]").not("[type=hidden]").parents(".form-group"),n.length||(n=$("form *[data-name="+e+"]").not("[type=hidden]").parents(".form-group"))))),$(a).length)$(a).addClass("error").attr("data-error",t),0===$(a).next(".error--msg").length&&$(a).after('<span class="error--msg">'+t+"</span>");else if(r.length){r.find(".help-block.err").remove(),r.addClass("has-error");var s=r.find("[name="+e+"]").not("[type=hidden]"),l=s.closest(".input-group");l.length>0?l.after('<span class="help-block err">'+t+"</span>"):s.after('<span class="help-block err">'+t+"</span>")}else if(n.length)n.find(".help-block").remove(),n.addClass("has-error"),n.find(".input-group").length>0?n.find(".input-group").after('<span class="help-block err">'+t+"</span>"):(n.find("[name="+e+"]").not("[type=hidden]").parents(".form-group").append('<span class="help-block err">'+t+"</span>"),n.find("[data-name="+e+"]").not("[type=hidden]").parents(".form-group").append('<span class="help-block err">'+t+"</span>"));else if($("form").length&&!$("form").hasClass("header-search")){if($("form#"+u+" *[name="+e+"]").not("[type=hidden]").siblings(".error--msg").remove(),$("form#"+u+" *[name="+e+"]").not("[type=hidden]").addClass("error").attr("data-error",t).after('<span class="error--msg">'+t+"</span>"),1===$("form").length&&$("form").hasClass("header-search")){var p=$(".form *[data-name="+e+"]");0==p.length&&(p=$(".form *[name="+e+"]"));var d=p.closest(".form-group");d.addClass("has-error"),d.find(".err").remove(),p.after('<span class="help-block err">'+t+"</span>")}}else if($(".form").length){var f=$(".form *[data-name="+e+"]");0==f.length&&(f=$(".form *[name="+e+"]"));var m=f.closest(".form-group");m.hasClass("err-inline")?(m.addClass("has-error"),m.find(".err").remove(),f.after('<span class="help-inline-block help-block err">'+t+"</span>")):(m.addClass("has-error"),m.find(".err").remove(),f.after('<span class="help-block err">'+t+"</span>"))}i&&($(a).length?$(a).focus():(n.length&&n.find("[name="+e+"]").not("[type=hidden]").focus(),r.length&&r.find("[name="+e+"]").not("[type=hidden]").focus(),i=!1))})}else a=["limit","lock","author","rank","account"],_.find(a,function(e){return e===d})?$.get("/api/errorMessage",{type:d,key:p.data[1]},function(t){if(t.data)return e({title:t.data[0],content:t.data[1],hideClose:!0})}):e({title:d,content:p.data[1],hideClose:!0})}})}),define("header",["main","sfModal","isMobile","underscore"],function(e,t,n,r){$(".opts__item.user").first().on("touchend",function(e){n("any")&&$(this).find(".dropdown-avatar-menu").toggle()}),$(".dropdown-avatar-menu").first().on("touchend",function(e){n("any")&&e.stopPropagation()}),$(".3rdLogin").click(function(e){e.preventDefault(),window.open($(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),$(".menu__item--more a").first().on("click",function(e){e.preventDefault()});var o='\n        <div class="dropdown-content-recommend">\n            <% _.each(data,function(d){ %>\n                <div class="recommend-item">\n                    <a class="block" href="<%= d.url %>"><p class="item-title"><%= d.name %></p></a>\n                    <div class="item-info">\n                        <span><%= d.cityName %></span> · <span><%= d.startDate %>&nbsp<%= d.startWeek %></span> <% if(d.isSignFinished == 0){ %> · <span class="item-info-state">  报名中 </span><%}%>\n                    </div>\n                </div>\n            <% }) %>\n            <div class="item-showmore">\n                <a href="/events">查看更多活动</a>\n            </div>\n        </div>\n    ',i=function(){return $.get("/api/activity/recommend",function(e){if(0==e.status){var t=r.template(o)(e);$(".dropdown-block").append(t),$(".dropdown-content-menu").css("height")<$(".dropdown-content-recommend").css("height")&&$(".dropdown-content-menu").css("height",$(".dropdown-content-recommend").css("height")),e.data.length||$(".dropdown-content-recommend").addClass("hidden")}}),(i=function(){})()};$(".menu__item--more").hoverIntent(function(){$(this).find(".dropdown-block").removeClass("hidden"),i()},function(){$(this).find(".dropdown-block").addClass("hidden")},null,1),$(".hoverDropdown").hoverIntent(function(){$(this).find(".dropdown-avatar-menu").removeClass("hidden")},function(){$(this).find(".dropdown-avatar-menu").addClass("hidden")},null,1),$(".dropdownBtn").click(function(e){var t;$(this).parent(".hoverDropdown").hasClass("open")&&(e.preventDefault(),t=$(this).attr("href"),e.ctrlKey||e.metaKey?window.open(t):location.href=t)}),$("#shouldGoTo").on("click",function(e){var t=$(this),n=t.data("type");$("body").hasClass("news-list");switch(n){case"blog":location.href="/write";break;case"qa":$(".site-ask-btn").length>0?location.href=$(".site-ask-btn").attr("href"):location.href="/ask";break;case"news":location.href="/submit";break;case"note":location.href="/record";break;default:$("body").hasClass("user-note")?location.href="/record":location.href="/ask"}}),$(".header-search input").on("focus",function(e){e.preventDefault(),$(".sf-header").addClass("search-open")}),$(".header-search input").on("blur",function(e){e.preventDefault(),$(".sf-header").removeClass("search-open")}),function(){var e=["/lives","/news"];e.forEach(function(e){!function(e){var t="navItemHighlight"+e,n=$('.sf-header--index [href="'+e+'"]');$(".header-response").length||(localStorage.getItem(t)||n.addClass("menu__item--new-show"),n.on("click",function(){localStorage.getItem(t)||localStorage.setItem(t,1)}))}(e)})}(),$("#live__nav--newest").on("click",function(e){var t=$(this);ddosMode?t.removeClass("livemenu__item--new-show"):socket.emit("check_live",function(){t.removeClass("livemenu__item--new-show")})}),$('.sf-header--index [href="/lives"]').on("click",function(e){var t=$(this);ddosMode?t.removeClass("menu__item--new-show"):socket.emit("check_live",function(){t.removeClass("menu__item--new-show")})})}),jQuery(function(e){e(document).ready(function(){var t=[],n=[],r=0,o="",i="",a="",s=null,l=0,c=0,u=0,p=0,d=0;e(window).scroll(function(t){var n=e(this).scrollTop();o=n>r?"down":"up",r=n}),e.fn.stickUp=function(t){e(this).addClass("stuckMenu");var r=0;if(null!=t){for(var o in t.parts)t.parts.hasOwnProperty(o)&&(n[r]=t.parts[r],r++);0==r&&console.log("error:needs arguments"),i=t.itemClass,a=t.itemHover,null!=t.topMargin?"auto"==t.topMargin?p=parseInt(e(".stuckMenu").css("margin-top")):isNaN(t.topMargin)&&t.topMargin.search("px")>0?p=parseInt(t.topMargin.replace("px","")):isNaN(parseInt(t.topMargin))?(console.log("incorrect argument, ignored."),p=0):p=parseInt(t.topMargin):p=0,s=e("."+i).size()}l=parseInt(e(this).height()),c=parseInt(e(this).css("margin-bottom")),u=parseInt(e(this).next().closest("div").css("margin-top")),d=e(this).offset()?parseInt(e(this).offset().top):null},e(document).on("scroll",function(){function r(r){contentView=.4*e("#"+n[r]).height(),testView=t[r]-contentView,varscroll>testView?(e("."+i).removeClass(a),e("."+i+":eq("+r+")").addClass(a)):varscroll<50&&(e("."+i).removeClass(a),e("."+i+":eq(0)").addClass(a))}if(varscroll=parseInt(e(document).scrollTop()),null!=s)for(var h=0;h<s;h++)t[h]=e("#"+n[h]).offset().top,"down"==o&&varscroll>t[h]-50&&varscroll<t[h]+50&&(e("."+i).removeClass(a),e("."+i+":eq("+h+")").addClass(a)),"up"==o&&r(h);e("#footer").length>0&&d<=varscroll+p+10&&e("#footer").offset().top>varscroll+e(".ad-should-be-fixed").height()+66&&(e(".stuckMenu").addClass("isStuck"),e(".stuckMenu").next().closest("div").css({"margin-top":l+c+u+"px"},10),e(".stuckMenu").css("position","fixed"),e(".isStuck").css({top:"10px"},10,function(){})),varscroll+p+10<d&&(e(".stuckMenu").removeClass("isStuck"),e(".stuckMenu").next().closest("div").css({"margin-top":u+"px"},10),e(".stuckMenu").css({position:"relative",top:0}))})})}),define("jquery_stickUp",["jquery"],function(e){return function(){var t;return t||e.$.fn.stickUp}}(this)),define("main",["jquery","sfModal","mobile","isMobile","socket.io","underscore","jquery_hoverIntent","sfAjax","bootstrap","jquery_cookie","jquery_lazyload","underscore","typeHelper","jquery-mousewheel","mCustomScrollbar","formAjax","header","jquery_stickUp"],function(e,t,n,r,o){var i,a,s,l,c,u,p,d,h,f,m,g,v;r("any")&&(e("#icon4weChat").attr("src",e("#icon4weChat").data("src")),e(".sfad-sidebar").remove()),e(".js-content-restore").on("click",function(){var t,n,r,o;if(t=e(this),o=t.data("type"),r=t.data("id"),n="/api/"+o+"/"+r+"/delete/cancel",confirm("真的要恢复吗?"))return e.post(n,function(e){return location.reload()})}),e("#footer .weixin-popover-qrcode").popover({content:'<div class="weixin-qrcode"></div><p class="text-center mb0">关注微信号</p>',html:!0,placement:"top",trigger:"hover"}),e(".weixin-popover-qrcode").mouseover(function(t){e(this).popover("show")}),function(){d=function(){e(".opts__item--message").removeClass("hide"),e.get("/api/notifications",function(t){var n,r,o,i;t.status||(t.data=null!=(r=t.data)?r:[],o={data:t.data,unread:{general:_.filter(t.data.general,function(e){return 0===parseInt(e.viewed)}).length,ranked:_.filter(t.data.ranked,function(e){return 0===parseInt(e.viewed)}).length,followed:_.filter(t.data.followed,function(e){return 0===parseInt(e.viewed)}).length,comment:_.filter(t.data.comment,function(e){return 0===parseInt(e.viewed)}).length}},i=_.reduce(o.unread,function(e,t){return e+t},0),i>0&&e(".opts__item--message .message-ingore-all").removeClass("hide"),e("#messageGeneral").html(_.template(e("#messageGeneralTpl").html())(o.data)),e("#messageComment").html(_.template(e("#messageCommentTpl").html())(o.data)),e("#messageRanked").html(_.template(e("#messageRankedTpl").html())(o.data)),e("#messageFollowed").html(_.template(e("#messageFollowedTpl").html())(o.data)),e(".opts__item--message-loading").remove(),n={},e(".mCustomScrollbar-message").mCustomScrollbar({scrollInertia:0,callbacks:{onScroll:function(){var t,r,o;if(o=this.mcs.topPct,r=e(this).data("proto"),n[r]=n[r]||2,o>55&&n[r]!==-1){if(console.log(r,o,"ajax page "+n[r]),t="/api/notifications?type="+r+"&page="+n[r],window.__api===t)return;return window.__api=t,e.get(t,function(t){var o,i;if(!t.status)return o=t.data[r],o.length>0?(i=_.template(e("#item--"+r).html())(t.data),e(".tab-pane.active .mCSB_container").append(i),n[r]++):n[r]=-1})}}}}))})},e(".opts__item--message .message-ingore-all").on("click",function(){var t;t=e(this),e.post("/api/notifications/all/view",function(n){return d(),e(".notice-dot").addClass("hide"),t.addClass("hide")})}),e(".opts__item--message").on("click",".message__btn--follow",function(){var t,n;return t=e(this),n=t.data("id"),t.addClass("disabled"),e.post("/api/user/"+n+"/follow",function(e){return d(),t.removeClass("disabled")})}),e(".opts__item--message").on("click",".message__btn--unfollow",function(){var t,n;return t=e(this),n=t.data("id"),t.addClass("disabled"),e.post("/api/user/"+n+"/follow/cancel",function(e){return d(),t.removeClass("disabled")})}),e(".dropdown-toggle-message").on("click",function(t){var n;return t.preventDefault(),n=e(".opts__item--message"),"undefined"!=typeof v&&v.emit("read"),i.titleRender.clear("message"),i.titleRender.clear("event"),"none"!==n.css("display")?n.addClass("hide"):(d(),e.get("/api/notifications/viewed",function(t){var n;if(n=null,!t.status)return _.each(t.data,function(t,r){if(t)return n?(n=e(".notice-dot-"+r),n.removeClass("hide"),n.removeClass("notice-dot--special")):(n=e(".notice-dot-"+r),n.addClass("notice-dot--special"),n.closest("a[role='tab']").trigger("click"))})}))}),e(".opts__item--message a[role='tab']").on("click",function(t){var n;if(e(".opts__item--message .active").not(".btn").removeClass("active"),e(this).addClass("active"),e(this).find(".notice-dot.hide").length>0&&0===e(this).find(".notice-dot--special").length);else if(e(this).find(".notice-dot").addClass("hide"),n=e(this).attr("href"),"#messageRanked"===n&&e.post("/api/notifications/viewed?type=ranked"),"#messageComment"===n&&e.post("/api/notifications/viewed?type=comment"),"#messageGeneral"===n&&e.post("/api/notifications/viewed?type=general"),"#messageInbox"===n&&e.post("/api/notifications/viewed?type=inbox"),"#messageFollowed"===n)return e.post("/api/notifications/viewed?type=followed")}),e("body").on("click",function(t){"none"!==e(".opts__item--message").css("display")&&0===e(t.target).parents(".message").length&&e(".opts__item--message").addClass("hide")})}(),function(){var t=function(){e(".opts__item--letter").removeClass("hide"),e.get("/api/messages",function(t){if(!t.status){e("#messageInbox").html(_.template(e("#messageInboxTpl").html())({inboxes:t.data})),e(".opts__item--letter-loading").remove();var n=_.filter(t.data,function(e){return 0===parseInt(e.viewed)}).length;n>0&&e(".opts__item--letter .message-ingore-all").removeClass("hide")}})};e("#messageInbox").on("click","li",function(){var t,n;if(t=e(this),n=t.data("click"),Boolean(n))return location.href=n}),e(".opts__item--letter .message-ingore-all").on("click",function(){var n;n=e(this),
e.post("/api/messages/all/view",function(e){t(),n.addClass("hide")})}),e(".dropdown-toggle-letter").on("click",function(n){n.preventDefault();var r=e(".opts__item--letter");"none"!==r.css("display")?r.addClass("hide"):t()}),e("body").on("click",function(t){"none"!==e(".opts__item--letter").css("display")&&0===e(t.target).parents(".letter").length&&e(".opts__item--letter").addClass("hide")}),e("#settings-btn").click(function(){e(".opts__item--letter").toggleClass("hide")})}(),"/tags"===e(".nav__item--more>a").attr("href")||(e("body").on("click",function(t){if("none"!==e(".tag-mgr__box").css("display")&&0===e(t.target).closest(".nav__item--more").length&&0===e(t.target).closest(".tag-mgr__box").length)return e(".nav__item--more").trigger("click")}),e(".tag-mgr__query").on("keyup",function(t){var n,r,o,i;return n=e(this),i=n.data("tags"),r=e(this).val(),o=function(t){var n,o,a;if(a='<li><a href="<%= url %>"><%= name %></a></li>',n=_.filter(i,function(e){return e.name.search(t)!==-1}),o=_.reduce(n,function(e,t){return e+_.template(a)(t)},""),e(".tag-mgr__list").html(o),e(".tag-mgr__list li").length>0&&r.length>0)return e(".tag-mgr__list li:first-child").addClass("active")},m.inputT&&clearTimeout(m.inputT),m.inputT=setTimeout(function(){return o(r)},100)}),e(".tag-mgr__list").on("mouseover",function(){if(e(".tag-mgr__list li").length>1)return e(".tag-mgr__list li.active").removeClass("active")}),m={inputT:0,t:0},e(".nav__item--more").on("click",function(){var t,n,r;return n=e(this),t=e(".tag-mgr__box"),r=Number(n.data("open")),r?t.addClass("hide"):(t.removeClass("hide"),e(".tag-mgr__query").focus()),e(this).data("open",Number(!r))})),e(".js__action--complain").on("click",function(){return t({title:"我要申诉",content:_.template(e("#js__action--complain-tpl").html()),doneFn:function(){return e(".complain__form").submit()}})}),e(".js__view--selector").on("click",function(){var t;return t=e(this).data("action"),e.cookie("view",t),location.reload()}),e.cookie("view")&&e(".js__view--selector").removeClass("hidden-sm").removeClass("hidden-md").removeClass("hidden-lg"),s=function(){var e,t,n;n="test",t=window.sessionStorage;try{return t.setItem(n,"1"),t.removeItem(n),!0}catch(t){return e=t,!1}},g=function(t){var n;s()&&(t>500||(localStorage&&(n=localStorage.getItem("show-app-promotion-bar"),n=n||!0,n!==!0?e(".app-promotion-bar").hide():e(".app-promotion-bar").show()),e("body").on("click",".close",function(){e(".app-promotion-bar").hide(),localStorage.setItem("show-app-promotion-bar",!1)}),e("body").on("click",".icon",function(){e(".app-promotion-bar").hide(),localStorage.setItem("show-app-promotion-bar",!1)})))},a=function(e){var t,n;switch(n="",t=new Date(e),t.getDay()){case 0:n="周日";break;case 1:n="周一";break;case 2:n="周二";break;case 3:n="周三";break;case 4:n="周四";break;case 5:n="周五";break;case 6:n="周六"}return n},l=function(){t({title:"登录",doneText:"登录",hideClose:!0,hideDone:!0,hideFooter:!0,content:e("#loginModal").text(),show:function(){return e("input[name=username]").focus(),window.ga&&ga("send","event","login modal","show","login modal"),e("[name=mail]").first().focus(),e("#loginShowMore").click(function(t){t.preventDefault(),e(this).hide(),e(this).siblings().removeClass("hidden")}),e(".sfmodal .widget-login a").click(function(t){t.preventDefault(),window.open(e(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),e("#loginReloadCaptcha").click(function(){e(this).find("img").attr("src","/user/captcha?w=145&h=34")})}}),e(".register-mail").typeHelperOld({emailMode:!0,onlyResult:!1})},c=function(){t({title:"注册",doneText:"登录",hideClose:!0,hideDone:!0,hideFooter:!0,content:e("#registerModal").text(),show:function(){return setTimeout(function(){e("input[name=name]").focus()},0),window.ga&&ga("send","event","login modal","show","login modal"),e("[name=mail]").first().focus(),e("#loginShowMore").click(function(t){t.preventDefault(),e(this).hide(),e(this).siblings().removeClass("hidden")}),e(".sfmodal .widget-login a").click(function(t){t.preventDefault(),window.open(e(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),e("#login-name").on("input",function(t){var n=/^[0-9]{11}$/;n.test(t.target.value.trim())&&e(".phone-register-only").removeClass("hidden"),e(this).closest("form").attr("action","/api/user/phone/register"),e("[name=register_type]").val("phone"),e("#login-name").attr("name","phone")}),e("#loginReloadCaptcha").click(function(){e(this).find("img").attr("src","/user/captcha?w=145&h=34")})}}),e(".register-mail").typeHelperOld({emailMode:!0,onlyResult:!1})},u=function(){t({modalSize:"modal-md",title:"绑定手机号",doneText:"绑定手机号",hideClose:!0,hideDone:!0,hideFooter:!0,content:e("#bindPhoneModal").text(),doneFn:function(){var t=e(".form__bindphone-apply").serializeArray(),n={};t.map(function(e){n[e.name]=e.value}),e.post("/api/user/phone/bind/check",n,function(t){if(t.status){var n=t.data[1];n.phone&&e("phone").parents(".form-group").addClass("has-error").find(".help-block").html(n.phone)}else alert("绑定成功"),location.reload()})}})},p=function(){t({modalSize:"modal-md",title:"手机验证码登陆",doneText:"绑定",content:e("#phoneLoginModal").text(),doneFn:function(){var t=e(".form__bindphone-apply").serializeArray(),n={};t.map(function(e){n[e.name]=e.value}),e.post("/api/user/phone/bind/check",n,function(e){e.status||(alert("绑定成功"),location.reload())})}})},f=function(){this.title=e("title"),this.titleText=this.title.html(),this.map={}},f.prototype._render=function(){count=0;for(k in this.map)count+=parseInt(this.map[k]);this.title.html((count>0?"("+(count>=100?"...":count)+") ":"")+this.titleText)},f.prototype.set=function(e,t){this.map[e]=t,this._render()},f.prototype.clear=function(e){delete this.map[e],this._render()},e(".addWeek").each(function(t,n){e(this).append(" "+a(e(this).html()))}),e('[data-toggle="tooltip"]').tooltip({container:"body"}),e("img.lazy").lazyload({effect:"fadeIn"}),window.oauthLogin=function(e){location.hostname.indexOf("segmentfault")!==-1?location.reload():location.href="/"},window.oauthRegister=function(e){location.href="/user/bind"},i={_:window.SF.token,staticUrl:window.SF.staticUrl,userId:e("#SFUserId").attr("value"),userRank:e("#SFUserRank").attr("value"),login:n.login||l,register:c,bindphone:u,phonelogin:p,titleRender:new f},e(document).ajaxError(function(t,n,r){413===n.status?(e("#uploading")&&e("#uploading").text(""),alert("文件大小或尺寸超出限制，请修改后重新上传！")):console.log("Ajax "+n.status+": ",r.url)}),e(document).ajaxSend(function(e,t,n){n.url.indexOf("?")===-1?n.url=n.url+"?_="+i._:n.url=n.url+"&_="+i._}),e("body").delegate("form","submit",function(t){var n;n=e(this),n.attr("method")&&n.attr("action")&&(t.preventDefault(),n.find("button[type=submit]").attr("disabled","disabled"),e.ajax({url:n.attr("action"),type:n.attr("method"),data:n.serialize(),success:function(e){n.find("button[type=submit]").removeAttr("disabled"),0===e.status&&("/api/user?do=login"===n.attr("action")&&"/user/login"!==location.pathname?window.location.reload():/^\//.test(e.data)?window.location=e.data:window.location.reload())}}))}),e("body").delegate("form input, form textarea, .form input, .form textarea","keydown",function(t){e(this).removeClass("error"),e(this).parents(".form-group").removeClass("has-error"),e(this).next(".help-block.err").remove(),e(this).next(".error--msg").remove(),e(this).parents(".form-group").find(".help-block.err").remove()}),e("#backtop").click(function(){return e("body,html").animate({scrollTop:0}),!1}),e(document).scroll(function(){e(this).scrollTop()>720?e("#backtop").removeClass("hidden"):e("#backtop").addClass("hidden")}),e(".topframe").length&&e(".topframe .close").click(function(t){e(this).parent().remove(),0!==e(".topframe").length&&e(".topframe .content").text()||e("body").removeClass("have-notify")}),window.SFHacker={setOldVersion:function(){e.cookie("v","old"),window.location.reload()},unSetOldVersion:function(){e.removeCookie("v",{path:"/"}),window.location.reload()},makePureTextarea:function(){e.cookie("typemode","native"),window.location.reload()},unMakePureTextarea:function(){e.removeCookie("typemode",{path:"/"}),window.location.reload()}},e("body").on("click",".SFLogin",function(e){e.preventDefault(),i.register()}),e("body").on("click",".SFRegister",function(e){e.preventDefault(),i.login()}),e("body").on("click",".phoneLogin",function(e){e.preventDefault(),i.phonelogin()}),e(".notlogin").on("click",function(t){t.preventDefault();var n=e(this);i.login(function(){n.removeClass("notlogin")})}),e(".captchaInput img").on("click",function(){var t=Date.parse(new Date);e(this).attr("src","/user/captcha?w=240&h=50&t="+t)});var y=function(e){var t=e.closest("form"),n=t.find(".captchaInput .captcha"),r=n.data("src");n.attr("src",r),t.find(".captchaInput").removeClass("hidden")};e("body").on("focus",'input[name="phone"]',function(){var t=e(this);t.closest("form").find(".captchaInput .captcha").attr("src")||y(t)}),function(){window.isBindPage||e("body").on("click",".login-modal .login-wrap .js-user-login__phone-vaild-btn",function(){var t=e(this),n=60,r=void 0,o=function(){n>1?(n--,t.text(n+"s")):(clearInterval(r),t.text("获取验证码"),t.prop("disabled",!1))},i={},a=e(this).closest("form").find("input:not(.hide,hidden)");a.each(function(){var t=e(this),n=t.attr("name"),r=t.val();i[n]=r}),e.post("/api/user/phone/register/send",i,function(e){e.status||(t.prop("disabled",!0),r=setInterval(o,1e3))})})}(),e("body").on("click",".bindphone-model .user-bind__phone-vaild-btn",function(){var t=e(this),n=60,r=void 0,o=function(){n>1?(n--,t.text(n+"s")):(clearInterval(r),t.text("获取验证码"),t.prop("disabled",!1))};e.post("/api/user/phone/bind",{phone:e(".bindphone--phone").val()},function(e){e.status||(t.prop("disabled",!0),r=setInterval(o,1e3))})}),e("body").on("click",".phonelogin-modal .user-bind__phone-vaild-btn",function(){var t=e(this),n=60,r=void 0,o=function(){n>1?(n--,t.text(n+"s")):(clearInterval(r),t.text("获取验证码"),t.prop("disabled",!1))};e.post("/api/user/phone/phoneloginsend",{phone:e(".phonelogin--phone").val()},function(e){e.status||(t.prop("disabled",!0),r=setInterval(o,1e3))})}),h=function(t,n,r,o){var i;i=t,i.on("shown.bs.modal",function(){return e.post("/api/user/active/alert",function(e){})}),i.length>0&&e(".write-btns a").each(function(t,n){e(this).click(function(e){return i.modal("show"),!1})}),i.find(".activate-form").on("submit",function(t){var n;return t.preventDefault(),n=e(this),e.post(r,{mail:n.find(".mail").val()},function(t){0===t.status&&(n.parent().find(".session-mail").text(n.find(".mail").val()),e(".activate-showmail").show(),e(".activate-form").hide(),location.reload())}),!1}),i.find(".activate-resend",i).click(function(t){var r,i,a,s;i=e(this),r=i.siblings("span").find("span"),a=void 0,s=void 0,a=120,a--,e.post(n,function(t){var n;0===t.status?(e(".company-activete-tips").length&&e(".company-activete-tips").html(null!=(n='<div class="alert alert-success">'+t.message)?n:t.data[1]+"</div>"),o&&o(),s=setInterval(function(){return 0===a?(clearInterval(s),i.show(),i.siblings("span").hide()):(i.hide(),i.siblings("span").show(),r.text(a--))},1e3)):(e(".company-activete-tips").length&&(t.message?e(".company-activete-tips").html('<div class="alert alert-danger">'+t.message+"</div>"):e(".company-activete-tips").html('<div class="alert alert-danger">'+t.data[1]+"</div>")),setTimeout(function(){return e(".company-activete-tips").length&&e(".company-activete-tips").html('<div class="alert alert-success">激活邮件已发送 （<span>120</span>）</div>'),i.show()},9e5))})})},h(e("#activate"),"/api/user/reactivate","/api/user/activate/mail"),h(e("#companyActivate"),"/api/company/reactivate","/api/settings/mail/edit"),e(".side-ask [class*=btn-sn-]").click(function(t){t.preventDefault(),window.open(e(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),function(){e("body").on("click",".activate__step--init input[name=activate_type]",function(){var t=e(this),n=t.val();e('.activate__step--init .form-group[data-type="'+n+'"]').removeClass("hide"),"phone"===n?e(".activate__step--init .form-group[data-type=mail]").addClass("hide"):"mail"===n&&e(".activate__step--init .form-group[data-type=phone]").addClass("hide")}),e("body").on("click",".activate__step--init .activate__step-code-btn",function(){var t=void 0,n=e(this),r=(e(".activate__step-code-value"),e(".activate__step-phone-value")),o=60,i=function(){o<1?(n.text("获取验证码"),n.prop("disabled",!1),clearInterval(t)):n.text(--o+"s")};n.prop("disabled",!0),e.post("/api/user/phone/activate/send",{phone:r.val()},function(e){e.status?n.prop("disabled",!1):t=setInterval(i,1e3)})}),e("body").on("click",".activate-change",function(t){e(".activate-showmail").hide(),e(".activate-form").show()}),e("#activate").on("show.bs.modal",function(){var t=e(".activate__step--init>form").serializeArray(),n={};t.map(function(e){n[e.name]=e.value}),n.mail&&n.mail.length>0&&(e(".activate__step--init input[value=mail]").trigger("click"),setTimeout(function(){},50),e(".activate__step--init .btn-primary").trigger("click"))}),e("body").on("click",".activate__step--init .btn-primary",function(){var t=e(this),n=e(".activate__step--init>form").serializeArray(),r={};if(n.map(function(e){r[e.name]=e.value}),r.hasOwnProperty("activate_type"))if("mail"===r.activate_type){r={mail:r.mail};var o=function(t,n){e(".activate__step--mail .session-mail").text(t);var r="",o={"mail.google.com":["gmail.com"],"mail.qq.com":["qq.com","vip.qq.com","foxmail.com"],"mail.163.com":["163.com"],"mail.126.com":["126.com"],"mail.sina.com":["sina.com","vip.sina.com","sina.cn"],"mail.sohu.com":["sohu.com"],"mail.139.com":["139.com"],"mail.wo.com.cn":["wo.com.cn"],"mail.189.cn":["189.cn"],"mail.21cn.com":["21.cn"],"mail.aliyun.com":["aliyun.com"],"mail.yahoo.com":["yahoo.com"]};for(var i in o){var a=o[i],s=a.find(function(e){return e===t.split("@")[1]});s&&(r=i)}r.length>0?e(".activate__step--mail .activate_step-mail-goto").attr("href","http://"+r):e(".activate__step--mail .activate_step-mail-goto").hide();var l="mailto:pr@segmentfault.com?subject=邮箱 "+t+" 无法激活&body=请描述具体内容";e(".activate__step-contact").attr("href",l);var c=e(".activate__step-reactivate-btn");n||c.addClass("disabled");var u=void 0,p=120,d=function(){p>0?c.text("激活邮件已发送（"+p--+"s）"):(c.text("重新发送激活邮件"),clearInterval(u),c.removeClass("disabled"))};return n||(u=setInterval(d,1e3)),{destory:function(){c.text("重新发送激活邮件"),clearInterval(u),c.removeClass("disabled")}}},i=t.closest(".activate__step");i.next(".activate__step").removeClass("hide"),i.remove();var a=o(r.mail,!0);0!=e('input[name="mail"]').data("mail").length&&e.post("/api/user/activate/mail",r,function(e){e.status&&a.destory()}),e(".activate__step-reactivate-btn").on("click",function(){a=o(r.mail),e.post("/api/user/activate/mail",r,function(e){e.status&&a.destory()})}),e(".activate-form").on("click",".btn-primary",function(){var t=e(".activate-form .change-mail").val();t.length>0&&(a.destory(),a=o(t),e.post("/api/user/activate/mail",{mail:t},function(t){t.status?a.destory():(e(".activate-showmail").show(),e(".activate-form").hide())}))})}else delete r.mail,delete r.activate_type,e.post("/api/user/activate/phone",r,function(e){e.status||location.reload()})})}();var b=window.location.href,w=/openInApp=1/.test(b);!function(){if(i.userId&&/micromessenger/.test(navigator.userAgent.toLowerCase()));else if(r("any")&&!w){var t='<div class="app-promotion-bar">\n                            <a href="javascript:;"><i class="fa fa-close close"></i></a>\n                            <div class="icon"></div>\n                            <h5 class="title h5">SegmentFault</h5>\n                            <p class="describe">一起探索更多未知</p>\n                            <a class="download-btn btn btn-sm btn-primary" href="/app#qrcode">下载 App</a>\n                        </div>';e("body").append(t)}}(),g(document.body.clientWidth);try{localStorage.getItem("alert-tos")||e(".alert--tos").removeClass("hide")}catch(e){}if(e(".read-tos").on("click",function(){try{localStorage.setItem("alert-tos",1)}catch(e){}e(this).hasClass("close")||(location.href=e(this).data("url"))}),i.userId)if(ddosMode){var x="/api/user/stat";e.get(x,function(t){var n=t.data,r=n.events,o=n.messages,a=(n.newestLive,localStorage.getItem("lastLive"),o),s=r;a>0?(i.titleRender.set("message",a),a>99&&(a="..."),e("#letterCount").siblings(".has-unread__count").remove(),e("#letterCount").after('<span class="has-unread__count">'+a+"</span>"),e("#letterCount-response").find(".redpoint-response").remove(),e("#letterCount-response").append('<span class="redpoint-response">'+a+"</span>")):(i.titleRender.clear("message"),e(".letter .has-unread__count").remove(),e(".letter-response .redpoint-response").remove()),s>0?(i.titleRender.set("event",s),s>99&&(s="..."),e("#messageCount").siblings(".has-unread__count").remove(),e("#messageCount").after('<span class="has-unread__count">'+s+"</span>"),e("#messageCount-response").find(".redpoint-response").remove(),e("#messageCount-response").append('<span class="redpoint-response">'+s+"</span>")):(i.titleRender.clear("event"),e(".message .has-unread__count").remove(),e(".message-response .redpoint-response").remove()),s>0||a>0?e(".user-avatar").after('<div class="has-unread__count has-unread__count-avatar"><span class="redpoint"></span></div>'):e(".user .has-unread__count").remove()})}else{var D=function(t){S=!0;var n=o("segmentfault.com:"+t,{autoConnect:!1,reconnection:!0,reconnectionDelayMax:5e3,reconnectionAttempts:3});return n.emit("login",e.cookie("PHPSESSID")),n.on("event",function(t){var n=t.message,r=t.event;n>0?(i.titleRender.set("message",n),n>99&&(n="..."),e("#letterCount").siblings(".has-unread__count").remove(),e("#letterCount").after('<span class="has-unread__count">'+n+"</span>"),e("#letterCount-response").find(".redpoint-response").remove(),e("#letterCount-response").append('<span class="redpoint-response">'+n+"</span>")):(i.titleRender.clear("message"),e(".letter .has-unread__count").remove(),e(".letter-response .redpoint-response").remove()),r>0?(i.titleRender.set("event",r),r>99&&(r="..."),e("#messageCount").siblings(".has-unread__count").remove(),e("#messageCount").after('<span class="has-unread__count">'+r+"</span>"),e("#messageCount-response").find(".redpoint-response").remove(),e("#messageCount-response").append('<span class="redpoint-response">'+r+"</span>")):(i.titleRender.clear("event"),e(".message .has-unread__count").remove(),e(".message-response .redpoint-response").remove()),r>0||n>0?e(".user-avatar").after('<div class="has-unread__count has-unread__count-avatar"><span class="redpoint"></span></div>'):e(".user .has-unread__count").remove()}),n.open(),n},C=9443,S=!1,E=null;if(window.socket=D(C),"undefined"!=typeof document.hasFocus){var T=document.hasFocus();setInterval(function(){var e=document.hasFocus();if(T!=e)if(T=e,e)E&&(clearTimeout(E),E=null),!S&&window.socket&&(S=!0,window.socket.connect());else{if(E)return;E=setTimeout(function(){S&&(S=!1,window.socket.close())},3e4)}},3e3)}}return e(".topframe").text().indexOf(!0)&&e(".send-mail").click(),e("#loginBanner").on("click",".fa-times-circle",function(t){t.preventDefault(),e("#loginBanner").hide()}),e("#loginBanner").on("click",".login_now",function(e){e.preventDefault(),i.login()}),e(".bindphone").on("click",function(e){e.preventDefault(),i.bindphone()}),jQuery(function(e){e(document).ready(function(){setTimeout(function(){e(".ad-should-be-fixed").stickUp()},2e3)})}),function(){e("#notices").length&&e.get("/api/notice/newest",function(e){0!==e.data.length&&(document.querySelector("#notices").classList.remove("hidden"),document.querySelector("#notices .report").setAttribute("href",e.data[0].url),document.querySelector("#notices .report").innerHTML=e.data[0].title)})}(),function(){var n=e("#isRemoteLogin").length>0;if(n){var r=e("#isRemoteLogin").data("phone").toString()||"",o=e("#isRemoteLogin").data("mail").toString()||"",i=r.slice(0,3)+"****"+r.slice(-4),a=o.slice(0,2)+"****"+o.slice(o.indexOf("@"),o.length);t({modalSize:"modal-md",title:"异地登录验证",backdrop:"static",content:'\n                    <div id="remoteLoginActivate">\n                        <div class="activate--init">\n                            <form class="form-horizontal">\n                                <div class="form-group">\n                                    <label class="col-sm-3 required control-label">验证方式</label>\n                                    <div class="col-sm-6">\n                                        <label class="radio-inline">\n                                            <input type="radio" name="activate_type" value="phone" checked> 用手机验证\n                                        </label>\n                                        <label class="radio-inline">\n                                            <input type="radio" name="activate_type" value="mail"> 用 Email 验证\n                                        </label>\n                                    </div>\n                                </div>\n\n                                <div class="form-group" data-type="phone">\n                                    <label class="col-sm-3 required control-label">手机号码</label>\n                                    <div class="col-sm-6">\n                                        <input class="form-control activate__step-phone-value" type="phone" name="phone"\n                                                placeholder="仅支持大陆手机号" value="'+i+'" disabled/>\n                                    </div>\n                                </div>\n\n                                <div class="form-group captch-block hidden" data-type="phone">\n                                    <label class="col-sm-3 required control-label">图形验证码</label>\n                                    <div class="col-sm-6">\n                                        <input type="text" class="form-control" name="cap" placeholder="请输入下方的验证码">\n                                        <div class="mt10 ">\n                                            <a id="loginReloadCaptcha" href="javascript:void(0)">\n                                            <img data-src="/user/captcha?w=240&h=50" class="captcha" width="240" height="50"/></a>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class="form-group" data-type="phone">\n                                    <label class="col-sm-3 required control-label">验证码</label>\n                                    <div class="col-sm-6">\n                                        <div class="input-group">\n                                            <input name="code" type="text" class="form-control activate__step-code-value"\n                                                    placeholder="短信验证码">\n                                            <span class="input-group-btn">\n                                                <button style="width:96px;" class="btn btn-default get-code-btn"\n                                                    type="button">获取验证码</button>\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class="form-group hidden" data-type="mail">\n                                    <label class="col-sm-3 required control-label">Email</label>\n                                    <div class="col-sm-6">\n                                        <input class="form-control" type="email" name="mail" placeholder="hello@segmentfault.com" value="'+a+'" disabled/>\n                                    </div>\n                                </div>\n\n                                <div class="form-action">\n                                    <div class="col-sm-offset-8">\n                                        <button type="button" class="btn btn-primary submit negativeml15">提交</button>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n\n                        <div class="activate--mail hidden">\n                            <div class="mt20 mb10">\n                                <span class="text-muted activate-label pull-left">你的 Email：</span>\n                                <span class="activate-showmail">\n                                    <strong class="h4 session-mail">'+a+'</strong>\n                                    </span>\n                                <form method="post" class="activate-form inline-block" style="display:none;width:400px;">\n                                    <div class="form-group col-sm-7 mb0">\n                                        <input type="text" class="form-control change-mail" name="mail"\n                                                placeholder="hello@segmentfault.com">\n                                    </div>\n                                    <div class="form-group col-sm-5 mb0">\n                                        <button class="btn btn-primary mr10" type="button">保存</button>\n                                    </div>\n                                </form>\n                            </div>\n                            <p class="text-muted">\n                                验证邮件已发送，请注意查收（注意检查回收站、垃圾箱中是否有激活邮件）\n                                <br>如果仍未收到，请尝试 <a class="activate__step-reactivate-btn btn btn-link p0" href="javascript:void(0);">重新发送激活邮件</a>\n                                ，如有困难请 <a class="activate__step-contact" href="">联系我们</a>\n                            </p>\n\n                            <div class="text-right mt20">\n                                <a class="btn btn-default activate_step-mail-goto" target="_blank" href="">前往邮箱查收</a>\n                            </div>\n                    \n                        </div>\n\n                    </div>\n                ',hideClose:!0,hideDone:!0,show:function(){var t=function(){var n=e("#remoteLoginActivate .captcha");return n.attr("src",n.data("src")),(t=function(){return null})()};e("body").on("click","#remoteLoginActivate input[name=activate_type]",function(){var n=e(this),r=n.val();e('#remoteLoginActivate .form-group[data-type="'+r+'"]').removeClass("hidden"),"phone"===r?(e("#remoteLoginActivate .form-group[data-type=mail]").addClass("hidden"),t()):"mail"===r&&e("#remoteLoginActivate .form-group[data-type=phone]").addClass("hidden")}),r||(e('input[value="mail"]').trigger("click"),e('input[name="activate_type"]').prop("disabled","disabled")),o||e('input[name="activate_type"]').prop("disabled","disabled"),e("body").on("click","#remoteLoginActivate .get-code-btn",function(t){if(e("#remoteLoginActivate .captch-block").hasClass("hidden")){e("#remoteLoginActivate .captch-block").removeClass("hidden");var n=e("#remoteLoginActivate .captcha");n.attr("src",n.data("src"))}else{var o=void 0,i=e(this),a=(e(".activate__step-phone-value"),60),s=function(){a<1?(i.text("获取验证码"),i.prop("disabled",!1),clearInterval(o)):i.text(--a+"s")};i.prop("disabled",!0);var l="/api/user/phone/remote-login/send",c=e('#remoteLoginActivate input[name="cap"]').val();e.post(l,{phone:r,cap:c},function(e){0==e.status?o=setInterval(s,1e3):i.prop("disabled",!1)})}}),e("body").on("click","#remoteLoginActivate .captcha",function(t){var n=e(t.target);n.attr("src",n.data("src"))}),e("body").on("click","#remoteLoginActivate .submit",function(t){var n=e("#remoteLoginActivate .form-group[data-type=mail]").hasClass("hidden")?"phone":"mail";if("phone"==n){var i="/api/user/phone/remote-login/active",a=e('#remoteLoginActivate  input[name="code"]').val();e.post(i,{phone:r,code:a},function(e){0==e.status&&location.reload()})}else{var s="/api/user/mail/remote-login/send";e.post(s,{mail:o},function(t){if(0==t.status){e(".activate--mail").removeClass("hidden"),e(".activate--init").addClass("hidden");var n=function(t,n){var r="",o={"mail.google.com":["gmail.com"],"mail.qq.com":["qq.com","vip.qq.com","foxmail.com"],"mail.163.com":["163.com"],"mail.126.com":["126.com"],"mail.sina.com":["sina.com","vip.sina.com","sina.cn"],"mail.sohu.com":["sohu.com"],"mail.139.com":["139.com"],"mail.wo.com.cn":["wo.com.cn"],"mail.189.cn":["189.cn"],"mail.21cn.com":["21.cn"],"mail.aliyun.com":["aliyun.com"],"mail.yahoo.com":["yahoo.com"]};for(var i in o){var a=o[i],s=a.find(function(e){return e===t.split("@")[1]});s&&(r=i)}r.length>0?e("#remoteLoginActivate .activate_step-mail-goto").attr("href","http://"+r):e("#remoteLoginActivate .activate_step-mail-goto").hide();var l="mailto:pr@segmentfault.com?subject=邮箱 "+t+" 无法进行异地登录验证&body=请描述具体内容";e(".activate__step-contact").attr("href",l);var c=e(".activate__step-reactivate-btn");n||c.addClass("disabled");var u=void 0,p=120,d=function(){p>0?c.text("激活邮件已发送（"+p--+"s）"):(c.text("重新发送激活邮件"),clearInterval(u),c.removeClass("disabled"))};return n||(u=setInterval(d,1e3)),{destory:function(){c.text("重新发送激活邮件"),clearInterval(u),c.removeClass("disabled")}}},r=n(o,!0);e(".activate__step-reactivate-btn").on("click",function(){r=n(o),e.post("/api/user/mail/remote-login/send",{mail:o},function(t){if(t.status){r.destory();var n=t.data[1],o="";e.each(n,function(e,t){o=t,o&&alert(o)})}})})}})}})}})}}(),i}),define("math",["jquery","main"],function(e,t){"use strict";return function(n){var r,o;r=n||e(".fmt"),"undefined"!=typeof MathJax?r.each(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,this])}):(o=t.staticUrl+"/3rd/MathJax/MathJax.js",e.getScript(o,function(){MathJax.Hub.Config({extensions:["tex2jax.js"],jax:["input/TeX","output/HTML-CSS"],tex2jax:{inlineMath:[["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,ignoreClass:"side"},skipStartupTypeset:!0,showProcessingMessages:!1}),r.each(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,this])})}))}}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("Clipboard",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Clipboard=e()}}(function(){var e;return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return o(n?n:e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){var r=e("matches-selector");t.exports=function(e,t,n){for(var o=n?e:e.parentNode;o&&o!==document;){if(r(o,t))return o;o=o.parentNode}}},{"matches-selector":5}],2:[function(e,t,n){function r(e,t,n,r,i){var a=o.apply(this,arguments);return e.addEventListener(n,a,i),{destroy:function(){e.removeEventListener(n,a,i)}}}function o(e,t,n,r){return function(n){n.delegateTarget=i(n.target,t,!0),n.delegateTarget&&r.call(e,n)}}var i=e("closest");t.exports=r},{closest:1}],3:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},{}],4:[function(e,t,n){function r(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return o(e,t,n);
if(s.nodeList(e))return i(e,t,n);if(s.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function i(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return l(document.body,e,t,n)}var s=e("./is"),l=e("delegate");t.exports=r},{"./is":3,delegate:2}],5:[function(e,t,n){function r(e,t){if(i)return i.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0;r<n.length;++r)if(n[r]==e)return!0;return!1}var o=Element.prototype,i=o.matchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector;t.exports=r},{}],6:[function(e,t,n){function r(e){var t;if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),r=document.createRange();r.selectNodeContents(e),n.removeAllRanges(),n.addRange(r),t=n.toString()}return t}t.exports=r},{}],7:[function(e,t,n){function r(){}r.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){o.off(e,r),t.apply(n,arguments)}var o=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;for(r;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,a=r.length;i<a;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},t.exports=r},{}],8:[function(t,n,r){!function(o,i){if("function"==typeof e&&e.amd)e(["module","select"],i);else if("undefined"!=typeof r)i(n,t("select"));else{var a={exports:{}};i(a,o.select),o.clipboardAction=a.exports}}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(t),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t){r(this,e),this.resolveOptions(t),this.initSelection()}return e.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""},e.prototype.initSelection=function(){this.text?this.selectFake():this.target&&this.selectTarget()},e.prototype.selectFake=function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,o.default)(this.fakeElem),this.copyText()},e.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},e.prototype.selectTarget=function(){this.selectedText=(0,o.default)(this.target),this.copyText()},e.prototype.copyText=function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)},e.prototype.handleResult=function(e){e?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},e.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},e.prototype.destroy=function(){this.removeFake()},a(e,[{key:"action",set:function(){var e=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==("undefined"==typeof e?"undefined":i(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=s})},{select:6}],9:[function(t,n,r){!function(o,i){if("function"==typeof e&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],i);else if("undefined"!=typeof r)i(n,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var a={exports:{}};i(a,o.clipboardAction,o.tinyEmitter,o.goodListener),o.clipboard=a.exports}}(this,function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var c=o(t),u=o(n),p=o(r),d=function(e){function t(n,r){i(this,t);var o=a(this,e.call(this));return o.resolveOptions(r),o.listenClick(n),o}return s(t,e),t.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText},t.prototype.listenClick=function(e){var t=this;this.listener=(0,p.default)(e,"click",function(e){return t.onClick(e)})},t.prototype.onClick=function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c.default({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})},t.prototype.defaultAction=function(e){return l("action",e)},t.prototype.defaultTarget=function(e){var t=l("target",e);if(t)return document.querySelector(t)},t.prototype.defaultText=function(e){return l("text",e)},t.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},t}(u.default);e.exports=d})},{"./clipboard-action":8,"good-listener":4,"tiny-emitter":7}]},{},[9])(9)}),define("emojiList",[],function(){return["+1","-1","100","1234","8ball","a","ab","abc","abcd","accept","aerial_tramway","airplane","alarm_clock","alien","ambulance","anchor","angel","anger","angry","anguished","ant","apple","aquarius","aries","arrow_backward","arrow_double_down","arrow_double_up","arrow_down","arrow_down_small","arrow_forward","arrow_heading_down","arrow_heading_up","arrow_left","arrow_lower_left","arrow_lower_right","arrow_right","arrow_right_hook","arrow_up","arrow_up_down","arrow_up_small","arrow_upper_left","arrow_upper_right","arrows_clockwise","arrows_counterclockwise","art","articulated_lorry","astonished","atm","b","baby","baby_bottle","baby_chick","baby_symbol","back","baggage_claim","balloon","ballot_box_with_check","bamboo","banana","bangbang","bank","bar_chart","barber","baseball","basketball","bath","bathtub","battery","bear","bee","beer","beers","beetle","beginner","bell","bento","bicyclist","bike","bikini","bird","birthday","black_circle","black_joker","black_medium_small_square","black_medium_square","black_nib","black_small_square","black_square","black_square_button","blossom","blowfish","blue_book","blue_car","blue_heart","blush","boar","boat","bomb","book","bookmark","bookmark_tabs","books","boom","boot","bouquet","bow","bowling","bowtie","boy","bread","bride_with_veil","bridge_at_night","briefcase","broken_heart","bug","bulb","bullettrain_front","bullettrain_side","bus","busstop","bust_in_silhouette","busts_in_silhouette","cactus","cake","calendar","calling","camel","camera","cancer","candy","capital_abcd","capricorn","car","card_index","carousel_horse","cat","cat2","cd","chart","chart_with_downwards_trend","chart_with_upwards_trend","checkered_flag","cherries","cherry_blossom","chestnut","chicken","children_crossing","chocolate_bar","christmas_tree","church","cinema","circus_tent","city_sunrise","city_sunset","cl","clap","clapper","clipboard","clock1","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","closed_book","closed_lock_with_key","closed_umbrella","cloud","clubs","cn","cocktail","coffee","cold_sweat","collision","computer","confetti_ball","confounded","confused","congratulations","construction","construction_worker","convenience_store","cookie","cool","cop","copyright","corn","couple","couple_with_heart","couplekiss","cow","cow2","credit_card","crescent_moon","crocodile","crossed_flags","crown","cry","crying_cat_face","crystal_ball","cupid","curly_loop","currency_exchange","curry","custard","customs","cyclone","dancer","dancers","dango","dart","dash","date","de","deciduous_tree","department_store","diamond_shape_with_a_dot_inside","diamonds","disappointed","disappointed_relieved","dizzy","dizzy_face","do_not_litter","dog","dog2","dollar","dolls","dolphin","donut","door","doughnut","dragon","dragon_face","dress","dromedary_camel","droplet","dvd","e-mail","ear","ear_of_rice","earth_africa","earth_americas","earth_asia","egg","eggplant","eight","eight_pointed_black_star","eight_spoked_asterisk","electric_plug","elephant","email","end","envelope","es","euro","european_castle","european_post_office","evergreen_tree","exclamation","expressionless","eyeglasses","eyes","facepunch","factory","fallen_leaf","family","fast_forward","fax","fearful","feelsgood","feet","ferris_wheel","file_folder","finnadie","fire","fire_engine","fireworks","first_quarter_moon","first_quarter_moon_with_face","fish","fish_cake","fishing_pole_and_fish","fist","five","flags","flashlight","floppy_disk","flower_playing_cards","flushed","foggy","football","fork_and_knife","fountain","four","four_leaf_clover","fr","free","fried_shrimp","fries","frog","frowning","fu","fuelpump","full_moon","full_moon_with_face","game_die","gb","gem","gemini","ghost","gift","gift_heart","girl","globe_with_meridians","goat","goberserk","godmode","golf","grapes","green_apple","green_book","green_heart","grey_exclamation","grey_question","grimacing","grin","grinning","guardsman","guitar","gun","haircut","hamburger","hammer","hamster","hand","handbag","hankey","hash","hatched_chick","hatching_chick","headphones","hear_no_evil","heart","heart_decoration","heart_eyes","heart_eyes_cat","heartbeat","heartpulse","hearts","heavy_check_mark","heavy_division_sign","heavy_dollar_sign","heavy_exclamation_mark","heavy_minus_sign","heavy_multiplication_x","heavy_plus_sign","helicopter","herb","hibiscus","high_brightness","high_heel","hocho","honey_pot","honeybee","horse","horse_racing","hospital","hotel","hotsprings","hourglass","hourglass_flowing_sand","house","house_with_garden","hurtrealbad","hushed","ice_cream","icecream","id","ideograph_advantage","imp","inbox_tray","incoming_envelope","information_desk_person","information_source","innocent","interrobang","iphone","it","izakaya_lantern","jack_o_lantern","japan","japanese_castle","japanese_goblin","japanese_ogre","jeans","joy","joy_cat","jp","key","keycap_ten","kimono","kiss","kissing","kissing_cat","kissing_closed_eyes","kissing_face","kissing_heart","kissing_smiling_eyes","koala","koko","kr","large_blue_circle","large_blue_diamond","large_orange_diamond","last_quarter_moon","last_quarter_moon_with_face","laughing","leaves","ledger","left_luggage","left_right_arrow","leftwards_arrow_with_hook","lemon","leo","leopard","libra","light_rail","link","lips","lipstick","lock","lock_with_ink_pen","lollipop","loop","loudspeaker","love_hotel","love_letter","low_brightness","m","mag","mag_right","mahjong","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","man","man_with_gua_pi_mao","man_with_turban","mans_shoe","maple_leaf","mask","massage","meat_on_bone","mega","melon","memo","mens","metal","metro","microphone","microscope","milky_way","minibus","minidisc","mobile_phone_off","money_with_wings","moneybag","monkey","monkey_face","monorail","mortar_board","mount_fuji","mountain_bicyclist","mountain_cableway","mountain_railway","mouse","mouse2","movie_camera","moyai","muscle","mushroom","musical_keyboard","musical_note","musical_score","mute","nail_care","name_badge","neckbeard","necktie","negative_squared_cross_mark","neutral_face","new","new_moon","new_moon_with_face","newspaper","ng","nine","no_bell","no_bicycles","no_entry","no_entry_sign","no_good","no_mobile_phones","no_mouth","no_pedestrians","no_smoking","non-potable_water","nose","notebook","notebook_with_decorative_cover","notes","nut_and_bolt","o","o2","ocean","octocat","octopus","oden","office","ok","ok_hand","ok_woman","older_man","older_woman","on","oncoming_automobile","oncoming_bus","oncoming_police_car","oncoming_taxi","one","open_file_folder","open_hands","open_mouth","ophiuchus","orange_book","outbox_tray","ox","package","page_facing_up","page_with_curl","pager","palm_tree","panda_face","paperclip","parking","part_alternation_mark","partly_sunny","passport_control","paw_prints","peach","pear","pencil","pencil2","penguin","pensive","performing_arts","persevere","person_frowning","person_with_blond_hair","person_with_pouting_face","phone","pig","pig2","pig_nose","pill","pineapple","pisces","pizza","plus1","point_down","point_left","point_right","point_up","point_up_2","police_car","poodle","poop","post_office","postal_horn","postbox","potable_water","pouch","poultry_leg","pound","pouting_cat","pray","princess","punch","purple_heart","purse","pushpin","put_litter_in_its_place","question","rabbit","rabbit2","racehorse","radio","radio_button","rage","rage1","rage2","rage3","rage4","railway_car","rainbow","raised_hand","raised_hands","raising_hand","ram","ramen","rat","recycle","red_car","red_circle","registered","relaxed","relieved","repeat","repeat_one","restroom","revolving_hearts","rewind","ribbon","rice","rice_ball","rice_cracker","rice_scene","ring","rocket","roller_coaster","rooster","rose","rotating_light","round_pushpin","rowboat","ru","rugby_football","runner","running","running_shirt_with_sash","sa","sagittarius","sailboat","sake","sandal","santa","satellite","satisfied","saxophone","school","school_satchel","scissors","scorpius","scream","scream_cat","scroll","seat","secret","see_no_evil","seedling","seven","shaved_ice","sheep","shell","ship","shipit","shirt","shit","shoe","shower","signal_strength","six","six_pointed_star","ski","skull","sleeping","sleepy","slot_machine","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","smile","smile_cat","smiley","smiley_cat","smiling_imp","smirk","smirk_cat","smoking","snail","snake","snowboarder","snowflake","snowman","sob","soccer","soon","sos","sound","space_invader","spades","spaghetti","sparkle","sparkler","sparkles","sparkling_heart","speak_no_evil","speaker","speech_balloon","speedboat","squirrel","star","star2","stars","station","statue_of_liberty","steam_locomotive","stew","straight_ruler","strawberry","stuck_out_tongue","stuck_out_tongue_closed_eyes","stuck_out_tongue_winking_eye","sun_with_face","sunflower","sunglasses","sunny","sunrise","sunrise_over_mountains","surfer","sushi","suspect","suspension_railway","sweat","sweat_drops","sweat_smile","sweet_potato","swimmer","symbols","syringe","tada","tanabata_tree","tangerine","taurus","taxi","tea","telephone","telephone_receiver","telescope","tennis","tent","thought_balloon","three","thumbsdown","thumbsup","ticket","tiger","tiger2","tired_face","tm","toilet","tokyo_tower","tomato","tongue","top","tophat","tractor","traffic_light","train","train2","tram","triangular_flag_on_post","triangular_ruler","trident","triumph","trolleybus","trollface","trophy","tropical_drink","tropical_fish","truck","trumpet","tshirt","tulip","turtle","tv","twisted_rightwards_arrows","two","two_hearts","two_men_holding_hands","two_women_holding_hands","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7981","u7a7a","uk","umbrella","unamused","underage","unlock","up","us","v","vertical_traffic_light","vhs","vibration_mode","video_camera","video_game","violin","virgo","volcano","vs","walking","waning_crescent_moon","waning_gibbous_moon","warning","watch","water_buffalo","watermelon","wave","wavy_dash","waxing_crescent_moon","waxing_gibbous_moon","wc","weary","wedding","whale","whale2","wheelchair","white_check_mark","white_circle","white_flower","white_large_square","white_medium_small_square","white_medium_square","white_small_square","white_square_button","wind_chime","wine_glass","wink","wolf","woman","womans_clothes","womans_hat","womens","worried","wrench","x","yellow_heart","yen","yum","zap","zero","zzz"]}),define("highLight",["main","math","Clipboard","emojiList","jquery_hoverIntent"],function(e,t,n,r){"use strict";var o=function(){function t(){o||(o=!0,require([e.staticUrl+"/3rd/highlightjs/highlight.pack.js"],function(e){r=e;for(var t=0;t<n.length;t++)r.highlightBlock(n[t])}))}var n=[],r=null,o=!1;return function(e){return r?void r.highlightBlock(e):(n.push(e),t())}}(),i=function(){function t(){o||(o=!0,require.config({paths:{global_highlightChart:e.staticUrl+"/global/script/highlightChart.min"}}),require(["global_highlightChart"],function(e){r=e;for(var t=0;t<n.length;t++){var o=n[t][0];"undefined"!=typeof r[o]&&r[o](n[t][1])}}))}var n=[],r=null,o=!1;return function(e,o){return r?void("undefined"!=typeof r[e]&&r[e](o)):(n.push([e,o]),t())}}();return function(a){function s(e){return e.indexOf("$$")!==-1||!!e.match(/\$(.+?)\$/)}var l,c,u,p,d,h;d=function(t){var n;if(n=t.attr("class").trim().replace(/emoji[ \-]/g,""),r.indexOf(n)!==-1)return t.after('<img src="'+e.staticUrl+"/global/img/emojis/"+n+'.png" class="emoji" alt="'+n+'" title="'+n+'" />'),t.remove()},u=/((?:0\u20E3|1\u20E3|2\u20E3|3\u20E3|4\u20E3|5\u20E3|6\u20E3|7\u20E3|8\u20E3|9\u20E3|#\u20E3|\*\u20E3|\uD83C(?:\uDDE6\uD83C(?:\uDDE8|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDEE|\uDDF1|\uDDF2|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFC|\uDDFD|\uDDFF)|\uDDE7\uD83C(?:\uDDE6|\uDDE7|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDEF|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFB|\uDDFC|\uDDFE|\uDDFF)|\uDDE8\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF5|\uDDF7|\uDDFA|\uDDFB|\uDDFC|\uDDFD|\uDDFE|\uDDFF)|\uDDE9\uD83C(?:\uDDEA|\uDDEC|\uDDEF|\uDDF0|\uDDF2|\uDDF4|\uDDFF)|\uDDEA\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEC|\uDDED|\uDDF7|\uDDF8|\uDDF9|\uDDFA)|\uDDEB\uD83C(?:\uDDEE|\uDDEF|\uDDF0|\uDDF2|\uDDF4|\uDDF7)|\uDDEC\uD83C(?:\uDDE6|\uDDE7|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDF1|\uDDF2|\uDDF3|\uDDF5|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFC|\uDDFE)|\uDDED\uD83C(?:\uDDF0|\uDDF2|\uDDF3|\uDDF7|\uDDF9|\uDDFA)|\uDDEE\uD83C(?:\uDDE8|\uDDE9|\uDDEA|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9)|\uDDEF\uD83C(?:\uDDEA|\uDDF2|\uDDF4|\uDDF5)|\uDDF0\uD83C(?:\uDDEA|\uDDEC|\uDDED|\uDDEE|\uDDF2|\uDDF3|\uDDF5|\uDDF7|\uDDFC|\uDDFE|\uDDFF)|\uDDF1\uD83C(?:\uDDE6|\uDDE7|\uDDE8|\uDDEE|\uDDF0|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFB|\uDDFE)|\uDDF2\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF5|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFB|\uDDFC|\uDDFD|\uDDFE|\uDDFF)|\uDDF3\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEB|\uDDEC|\uDDEE|\uDDF1|\uDDF4|\uDDF5|\uDDF7|\uDDFA|\uDDFF)|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C(?:\uDDE6|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF7|\uDDF8|\uDDF9|\uDDFC|\uDDFE)|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C(?:\uDDEA|\uDDF4|\uDDF8|\uDDFA|\uDDFC)|\uDDF8\uD83C(?:\uDDE6|\uDDE7|\uDDE8|\uDDE9|\uDDEA|\uDDEC|\uDDED|\uDDEE|\uDDEF|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF7|\uDDF8|\uDDF9|\uDDFB|\uDDFD|\uDDFE|\uDDFF)|\uDDF9\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEB|\uDDEC|\uDDED|\uDDEF|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF7|\uDDF9|\uDDFB|\uDDFC|\uDDFF)|\uDDFA\uD83C(?:\uDDE6|\uDDEC|\uDDF2|\uDDF8|\uDDFE|\uDDFF)|\uDDFB\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEC|\uDDEE|\uDDF3|\uDDFA)|\uDDFC\uD83C(?:\uDDEB|\uDDF8)|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C(?:\uDDEA|\uDDF9)|\uDDFF\uD83C(?:\uDDE6|\uDDF2|\uDDFC)))|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2694\u2696\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD79\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED0\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3]|\uD83E[\uDD10-\uDD18\uDD80-\uDD84\uDDC0])/g,a?(a.find("h1, h2, h3, strong").each(function(){return $(this).html($(this).html().replace(u,'<span style="font-weight:normal;">$1</span>'))}),a.find("span.emoji").each(function(){return d($(this))})):($("h1, h2, h3, strong").each(function(){return $(this).html($(this).html().replace(u,'<span style="font-weight:normal;">$1</span>'))}),$("span.emoji").each(function(){return d($(this))})),h=function(e){var t,n,r,o;return t=document,o=e.get(0),t.body.createTextRange?(n=t.body.createTextRange(),n.moveToElementText(o),n.select()):window.getSelection?(r=window.getSelection(),n=t.createRange(),n.selectNodeContents(o),r.removeAllRanges(),r.addRange(n)):void 0},c=function(e){var t,r,o,i;i='\n      <div class="widget-codetool" style="display:none;">\n      <div class="widget-codetool--inner">\n      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="全选"></span>\n      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top"  data-clipboard-text="" title="复制"></span>\n      </div>\n      </div>\n      ',o=$(i),e.before(o),$('[data-toggle="tooltip"]').tooltip({container:"body"}),r=o.find(".copyCode"),t=e.children("code"),e.hoverIntent({interval:50,over:function(){o.show()},out:function(){o.is(":hover")||o.hide()}}),o.hoverIntent({interval:50,over:function(){},out:function(){e.is(":hover")||o.hide()}}),o.find(".selectCode").click(function(){return h(t)}),r.attr("data-clipboard-text",t.text());var a=new n(".copyCode");a.on("success",function(e){$(".copyCode").attr("data-original-title","复制"),$(e.trigger).attr("data-original-title","已复制").tooltip("show"),e.clearSelection()}),a.on("error",function(e){$(e.trigger).prev().trigger("click"),$(".copyCode").attr("data-original-title","复制"),$(e.trigger).attr("data-original-title","按 ⌘+c 复制").tooltip("show")})},p=function(e){var t,n,r,s,l,u,p,d,h,f,m,g;f=e,u={actionscript:/^as[1-3]$/i,cmake:/^(make|makefile)$/i,cs:/^csharp$/i,typescript:/^ts$/i,css:/^css[1-3]$/i,javascript:/^js$/i,markdown:/^md$/i,objectivec:/^(oc|objective-c)$/i,php:/^php[1-6]$/i,sql:/^mysql$/i,xml:/^(html|html5|xhtml)$/i,flow:/^flow$/i,sequence:/^sequence$/i},s=void 0,l=["objectivec","lisp","scala","typescript","groovy","sql","actionscript","xml","markdown","perl","java","bash","shell","clojure","kotlin","fortran","lua","swift","json","nginx","ini","css","javascript","makefile","ruby","basic","cs","coffeescript","go","php","erlang","cpp","haskell","properties","diff","apache","dart","rust","cmake","r","python"],r=void 0,t=void 0,h=!1,g=!1,2===f.children("code").length?(t=f.children("code").first().text(),f.children("code").first().remove(),r=f.children("code").addClass(t)):(r=f.children("code"),1===r.text().split("\n").length&&r.css({"word-break":"break-word","white-space":"initial"}),t=r.attr("class")),t&&(n=t.split(/\s+/),n.indexOf("nohighlight")!==-1&&(h=!0),n.forEach(function(e){var t,n;if(n=e.toLowerCase(),l.indexOf(n)!==-1)s=n;else for(t in u)n.match(u[t])&&(s=t)}),s&&f.attr("class",s)),s&&("flow"===s?(d=$(".flowChart").length,r.parent().after('<div id="flowDiagram'+d+'" class="flowChart"></div>'),i("flow",[r.text(),"flowDiagram"+d]),r.parent().remove(),g=!0):"sequence"===s&&(a=r.parent(),m=r.text(),d=$(".sequenceChart").length,a.replaceWith('<div id="sequenceDiagram'+d+'" class="sequenceChart">'+m+"</div>"),i("sequence",$("#sequenceDiagram"+d)),g=!0)),h||g||(p=f.html(),p.length<1e4&&o(f[0])),c(f)},a?(l=s(a.text()),l&&t(a),a.find("pre").each(function(){p($(this))})):($(".fmt").each(function(){var e=$(this);s(e.text())&&t(e)}),$(".fmt pre").each(function(){p($(this))}))}}),define("hyperdown",[],function(){var e,t=[].slice;return e=function(){function e(){this.commonWhiteList="kbd|b|i|strong|em|sup|sub|br|code|del|a|hr|small",this.blockHtmlTags="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|address|form|fieldset|iframe|hr|legend|article|section|nav|aside|hgroup|header|footer|figcaption|svg|script|noscript",this.specialWhiteList={table:"table|tbody|thead|tfoot|tr|td|th"},this.hooks={},this.html=!1,this.line=!1,this.blockParsers=[["code",10],["shtml",20],["pre",30],["ahtml",40],["list",50],["math",60],["html",70],["footnote",80],["definition",90],["quote",100],["table",110],["sh",120],["mh",130],["hr",140],["default",9999]],this.parsers={}}var n,r,o,i,a,s,l,c;return c=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},a=function(e){return e.replace(/[-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},i="A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",s=function(e,t,n){var r,o,i,l,c,u;if(e instanceof Array)if(t instanceof Array)for(r=o=0,l=e.length;o<l;r=++o)u=e[r],n=s(u,t[r],n);else for(i=0,c=e.length;i<c;i++)u=e[i],n=s(u,t,n);else e=a(e),n=n.replace(new RegExp(e,"g"),t.replace(/\$/g,"$$$$"));return n},o=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},l=function(e,t){var n,r,o,i,s;if(null==t&&(t=null),null!=t){for(s="",r=o=0,i=t.length-1;0<=i?o<=i:o>=i;r=0<=i?++o:--o)n=t[r],n=a(n),s+=n;return s="["+s+"]*",e.replace(new RegExp("^"+s),"").replace(new RegExp(s+"$"),"")}return e.replace(/^\s*/,"").replace(/\s*$/,"")},n=function(e){var t,n,r,o,i;if(i=[],e instanceof Array)for(r=n=0,o=e.length;n<o;r=++n)t=e[r],i.push(r);else for(r in e)i.push(r);return i},r=function(e){var t,n,r,o,i;if(o=[],e instanceof Array)for(n=0,r=e.length;n<r;n++)i=e[n],o.push(i);else for(t in e)i=e[t],o.push(i);return o},e.prototype.makeHtml=function(e){var t,n,r,o,i,a;for(this.footnotes=[],this.definitions={},this.holders={},this.uniqid=Math.ceil(1e7*Math.random())+Math.ceil(1e7*Math.random()),this.id=0,this.blockParsers.sort(function(e,t){return e[1]<t[1]?-1:1}),a=this.blockParsers,n=0,r=a.length;n<r;n++)i=a[n],o=i[0],void 0!==i[2]?this.parsers[o]=i[2]:this.parsers[o]=this["parseBlock"+c(o)].bind(this);return e=this.initText(e),t=this.parse(e),t=this.makeFootnotes(t),t=this.optimizeLines(t),this.call("makeHtml",t)},e.prototype.enableHtml=function(e){this.html=null==e||e},e.prototype.enableLine=function(e){this.line=null==e||e},e.prototype.hook=function(e,t){return null==this.hooks[e]&&(this.hooks[e]=[]),this.hooks[e].push(t)},e.prototype.makeHolder=function(e){var t;return t="|\r"+this.uniqid+this.id+"\r|",this.id+=1,this.holders[t]=e,t},e.prototype.initText=function(e){return e.replace(/\t/g,"    ").replace(/\r/g,"").replace(/(\u000A|\u000D|\u2028|\u2029)/g,"\n")},e.prototype.makeFootnotes=function(e){var t,n;if(this.footnotes.length>0){for(e+='<div class="footnotes"><hr><ol>',t=1;n=this.footnotes.shift();)"string"==typeof n?n+=' <a href="#fnref-'+t+'" class="footnote-backref">&#8617;</a>':(n[n.length-1]+=' <a href="#fnref-'+t+'" class="footnote-backref">&#8617;</a>',n=n.length>1?this.parse(n.join("\n")):this.parseInline(n[0])),e+='<li id="fn-'+t+'">'+n+"</li>",t+=1;e+="</ol></div>"}return e},e.prototype.parse=function(e,t,n){var r,o,i,a,s,l,u,p,d,h,f,m,g;for(null==t&&(t=!1),null==n&&(n=0),p=[],o=this.parseBlock(e,p),s="",t&&1===o.length&&"normal"===o[0][0]&&(o[0][3]=!0),l=0,u=o.length;l<u;l++)r=o[l],m=r[0],f=r[1],i=r[2],g=r[3],a=p.slice(f,i+1),d="parse"+c(m),a=this.call("before"+c(d),a,g),h=this[d](a,g,f+n,i+n),h=this.call("after"+c(d),h,g),s+=h;return s},e.prototype.call=function(){var e,n,r,o,i,a,s;if(a=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],s=e[0],null==this.hooks[a])return s;for(i=this.hooks[a],r=0,o=i.length;r<o;r++)n=i[r],s=n.apply(this,e),e[0]=s;return s},e.prototype.releaseHolder=function(e,t){var o;for(null==t&&(t=!0),o=0;e.indexOf("\r")>=0&&o<10;)e=s(n(this.holders),r(this.holders),e),o+=1;return t&&(this.holders={}),e},e.prototype.markLine=function(e,t){return null==t&&(t=-1),this.line?(t=t<0?e:t,'<span class="line" data-start="'+e+'" data-end="'+t+'" data-id="'+this.uniqid+'"></span>'):""},e.prototype.markLines=function(e,t){var n;return n=-1,
this.line?e.map(function(e){return function(r){return n+=1,e.markLine(t+n)+r}}(this)):e},e.prototype.optimizeLines=function(e){var n,r;return n=0,r=new RegExp('class="line" data\\-start="([0-9]+)" data\\-end="([0-9]+)" (data\\-id="'+this.uniqid+'")',"g"),this.line?e.replace(r,function(){var e,r;return e=1<=arguments.length?t.call(arguments,0):[],r=n!==parseInt(e[1])?'class="line" data-start="'+n+'" data-start-original="'+e[1]+'" data-end="'+e[2]+'" '+e[3]:e[0],n=1+parseInt(e[2]),r}):e},e.prototype.parseInline=function(e,n,r,a){var l;return null==n&&(n=""),null==r&&(r=!0),null==a&&(a=!0),e=this.call("beforeParseInline",e),e=e.replace(/(^|[^\\])(`+)(.+?)\2/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],n[1]+e.makeHolder("<code>"+o(n[3])+"</code>")}}(this)),e=e.replace(/(^|[^\\])(\$+)(.+?)\2/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],n[1]+e.makeHolder(n[2]+o(n[3])+n[2])}}(this)),e=e.replace(/\\(.)/g,function(e){return function(){var n,r;return r=1<=arguments.length?t.call(arguments,0):[],n=o(r[1]),n=n.replace(/\$/g,"&dollar;"),e.makeHolder(n)}}(this)),e=e.replace(/<(https?:\/\/.+)>/gi,function(e){return function(){var n,r,o;return r=1<=arguments.length?t.call(arguments,0):[],o=e.cleanUrl(r[1]),n=e.call("parseLink",r[1]),e.makeHolder('<a href="'+o+'">'+n+"</a>")}}(this)),e=e.replace(/<(\/?)([a-z0-9-]+)(\s+[^>]*)?>/gi,function(e){return function(){var r;return r=1<=arguments.length?t.call(arguments,0):[],e.html||("|"+e.commonWhiteList+"|"+n+"|").indexOf("|"+r[2].toLowerCase()+"|")>=0?e.makeHolder(r[0]):o(r[0])}}(this)),this.html&&(e=e.replace(/<!\-\-(.*?)\-\->/g,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],e.makeHolder(n[0])}}(this))),e=s(["<",">"],["&lt;","&gt;"],e),e=e.replace(/\[\^((?:[^\]]|\\\]|\\\[)+?)\]/g,function(e){return function(){var n,r;return r=1<=arguments.length?t.call(arguments,0):[],n=e.footnotes.indexOf(r[1]),n<0&&(n=e.footnotes.length+1,e.footnotes.push(e.parseInline(r[1],"",!1))),e.makeHolder('<sup id="fnref-'+n+'"><a href="#fn-'+n+'" class="footnote-ref">'+n+"</a></sup>")}}(this)),e=e.replace(/!\[((?:[^\]]|\\\]|\\\[)*?)\]\(((?:[^\)]|\\\)|\\\()+?)\)/g,function(e){return function(){var n,r,i;return r=1<=arguments.length?t.call(arguments,0):[],n=o(e.escapeBracket(r[1])),i=e.escapeBracket(r[2]),i=e.cleanUrl(i),e.makeHolder('<img src="'+i+'" alt="'+n+'" title="'+n+'">')}}(this)),e=e.replace(/!\[((?:[^\]]|\\\]|\\\[)*?)\]\[((?:[^\]]|\\\]|\\\[)+?)\]/g,function(e){return function(){var n,r,i;return r=1<=arguments.length?t.call(arguments,0):[],n=o(e.escapeBracket(r[1])),i=null!=e.definitions[r[2]]?'<img src="'+e.definitions[r[2]]+'" alt="'+n+'" title="'+n+'">':n,e.makeHolder(i)}}(this)),e=e.replace(/\[((?:[^\]]|\\\]|\\\[)+?)\]\(((?:[^\)]|\\\)|\\\()+?)\)/g,function(e){return function(){var n,r,o;return r=1<=arguments.length?t.call(arguments,0):[],n=e.parseInline(e.escapeBracket(r[1]),"",!1,!1),o=e.escapeBracket(r[2]),o=e.cleanUrl(o),e.makeHolder('<a href="'+o+'">'+n+"</a>")}}(this)),e=e.replace(/\[((?:[^\]]|\\\]|\\\[)+?)\]\[((?:[^\]]|\\\]|\\\[)+?)\]/g,function(e){return function(){var n,r,o;return r=1<=arguments.length?t.call(arguments,0):[],n=e.parseInline(e.escapeBracket(r[1]),"",!1,!1),o=null!=e.definitions[r[2]]?'<a href="'+e.definitions[r[2]]+'">'+n+"</a>":n,e.makeHolder(o)}}(this)),e=this.parseInlineCallback(e),e=e.replace(/<([_a-z0-9-\.\+]+@[^@]+\.[a-z]{2,})>/gi,'<a href="mailto:$1">$1</a>'),a&&(l=new RegExp('(^|[^"])((https?):['+i+'_0-9-\\./%#!@\\?\\+=~\\|\\,&\\(\\)]+)($|[^"])',"ig"),e=e.replace(l,function(e){return function(){var n,r;return r=1<=arguments.length?t.call(arguments,0):[],n=e.call("parseLink",r[2]),r[1]+'<a href="'+r[2]+'">'+n+"</a>"+r[4]}}(this))),e=this.call("afterParseInlineBeforeRelease",e),e=this.releaseHolder(e,r),e=this.call("afterParseInline",e)},e.prototype.parseInlineCallback=function(e){return e=e.replace(/(\*{3})((?:.|\r)+?)\1/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],"<strong><em>"+e.parseInlineCallback(n[2])+"</em></strong>"}}(this)),e=e.replace(/(\*{2})((?:.|\r)+?)\1/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],"<strong>"+e.parseInlineCallback(n[2])+"</strong>"}}(this)),e=e.replace(/(\*)((?:.|\r)+?)\1/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],"<em>"+e.parseInlineCallback(n[2])+"</em>"}}(this)),e=e.replace(/(\s+|^)(_{3})((?:.|\r)+?)\2(\s+|$)/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],n[1]+"<strong><em>"+e.parseInlineCallback(n[3])+"</em></strong>"+n[4]}}(this)),e=e.replace(/(\s+|^)(_{2})((?:.|\r)+?)\2(\s+|$)/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],n[1]+"<strong>"+e.parseInlineCallback(n[3])+"</strong>"+n[4]}}(this)),e=e.replace(/(\s+|^)(_)((?:.|\r)+?)\2(\s+|$)/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],n[1]+"<em>"+e.parseInlineCallback(n[3])+"</em>"+n[4]}}(this)),e=e.replace(/(~{2})((?:.|\r)+?)\1/gm,function(e){return function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],"<del>"+e.parseInlineCallback(n[2])+"</del>"}}(this))},e.prototype.parseBlock=function(e,t){var r,o,i,a,s,l,c,u,p,d,h,f,m;for(h=e.split("\n"),o=0,s=h.length;o<s;o++)c=h[o],t.push(c);for(this.blocks=[],this.current="normal",this.pos=-1,m={special:n(this.specialWhiteList).join("|"),empty:0,html:!1},i=a=0,l=t.length;a<l;i=++a)if(c=t[i],r=this.getBlock(),null!=r&&(r=r.slice(0)),"normal"===this.current||(d=this.parsers[this.current](r,i,c,m,t))){f=this.parsers;for(u in f)if(p=f[u],u!==this.current&&(d=p(r,i,c,m,t),!d))break}return this.optimizeBlocks(this.blocks,t)},e.prototype.parseBlockList=function(e,t,n,r){var o,i;if(o=n.match(/^(\s*)((?:[0-9]+\.)|\-|\+|\*)\s+/i))return i=o[1].length,r.empty=0,this.isBlock("list")?this.setBlock(t,i):this.startBlock("list",t,i),!1;if(this.isBlock("list")&&!n.match(/^\s*\[((?:[^\]]|\\\]|\\\[)+?)\]:\s*(.+)$/)){if(r.empty<=1&&(o=n.match(/^(\s+)/))&&o[1].length>e[3])return r.empty=0,this.setBlock(t),!1;if(n.match(/^\s*$/)&&0===r.empty)return r.empty+=1,this.setBlock(t),!1}return!0},e.prototype.parseBlockCode=function(e,t,n){var r,o,i;return(o=n.match(/^(\s*)(~{3,}|`{3,})([^`~]*)$/i))?(this.isBlock("code")?(r=e[3][2],r?this.combineBlock().setBlock(t):this.setBlock(t).endBlock()):(r=!1,this.isBlock("list")&&(i=e[3],r=i>0&&o[1].length>=i||o[1].length>i),this.startBlock("code",t,[o[1],o[3],r])),!1):!this.isBlock("code")||(this.setBlock(t),!1)},e.prototype.parseBlockShtml=function(e,t,n,r){var o;if(this.html){if(o=n.match(/^(\s*)!!!(\s*)$/))return this.isBlock("shtml")?this.setBlock(t).endBlock():this.startBlock("shtml",t),!1;if(this.isBlock("shtml"))return this.setBlock(t),!1}return!0},e.prototype.parseBlockAhtml=function(e,t,n,r){var o,i,a,s,l;if(this.html)if(i=new RegExp("^\\s*<("+this.blockHtmlTags+")(\\s+[^>]*)?>","i"),l=n.match(i)){if(this.isBlock("ahtml"))return this.setBlock(t),!1;if(void 0===l[2]||"/"!==l[2]){for(this.startBlock("ahtml",t),o=new RegExp("\\s*<("+this.blockHtmlTags+")(\\s+[^>]*)?>","ig");;){if(s=o.exec(n),!s)break;a=s[1]}return 0<=n.indexOf("</"+a+">")?this.endBlock():r.html=a,!1}}else{if(r.html&&0<=n.indexOf("</"+r.html+">"))return this.setBlock(t).endBlock(),r.html=!1,!1;if(this.isBlock("ahtml"))return this.setBlock(t),!1;if(l=n.match(/^\s*<!\-\-(.*?)\-\->\s*$/))return this.startBlock("ahtml",t).endBlock(),!1}return!0},e.prototype.parseBlockMath=function(e,t,n){var r;return(r=n.match(/^(\s*)\$\$(\s*)$/))?(this.isBlock("math")?this.setBlock(t).endBlock():this.startBlock("math",t),!1):!this.isBlock("math")||(this.setBlock(t),!1)},e.prototype.parseBlockPre=function(e,t,n,r){return n.match(/^ {4}/)?(this.isBlock("pre")?this.setBlock(t):this.startBlock("pre",t),!1):!this.isBlock("pre")||!n.match(/^\s*$/)||(this.setBlock(t),!1)},e.prototype.parseBlockHtml=function(e,t,n,r){var o,i;return(o=n.match(new RegExp("^\\s*<("+r.special+")(\\s+[^>]*)?>","i")))?(i=o[1].toLowerCase(),this.isBlock("html",i)||this.isBlock("pre")||this.startBlock("html",t,i),!1):(o=n.match(new RegExp("</("+r.special+")>\\s*$","i")))?(i=o[1].toLowerCase(),this.isBlock("html",i)&&this.setBlock(t).endBlock(),!1):!this.isBlock("html")||(this.setBlock(t),!1)},e.prototype.parseBlockFootnote=function(e,t,n){var r,o;return!(r=n.match(/^\[\^((?:[^\]]|\\\]|\\\[)+?)\]:/))||(o=r[0].length-1,this.startBlock("footnote",t,[o,r[1]]),!1)},e.prototype.parseBlockDefinition=function(e,t,n){var r;return!(r=n.match(/^\s*\[((?:[^\]]|\\\]|\\\[)+?)\]:\s*(.+)$/))||(this.definitions[r[1]]=this.cleanUrl(r[2]),this.startBlock("definition",t).endBlock(),!1)},e.prototype.parseBlockQuote=function(e,t,n){var r;return!(r=n.match(/^(\s*)>/))||(this.isBlock("list")&&r[1].length>0?this.setBlock(t):this.isBlock("quote")?this.setBlock(t):this.startBlock("quote",t),!1)},e.prototype.parseBlockTable=function(e,t,n,r,o){var i,a,s,l,c,u,p,d;if(u=n.match(/^((?:(?:(?:\||\+)(?:[ :]*\-+[ :]*)(?:\||\+))|(?:(?:[ :]*\-+[ :]*)(?:\||\+)(?:[ :]*\-+[ :]*))|(?:(?:[ :]*\-+[ :]*)(?:\||\+))|(?:(?:\||\+)(?:[ :]*\-+[ :]*)))+)$/)){if(this.isBlock("table"))e[3][0].push(e[3][2]),e[3][2]+=1,this.setBlock(t,e[3]);else{for(s=0,null==e||"normal"!==e[0]||o[e[2]].match(/^\s*$/)?this.startBlock("table",t):(s=1,this.backBlock(1,"table")),"|"===u[1][0]&&(u[1]=u[1].substring(1),"|"===u[1][u[1].length-1]&&(u[1]=u[1].substring(0,u[1].length-1))),d=u[1].split(/\+|\|/),a=[],l=0,c=d.length;l<c;l++)p=d[l],i="none",(u=p.match(/^\s*(:?)\-+(:?)\s*$/))&&(u[1]&&u[2]?i="center":u[1]?i="left":u[2]&&(i="right")),a.push(i);this.setBlock(t,[[s],a,s+1])}return!1}return!0},e.prototype.parseBlockSh=function(e,t,n){var r,o;return!(r=n.match(/^(#+)(.*)$/))||(o=Math.min(r[1].length,6),this.startBlock("sh",t,o).endBlock(),!1)},e.prototype.parseBlockMh=function(e,t,n,r,o){var i;return!((i=n.match(/^\s*((=|-){2,})\s*$/))&&null!=e&&"normal"===e[0]&&!o[e[2]].match(/^\s*$/))||(this.isBlock("normal")?this.backBlock(1,"mh","="===i[1][0]?1:2).setBlock(t).endBlock():this.startBlock("normal",t),!1)},e.prototype.parseBlockHr=function(e,t,n){return!n.match(/^[-\*]{3,}\s*$/)||(this.startBlock("hr",t).endBlock(),!1)},e.prototype.parseBlockDefault=function(e,t,n,r){var o;return this.isBlock("footnote")?(o=n.match(/^(\s*)/),o[1].length>=e[3][0]?this.setBlock(t):this.startBlock("normal",t)):this.isBlock("table")?0<=n.indexOf("|")?(e[3][2]+=1,this.setBlock(t,e[3])):this.startBlock("normal",t):this.isBlock("quote")?n.match(/^(\s*)$/)?this.startBlock("normal",t):this.setBlock(t):null==e||"normal"!==e[0]?this.startBlock("normal",t):this.setBlock(t),!0},e.prototype.optimizeBlocks=function(e,t){var n,r,o,i,a,s,l,c,u,p,d,h;for(r=e.slice(0),s=t.slice(0),r=this.call("beforeOptimizeBlocks",r,s),a=0;null!=r[a];)l=!1,n=r[a],u=null!=r[a-1]?r[a-1]:null,c=null!=r[a+1]?r[a+1]:null,d=n[0],o=n[1],p=n[2],"pre"===d&&(i=s.slice(n[1],n[2]+1).reduce(function(e,t){return t.match(/^\s*$/)&&e},!0),i&&(n[0]=d="normal")),"normal"===d&&(h=["list","quote"],o===p&&s[o].match(/^\s*$/)&&null!=u&&null!=c&&u[0]===c[0]&&h.indexOf(u[0])>=0&&(r[a-1]=[u[0],u[1],c[2],null],r.splice(a,2),l=!0)),l||(a+=1);return this.call("afterOptimizeBlocks",r,s)},e.prototype.parseCode=function(e,t,n){var r,i,a,s,c,u;return r=t[0],s=t[1],s=l(s),i=r.length,s.match(/^[_a-z0-9-\+\#\:\.]+$/i)?(t=s.split(":"),t.length>1&&(s=t[0],c=t[1],s=l(s),c=l(c))):s=null,a=!0,e=e.slice(1,-1).map(function(e){return e=e.replace(new RegExp("/^[ ]{"+i+"}/"),""),a&&!e.match(/^\s*$/)&&(a=!1),o(e)}),u=this.markLines(e,n+1).join("\n"),a?"":"<pre><code"+(s?' class="'+s+'"':"")+(c?' rel="'+c+'"':"")+">"+u+"</code></pre>"},e.prototype.parsePre=function(e,t,n){var r;return e=e.map(function(e){return o(e.substring(4))}),r=this.markLines(e,n).join("\n"),r.match(/^\s*$/)?"":"<pre><code>"+r+"</code></pre>"},e.prototype.parseAhtml=function(e,t,n){return l(this.markLines(e,n).join("\n"))},e.prototype.parseShtml=function(e,t,n){return l(this.markLines(e.slice(1,-1),n+1).join("\n"))},e.prototype.parseMath=function(e,t,n,r){return"<p>"+this.markLine(n,r)+o(e.join("\n"))+"</p>"},e.prototype.parseSh=function(e,t,n,r){var o;return o=this.markLine(n,r)+this.parseInline(l(e[0],"# ")),o.match(/^\s*$/)?"":"<h"+t+">"+o+"</h"+t+">"},e.prototype.parseMh=function(e,t,n,r){return this.parseSh(e,t,n,r)},e.prototype.parseQuote=function(e,t,n){var r;return e=e.map(function(e){return e.replace(/^\s*> ?/,"")}),r=e.join("\n"),r.match(/^\s*$/)?"":"<blockquote>"+this.parse(r,!0,n)+"</blockquote>"},e.prototype.parseList=function(e,t,n){var r,o,i,a,s,l,c,u,p,d,h,f,m,g,v,y,b,w,_,k;for(o="",m=99999,b=99999,r=!1,y=!1,v=[],a=i=0,p=e.length;i<p;a=++i)h=e[a],(f=h.match(/^(\s*)((?:[0-9]+\.?)|\-|\+|\*)(\s+)(.*)$/i))?(w=f[1].length,k=0<="+-*".indexOf(f[2])?"ul":"ol",m=Math.min(w,m),r=!0,w>0&&(b=Math.min(w,b),y=!0),v.push([w,k,h,f[4]])):(v.push(h),(f=h.match(/^(\s*)/))&&(w=f[1].length,w>0&&(b=Math.min(w,b),y=!0)));for(m=r?m:0,b=y?b:m,l="",c=[],u=0,a=s=0,d=v.length;s<d;a=++s)g=v[a],g instanceof Array?(w=g[0],k=g[1],h=g[2],_=g[3],w!==m?c.push(h.replace(new RegExp("^\\s{"+b+"}"),"")):(c.length>0&&(o+="<li>"+this.parse(c.join("\n"),!0,n+u)+"</li>"),l!==k&&(l&&(o+="</"+l+">"),o+="<"+k+">"),u=a,c=[_],l=k)):c.push(g.replace(new RegExp("^\\s{"+b+"}"),""));return c.length>0&&(o+="<li>"+this.parse(c.join("\n"),!0,n+u)+("</li></"+l+">")),o},e.prototype.parseTable=function(e,t,n){var r,o,i,a,s,c,u,p,d,h,f,m,g,v,y,b,w,_,k,x;for(u=t[0],r=t[1],s=u.length>0&&u.reduce(function(e,t){return t+e})>0,c="<table>",o=!s||null,b=!1,d=p=0,m=e.length;p<m;d=++p)if(v=e[d],0<=u.indexOf(d))s&&b&&(s=!1,o=!0);else{for(v=l(v),b=!0,"|"===v[0]&&(v=v.substring(1),"|"===v[v.length-1]&&(v=v.substring(0,v.length-1))),_=v.split("|").map(function(e){return e.match(/^\s*$/)?" ":l(e)}),a={},f=-1,h=0,g=_.length;h<g;h++)w=_[h],w.length>0?(f+=1,a[f]=[null!=a[f]?a[f][0]+1:1,w]):null!=a[f]?a[f][0]+=1:a[0]=[1,w];s?c+="<thead>":o&&(c+="<tbody>"),c+="<tr",this.line&&(c+=' class="line" data-start="'+(n+d)+'" data-end="'+(n+d)+'" data-id="'+this.uniqid+'"'),c+=">";for(d in a)i=a[d],y=i[0],x=i[1],k=s?"th":"td",c+="<"+k,y>1&&(c+=' colspan="'+y+'"'),null!=r[d]&&"none"!==r[d]&&(c+=' align="'+r[d]+'"'),c+=">"+this.parseInline(x)+("</"+k+">");c+="</tr>",s?c+="</thead>":o&&(o=!1)}return null!==o&&(c+="</tbody>"),c+="</table>"},e.prototype.parseHr=function(e,t,n){return this.line?'<hr class="line" data-start="'+n+'" data-end="'+n+'">':"<hr>"},e.prototype.parseNormal=function(e,t,n){var r,o;return null==t&&(t=!1),r=0,e=e.map(function(e){return function(t){return t=e.parseInline(t),t.match(/^\s*$/)||(t=e.markLine(n+r)+t),r+=1,t}}(this)),o=l(e.join("\n")),o=o.replace(/(\n\s*){2,}/g,"</p><p>"),o=o.replace(/\n/g,"<br>"),o.match(/^\s*$/)?"":t?o:"<p>"+o+"</p>"},e.prototype.parseFootnote=function(e,t){var n,r,o;return o=t[0],r=t[1],n=this.footnotes.indexOf(r),n>=0&&(e=e.slice(0),e[0]=e[0].replace(/^\[\^((?:[^\]]|\]|\[)+?)\]:/,""),this.footnotes[n]=e),""},e.prototype.parseDefinition=function(){return""},e.prototype.parseHtml=function(e,t,n){return e=e.map(function(e){return function(n){return e.parseInline(n,null!=e.specialWhiteList[t]?e.specialWhiteList[t]:"")}}(this)),this.markLines(e,n).join("\n")},e.prototype.cleanUrl=function(e){var t,n,r;return n=new RegExp("^\\s*((http|https|ftp|mailto):["+i+"_a-z0-9-:\\.\\*/%#!@\\?\\+=~\\|\\,&\\(\\)]+)","i"),r=new RegExp("^\\s*(["+i+"_a-z0-9-:\\.\\*/%#!@\\?\\+=~\\|\\,&]+)","i"),(t=e.match(n))?t[1]:(t=e.match(r))?t[1]:"#"},e.prototype.escapeBracket=function(e){return s(["\\[","\\]","\\(","\\)"],["[","]","(",")"],e)},e.prototype.startBlock=function(e,t,n){return null==n&&(n=null),this.pos+=1,this.current=e,this.blocks.push([e,t,t,n]),this},e.prototype.endBlock=function(){return this.current="normal",this},e.prototype.isBlock=function(e,t){return null==t&&(t=null),this.current===e&&(null===t||this.blocks[this.pos][3]===t)},e.prototype.getBlock=function(){return null!=this.blocks[this.pos]?this.blocks[this.pos]:null},e.prototype.setBlock=function(e,t){return null==e&&(e=null),null==t&&(t=null),null!==e&&(this.blocks[this.pos][2]=e),null!==t&&(this.blocks[this.pos][3]=t),this},e.prototype.backBlock=function(e,t,n){var r,o;return null==n&&(n=null),this.pos<0?this.startBlock(t,0,n):(o=this.blocks[this.pos][2],this.blocks[this.pos][2]=o-e,r=[t,o-e+1,o,n],this.blocks[this.pos][1]<=this.blocks[this.pos][2]?(this.pos+=1,this.blocks.push(r)):this.blocks[this.pos]=r,this.current=t,this)},e.prototype.combineBlock=function(){var e,t;return this.pos<1?this:(t=this.blocks[this.pos-1].slice(0),e=this.blocks[this.pos].slice(0),t[2]=e[2],this.blocks[this.pos-1]=t,this.current=t[0],this.blocks=this.blocks.slice(0,-1),this.pos-=1,this)},e}()}),define("pagedown_converter",["hyperdown","emojiList"],function(e,t){"use strict";function n(e){return e}function r(e){return!1}function o(){}function i(){}var a={};o.prototype={chain:function(e,t){var r=this[e];if(!r)throw new Error("unknown hook "+e);r===n?this[e]=t:this[e]=function(e){var n=Array.prototype.slice.call(arguments,0);return n[0]=r.apply(null,n),t.apply(null,n)}},set:function(e,t){if(!this[e])throw new Error("unknown hook "+e);this[e]=t},addNoop:function(e){this[e]=n},addFalse:function(e){this[e]=r}},a.HookCollection=o,i.prototype={set:function(e,t){this["s_"+e]=t},get:function(e){return this["s_"+e]}},a.Converter=new e;var s=a.Converter.hooks=new o;return s.addNoop("plainLinkText"),s.addNoop("preConversion"),s.addNoop("postNormalization"),s.addNoop("preBlockGamut"),s.addNoop("postBlockGamut"),s.addNoop("preSpanGamut"),s.addNoop("postSpanGamut"),s.addNoop("postConversion"),a.Converter.hook("beforeParseInline",function(e){return e=e.replace(/\$\$(.+?)\$\$/g,function(e){return a.Converter.makeHolder("$$"+e+"$$")})}),a.Converter.hook("afterParseInlineBeforeRelease",function(e){return e=e.replace(/:([_a-z0-9]+):/g,function(e,n){if(t.indexOf(n)!==-1){var r='<img src="'+SF.staticUrl+"/global/img/emojis/"+n+'.png" class="emoji" alt="'+n+'" title="'+n+'">';return a.Converter.makeHolder(r)}return e})}),a}),define("pagedown_sanitizer",["pagedown_converter"],function(e){"use strict";function t(e){return e.replace(/<[^>]*>?/gi,n)}function n(e){return e.match(a)||e.match(s)||e.match(l)?e:""}function r(e){if(""==e)return"";var t=/<\/?\w+[^>]*(\s|$|>)/g,n=e.toLowerCase().match(t),r=(n||[]).length;if(0==r)return e;for(var o,i,a,s="<p><img><br><li><hr><th>",l=[],c=[],u=!1,p=0;p<r;p++)if(o=n[p].replace(/<\/?(\w+).*/,"$1"),!(l[p]||s.search("<"+o+">")>-1)){if(i=n[p],a=-1,!/^<\//.test(i))for(var d=p+1;d<r;d++)if(!l[d]&&n[d]=="</"+o+">"){a=d;break}a==-1?u=c[p]=!0:l[a]=!0}if(!u)return e;var p=0;return e=e.replace(t,function(e){var t=c[p]?"":e;return p++,t})}var o,i;"object"==typeof exports&&"function"==typeof require?(o=exports,i=require("../hyperdown/hyperdown.js")):(o=e,i=o.Converter),o.getSanitizingConverter=function(){var e=i;return e.hooks.chain("postConversion",t),e.hooks.chain("postConversion",r),e};var a=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|h4|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul|table|td|tbody|th|thead|tr)>|<(br|hr)\s?\/?>)$/i,s=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,l=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i;return o}),define("pagedown_extra",["pagedown_converter"],function(e){function t(e){return e.replace(/^\s+|\s+$/g,"")}function n(e){return e.replace(/\s+$/g,"")}function r(e){return e.replace(new RegExp("^(\\t|[ ]{1,4})","gm"),"")}function o(e,t){return e.indexOf(t)!=-1}function i(e,t){return e.replace(/<[^>]*>?/gi,function(e){return e.match(t)?e:""})}function a(e,t){for(var n={},r=0;r<e.length;r++)n[e[r]]=e[r];for(r=0;r<t.length;r++)n[t[r]]=t[r];var o=[];for(var i in n)n.hasOwnProperty(i)&&o.push(n[i]);return o}function s(e){return""!=e.charAt(0)&&(e=""+e),""!=e.charAt(e.length-1)&&(e+=""),e}function l(e){return""==e.charAt(0)&&(e=e.substr(1)),""==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e}function c(e,t){return i(u(e,t),g)}function u(e,t){var n=t.blockGamutHookCallback(e);return n=h(n),n=n.replace(/~D/g,"$$").replace(/~T/g,"~"),n=t.previousPostConversion(n)}function p(e){return e.replace(/\\\|/g,"~I").replace(/\\:/g,"~i")}function d(e){return e.replace(/~I/g,"|").replace(/~i/g,":")}function h(e){return e=e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)})}function f(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function m(e,t){var n=t;return n=n.replace(/&\#8220;/g,'"'),n=n.replace(/&\#8221;/g,'"'),n=n.replace(/&\#8216;/g,"'"),n=n.replace(/&\#8217;/g,"'"),n=n.replace(/&\#8212;/g,"---"),n=n.replace(/&\#8211;/g,"--"),n=n.replace(/&\#8230;/g,"...")}var g=new RegExp(["^(<\\/?(a|abbr|acronym|applet|area|b|basefont|","bdo|big|button|cite|code|del|dfn|em|figcaption|","font|i|iframe|img|input|ins|kbd|label|map|","mark|meter|object|param|progress|q|ruby|rp|rt|s|","samp|script|select|small|span|strike|strong|","sub|sup|textarea|time|tt|u|var|wbr)[^>]*>|","<(br)\\s?\\/?>)$"].join(""),"i");Array.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1}),e.Extra=function(){this.converter=null,this.hashBlocks=[],this.footnotes={},this.usedFootnotes=[],this.attributeBlocks=!1,this.googleCodePrettify=!1,this.highlightJs=!1,this.tableClass="",this.tabWidth=4},e.Extra.init=function(t,n){var r=new e.Extra,i=[],a=[],s=[],l=["unHashExtraBlocks"];return n=n||{},n.extensions=n.extensions||["all"],o(n.extensions,"all")&&(n.extensions=["tables","fenced_code_gfm","def_list","attr_list","footnotes","smartypants","strikethrough","newlines"]),a.push("wrapHeaders"),o(n.extensions,"attr_list")&&(i.push("hashFcbAttributeBlocks"),a.push("hashHeaderAttributeBlocks"),l.push("applyAttributeBlocks"),r.attributeBlocks=!0),o(n.extensions,"fenced_code_gfm")&&(a.push("fencedCodeBlocks"),i.push("fencedCodeBlocks")),o(n.extensions,"tables")&&a.push("tables"),o(n.extensions,"def_list")&&a.push("definitionLists"),o(n.extensions,"footnotes")&&(i.push("stripFootnoteDefinitions"),a.push("doFootnotes"),l.push("printFootnotes")),o(n.extensions,"smartypants")&&l.push("runSmartyPants"),o(n.extensions,"strikethrough")&&s.push("strikethrough"),o(n.extensions,"newlines")&&s.push("newlines"),t.hooks.chain("postNormalization",function(e){return r.doTransform(i,e)+"\n"}),t.hooks.chain("preBlockGamut",function(e,t){return r.blockGamutHookCallback=t,e=p(e),e=r.doTransform(a,e)+"\n",e=d(e)}),t.hooks.chain("postSpanGamut",function(e){return r.doTransform(s,e)}),r.previousPostConversion=t.hooks.postConversion,t.hooks.chain("postConversion",function(e){return e=r.doTransform(l,e),r.hashBlocks=[],r.footnotes={},r.usedFootnotes=[],e}),"highlighter"in n&&(r.googleCodePrettify="prettify"===n.highlighter,r.highlightJs="highlight"===n.highlighter),"table_class"in n&&(r.tableClass=n.table_class),r.converter=t,r},e.Extra.prototype.doTransform=function(e,t){for(var n=0;n<e.length;n++)t=this[e[n]](t);return t},e.Extra.prototype.hashExtraBlock=function(e){return"\n<p>~X"+(this.hashBlocks.push(e)-1)+"X</p>\n"},e.Extra.prototype.hashExtraInline=function(e){return"~X"+(this.hashBlocks.push(e)-1)+"X"},e.Extra.prototype.unHashExtraBlocks=function(e){function t(){var r=!1;e=e.replace(/(?:<p>)?~X(\d+)X(?:<\/p>)?/g,function(e,t){r=!0;var o=parseInt(t,10);return n.hashBlocks[o]}),r===!0&&t()}var n=this;return t(),e},e.Extra.prototype.wrapHeaders=function(e){function t(e){return"\n"+e+"\n"}return e=e.replace(/^.+[ \t]*\n=+[ \t]*\n+/gm,t),e=e.replace(/^.+[ \t]*\n-+[ \t]*\n+/gm,t),e=e.replace(/^\#{1,6}[ \t]*.+?[ \t]*\#*\n+/gm,t)};var v="\\{[ \\t]*((?:[#.][-_:a-zA-Z0-9]+[ \\t]*)+)\\}",y=new RegExp("^(#{1,6}.*#{0,6})[ \\t]+"+v+"[ \\t]*(?:\\n|0x03)","gm"),b=new RegExp("^(.*)[ \\t]+"+v+"[ \\t]*\\n(?=[\\-|=]+\\s*(?:\\n|0x03))","gm"),w=new RegExp("^(```[ \\t]*[^{\\s]*)[ \\t]+"+v+"[ \\t]*\\n(?=([\\s\\S]*?)\\n```[ \\t]*(\\n|0x03))","gm");e.Extra.prototype.hashHeaderAttributeBlocks=function(e){function t(e,t,r){return"<p>~XX"+(n.hashBlocks.push(r)-1)+"XX</p>\n"+t+"\n"}var n=this;return e=e.replace(y,t),e=e.replace(b,t)},e.Extra.prototype.hashFcbAttributeBlocks=function(e){function t(e,t,r){return"<p>~XX"+(n.hashBlocks.push(r)-1)+"XX</p>\n"+t+"\n"}var n=this;return e.replace(w,t)},e.Extra.prototype.applyAttributeBlocks=function(e){var t=this,n=new RegExp('<p>~XX(\\d+)XX</p>[\\s]*(?:<(h[1-6]|pre)(?: +class="(\\S+)")?(>[\\s\\S]*?</\\2>))',"gm");return e=e.replace(n,function(e,n,r,o,i){if(!r)return"";for(var s=parseInt(n,10),l=t.hashBlocks[s],c=l.match(/#[^\s#.]+/g)||[],u=c[0]?' id="'+c[0].substr(1,c[0].length-1)+'"':"",p=l.match(/\.[^\s#.]+/g)||[],d=0;d<p.length;d++)p[d]=p[d].substr(1,p[d].length-1);var h="";return o&&(p=a(p,[o])),p.length>0&&(h=' class="'+p.join(" ")+'"'),"<"+r+u+h+i})},e.Extra.prototype.tables=function(e){function n(e,n,o,i,a,s){n=n.replace(/^ *[|]/m,""),o=o.replace(/^ *[|]/m,""),i=i.replace(/^ *[|]/gm,""),n=n.replace(/[|] *$/m,""),o=o.replace(/[|] *$/m,""),i=i.replace(/[|] *$/gm,""),alignspecs=o.split(/ *[|] */),align=[];for(var l=0;l<alignspecs.length;l++){var u=alignspecs[l];u.match(/^ *-+: *$/m)?align[l]=' style="text-align:right;"':u.match(/^ *:-+: *$/m)?align[l]=' style="text-align:center;"':u.match(/^ *:-+ *$/m)?align[l]=' style="text-align:left;"':align[l]=""}var p=n.split(/ *[|] */),d=p.length,h=r.tableClass?' class="'+r.tableClass+'"':"",f=["<table",h,">\n","<thead>\n","<tr>\n"].join("");for(l=0;l<d;l++){var m=c(t(p[l]),r);f+=["  <th",align[l],">",m,"</th>\n"].join("")}f+="</tr>\n</thead>\n";var g=i.split("\n");for(l=0;l<g.length;l++)if(!g[l].match(/^\s*$/)){for(var v=g[l].split(/ *[|] */),y=d-v.length,b=0;b<y;b++)v.push("");for(f+="<tr>\n",b=0;b<d;b++){var w=c(t(v[b]),r);f+=["  <td",align[b],">",w,"</td>\n"].join("")}f+="</tr>\n"}return f+="</table>\n",r.hashExtraBlock(f)}var r=this,o=new RegExp(["^","[ ]{0,3}","[|]","(.+)\\n","[ ]{0,3}","[|]([ ]*[-:]+[-| :]*)\\n","(","(?:[ ]*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm"),i=new RegExp(["^","[ ]{0,3}","(\\S.*[|].*)\\n","[ ]{0,3}","([-:]+[ ]*[|][-| :]*)\\n","(","(?:.*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm");return e=e.replace(o,n),e=e.replace(i,n)},e.Extra.prototype.stripFootnoteDefinitions=function(e){var t=this;return e=e.replace(/\n[ ]{0,3}\[\^(.+?)\]\:[ \t]*\n?([\s\S]*?)\n{1,2}((?=\n[ ]{0,3}\S)|$)/g,function(e,n,r){return n=f(n),r+="\n",r=r.replace(/^[ ]{0,3}/g,""),t.footnotes[n]=r,"\n"})},e.Extra.prototype.doFootnotes=function(e){var t=this;if(t.isConvertingFootnote===!0)return e;var n=0;return e=e.replace(/\[\^(.+?)\]/g,function(e,r){var o=f(r),i=t.footnotes[o];if(void 0===i)return e;n++,t.usedFootnotes.push(o);var a='<a href="#fn:'+o+'" id="fnref:'+o+'" title="See footnote" class="footnote">'+n+"</a>";return t.hashExtraInline(a)})},e.Extra.prototype.printFootnotes=function(e){var t=this;if(0===t.usedFootnotes.length)return e;e+='\n\n<div class="footnotes">\n<hr>\n<ol>\n\n';for(var n=0;n<t.usedFootnotes.length;n++){var r=t.usedFootnotes[n],o=t.footnotes[r];t.isConvertingFootnote=!0;var i=c(o,t);delete t.isConvertingFootnote,e+='<li id="fn:'+r+'">'+i+' <a href="#fnref:'+r+'" title="Return to article" class="reversefootnote">&#8617;</a></li>\n\n'}return e+="</ol>\n</div>"},e.Extra.prototype.fencedCodeBlocks=function(e){function t(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~")}var n=this;return e=e.replace(/(?:^|\n)```[ \t]*(\S*)[ \t]*\n([\s\S]*?)\n```[ \t]*(?=\n)/g,function(e,r,o){var i=r,a=o,s=n.googleCodePrettify?' class="prettyprint"':"",l="";i&&(l=n.googleCodePrettify||n.highlightJs?' class="language-'+i+'"':' class="'+i+'"');var c=["<pre",s,"><code",l,">",t(a),"</code></pre>"].join("");return n.hashExtraBlock(c)})},e.Extra.prototype.educatePants=function(e){var t=this,n="",r=0;e.replace(/(?:<!--[\s\S]*?-->)|(<)([a-zA-Z1-6]+)([^\n]*?>)([\s\S]*?)(<\/\2>)/g,function(o,i,a,s,l,c,u){var p=e.substring(r,u);return n+=t.applyPants(p),t.smartyPantsLastChar=n.substring(n.length-1),r=u+o.length,i?(/code|kbd|pre|script|noscript|iframe|math|ins|del|pre/i.test(a)?t.smartyPantsLastChar=l.substring(l.length-1):l=t.educatePants(l),void(n+=i+a+s+l+c)):void(n+=o)});var o=e.substring(r);return n+=t.applyPants(o),t.smartyPantsLastChar=n.substring(n.length-1),n},e.Extra.prototype.applyPants=function(e){return e=e.replace(/---/g,"&#8212;").replace(/--/g,"&#8211;"),e=e.replace(/\.\.\./g,"&#8230;").replace(/\.\s\.\s\./g,"&#8230;"),e=e.replace(/``/g,"&#8220;").replace(/''/g,"&#8221;"),/^'$/.test(e)?/\S/.test(this.smartyPantsLastChar)?"&#8217;":"&#8216;":/^"$/.test(e)?/\S/.test(this.smartyPantsLastChar)?"&#8221;":"&#8220;":(e=e.replace(/^'(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8217;"),e=e.replace(/^"(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8221;"),e=e.replace(/"'(?=\w)/g,"&#8220;&#8216;"),e=e.replace(/'"(?=\w)/g,"&#8216;&#8220;"),e=e.replace(/'(?=\d{2}s)/g,"&#8217;"),e=e.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)'(?=\w)/g,"$1&#8216;"),e=e.replace(/([^\s\[\{\(\-])'/g,"$1&#8217;"),e=e.replace(/'(?=\s|s\b)/g,"&#8217;"),e=e.replace(/'/g,"&#8216;"),e=e.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)"(?=\w)/g,"$1&#8220;"),e=e.replace(/([^\s\[\{\(\-])"/g,"$1&#8221;"),e=e.replace(/"(?=\s)/g,"&#8221;"),e=e.replace(/"/gi,"&#8220;"))},e.Extra.prototype.runSmartyPants=function(e){return this.smartyPantsLastChar="",e=this.educatePants(e),e=e.replace(/(<([a-zA-Z1-6]+)\b([^\n>]*?)(\/)?>)/g,m)},e.Extra.prototype.definitionLists=function(e){var n=new RegExp(["(\\x02\\n?|\\n\\n)","(?:","(","(","[ ]{0,3}","((?:[ \\t]*\\S.*\\n)+)","\\n?","[ ]{0,3}:[ ]+",")","([\\s\\S]+?)","(","(?=\\0x03)","|","(?=","\\n{2,}","(?=\\S)","(?!","[ ]{0,3}","(?:\\S.*\\n)+?","\\n?","[ ]{0,3}:[ ]+",")","(?!","[ ]{0,3}:[ ]+",")",")",")",")",")"].join(""),"gm"),r=this;return e=s(e),e=e.replace(n,function(e,n,o){var i=t(r.processDefListItems(o));return i="<dl>\n"+i+"\n</dl>",n+r.hashExtraBlock(i)+"\n\n"}),l(e)},e.Extra.prototype.processDefListItems=function(e){var o=this,i=new RegExp(["(\\x02\\n?|\\n\\n+)","(","[ ]{0,3}","(?![:][ ]|[ ])","(?:\\S.*\\n)+?",")","(?=\\n?[ ]{0,3}:[ ])"].join(""),"gm"),a=new RegExp(["\\n(\\n+)?","(","[ ]{0,3}","[:][ ]+",")","([\\s\\S]+?)","(?=\\n*","(?:","\\n[ ]{0,3}[:][ ]|","<dt>|\\x03",")",")"].join(""),"gm");return e=s(e),e=e.replace(/\n{2,}(?=\\x03)/,"\n"),e=e.replace(i,function(e,n,r){for(var i=t(r).split("\n"),a="",s=0;s<i.length;s++){var l=i[s];l=c(t(l),o),a+="\n<dt>"+l+"</dt>"}return a+"\n"}),e=e.replace(a,function(e,t,i,a){return t||a.match(/\n{2,}/)?(a=Array(i.length+1).join(" ")+a,a=r(a)+"\n\n",a="\n"+u(a,o)+"\n"):(a=n(a),a=c(r(a),o)),"\n<dd>"+a+"</dd>\n"}),l(e)},e.Extra.prototype.strikethrough=function(e){return e.replace(/([\W_]|^)~T~T(?=\S)([^\r]*?\S[\*_]*)~T~T([\W_]|$)/g,"$1<del>$2</del>$3")},e.Extra.prototype.newlines=function(e){return e.replace(/(<(?:br|\/li)>)?\n/g,function(e,t){return t?e:" <br>\n"})}}),function(){var e=window.log||$.noop,t={fileError:function(e,t,n){window.alert(n)}},n=window.FileReader||window.File&&window.File.prototype.getAsBinary,r=!!window.FormData,o=window.FileReader||window.File&&window.File.prototype.getAsDataURL,i=!!document.createElement("canvas").toDataURL,a=i&&window.atob,s=!!document.createElement("canvas").mozGetAsFile,l=window.XMLHttpRequest&&window.XMLHttpRequest.prototype.sendAsBinary||window.Blob&&window.Uint8Array&&window.ProgressEvent||window.ArrayBuffer&&window.BlobBuilder,c=!!window.FormData,u=!!document.createElement("canvas").toDataURL,p=n&&l||r&&c,d=o&&(a&&l||s&&c),h=o,f=o&&i,m=function(e){return e.substring(e.indexOf(",")+1,e.length)},g=function(t,n){var o={type:n.type||"",size:n.size||n.fileSize,name:n.name||n.fileName};if(t.resizeImage&&!d&&t.allowUploadOriginalImage&&(e("WARN: Fall back to upload original un-resized image."),t.resizeImage=!1),
!t.resizeImage){if(t.fileType&&t.fileType.test&&!t.fileType.test(o.name.substr(o.name.lastIndexOf(".")+1)))return e("ERROR: Invalid Filetype."),void t.fileError.call(this,o,"INVALID_FILETYPE","Invalid filetype.");if(t.fileMaxSize&&n.size>t.fileMaxSize)return e("ERROR: File exceeds size limit."),void t.fileError.call(this,o,"FILE_EXCEEDS_SIZE_LIMIT","File exceeds size limit.")}if(!t.resizeImage&&r)e("INFO: Bypass file reading, insert file object into FormData object directly."),y(t,"file",n,o);else if(window.FileReader){e("INFO: Using FileReader to do asynchronously file reading.");var i=new FileReader;i.onerror=function(n){if(n.target.error)switch(n.target.error){case 8:e("ERROR: File not found."),t.fileError.call(this,o,"FILE_NOT_FOUND","File not found.");break;case 24:e("ERROR: File not readable."),t.fileError.call(this,o,"IO_ERROR","File not readable.");break;case 18:e("ERROR: File cannot be access due to security constrant."),t.fileError.call(this,o,"SECURITY_ERROR","File cannot be access due to security constrant.");break;case 20:}},t.resizeImage?(i.onloadend=function(e){var r=e.target.result;v(t,r,o,n)},i.readAsDataURL(n)):l?(i.onloadend=function(e){var n=e.target.result;y(t,"bin",n,o)},i.readAsBinaryString(n)):t.allowDataInBase64?(i.onloadend=function(e){y(t,"base64",m(e.target.result),o)},i.readAsDataURL(n)):(e("ERROR: No available method to extract file; allowDataInBase64 not set."),t.fileError.call(this,o,"NO_BIN_SUPPORT_AND_BASE64_NOT_SET","No available method to extract file; allowDataInBase64 not set."))}else if(window.File&&window.File.prototype.getAsBinary)if(e("WARN: FileReader does not exist, UI will be blocked when reading big file."),t.resizeImage){try{var a=n.getAsDataURL()}catch(n){return e("ERROR: File not readable."),void t.fileError.call(this,o,"IO_ERROR","File not readable.")}v(t,dataurl,o,n)}else{try{var a=n.getAsBinary()}catch(n){return e("ERROR: File not readable."),void t.fileError.call(this,o,"IO_ERROR","File not readable.")}y(t,"bin",a,o)}else t.fallback?t.fallback():t.fileError.call(this,o,"NOT_SUPPORT","ERROR: No available method to extract file; this browser is not supported.")},v=function(t,n,r,o){var p=new Image;p.onerror=function(){e("ERROR: <img> failed to load, file is not a supported image format."),t.fileError.call(this,r,"FILE_NOT_IMAGE","File is not a supported image format.")},p.onload=function(){var n=document.createElement("canvas"),d=function(n){t.imageType&&"auto"!==t.imageType||("image/jpeg"===r.type?t.imageType="jpeg":t.imageType="png");var p={type:"image/"+t.imageType,name:r.name.substr(0,r.name.indexOf("."))+".resized."+t.imageType};if(s&&c){var d=n.mozGetAsFile(p.name,"image/"+t.imageType);p.size=o.size||o.fileSize,y(t,"file",d,p)}else if(a&&l){var h=window.atob(m(n.toDataURL("image/"+t.imageType)));p.size=h.length,y(t,"bin",h,p)}else t.allowDataInBase64&&i&&u?y(t,"base64",m(n.toDataURL("image/"+t.imageType)),p):(e("ERROR: No available method to extract image; allowDataInBase64 not set."),t.fileError.call(this,r,"NO_BIN_SUPPORT_AND_BASE64_NOT_SET","No available method to extract file; allowDataInBase64 not set."))};t.resizeImage(p,n,d)},p.src=n},y=function(t,n,r,o){if(c&&"file"===n){e("INFO: Using FormData to construct form.");var i=new FormData;i.append(t.name,r),t.processData=!1,t.contentType=!1,t.__beforeSend=t.beforeSend,t.beforeSend=function(e,t){if(t.data=i,t.__beforeSend)return t.__beforeSend.call(this,e,t)}}else if(l&&"bin"===n){e("INFO: Concat our own multipart/form-data data string."),o.type||(o.type="application/octet-stream"),/[^\x20-\x7E]/.test(o.name)&&(e("INFO: Filename contains non-ASCII code, do UTF8-binary string conversion."),o.name_bin=unescape(encodeURIComponent(o.name)));var a="xhrupload-"+parseInt(Math.random()*(2<<16));t.contentType="multipart/form-data; boundary="+a;var i="--"+a+'\ncontent-disposition: form-data; name="'+t.name+'"; filename="'+(o.name_bin||o.name)+'"\nContent-Type: '+o.type+"\n\n"+r+"\n\n--"+a+"--";if(window.XMLHttpRequest&&window.XMLHttpRequest.prototype.sendAsBinary)e("INFO: Pass binary string to xhr."),t.data=i;else if(window.Blob&&window.Uint8Array&&window.ProgressEvent){e("INFO: Make XH2 blob string");for(var s=new Uint8Array(i.length),u=0;u<i.length;u++)s[u]=i.charCodeAt(u);var p=s.buffer;t.processData=!1,t.__beforeSend=t.beforeSend,t.beforeSend=function(e,t){if(t.data=p,t.__beforeSend)return t.__beforeSend.call(this,e,t)}}else{e("INFO: Convert binary string into Blob.");var d=new ArrayBuffer(i.length),s=new Uint8Array(d);$.each(i,function(e,t){s[e]=t.charCodeAt(0)});var h=new BlobBuilder;h.append(d);var p=h.getBlob();t.processData=!1,t.__beforeSend=t.beforeSend,t.beforeSend=function(e,t){if(t.data=p,t.__beforeSend)return t.__beforeSend.call(this,e,t)}}}else{if(!t.allowDataInBase64||"base64"!==n)return e("ERROR: Data is not given in processable form."),void t.fileError.call(this,o,"INTERNAL_ERROR","Data is not given in processable form.");e("INFO: Concat our own multipart/form-data data string; send the file in base64 because binary xhr is not supported."),o.type||(o.type="application/octet-stream"),t.url+="?enc=base64";var a="xhrupload-"+parseInt(Math.random()*(2<<16));t.contentType="multipart/form-data; boundary="+a,t.data="--"+a+'\ncontent-disposition: form-data; name="'+t.name+'"; filename="'+encodeURIComponent(o.name)+'.base64"\nContent-Transfer-Encoding: base64\nContent-Type: '+o.type+"\n\n"+r+"\n\n--"+a+"--"}b(t)},b=function(t){e("INFO: Sending file."),"string"==typeof t.data&&l&&(e("INFO: Using xhr.sendAsBinary."),t.___beforeSend=t.beforeSend,t.beforeSend=function(e,t){if(window.XMLHttpRequest.prototype.sendAsBinary&&(e.send=e.sendAsBinary),t.___beforeSend)return t.___beforeSend.call(this,e,t)}),$.ajax(t)};$.fn.fileUpload=function(n){return this.each(function(r,o){$(o).is("input[type=file]")&&(e("INFO: binding onchange event to a input[type=file]."),$(o).bind("change",function(){if(!this.files)return void(n.fallback&&n.fallback());if(!this.files.length)return void e("ERROR: no file selected.");this.files.length>1&&e("WARN: Multiple file upload not implemented yet, only first file will be uploaded."),n.name=$(this).attr("name");var r=this.files[0];if(n.callback){var i=function(e){n.url=n.url||e,g($.extend({},t,n),r)};n.callback(i)}else if($(o).parents("#localPic").length){var a=$(o).val();a.indexOf("\\fakepath")!==-1&&(a=a.split("\\fakepath\\")[1]),$("#fileName").val(a),$(".done-btn").click(function(){g($.extend({},t,n),r)})}else g($.extend({},t,n),this.files[0]);this.form||e("WARN: Unable to reset file selection, upload won't be triggered again if user selects the same file.")})),$(o).is("form")?e("ERROR: <form> not implemented yet."):(e("INFO: binding ondrop event."),$(o).bind("dragover",function(e){return!1}).bind("drop",function(r){return r.originalEvent.dataTransfer.files?r.originalEvent.dataTransfer.files.length?(!r.originalEvent.dataTransfer.files.length>1&&e("WARN: Multiple file upload not implemented yet, only first file will be uploaded."),g($.extend({},t,n),r.originalEvent.dataTransfer.files[0]),!1):(e('ERROR: User had dropped a virual file (e.g. "My Computer")'),!1):(e("ERROR: No FileList object present; user might had dropped text."),!1)}))}),this},$.fileUploadSupported=p,$.imageUploadSupported=d,$.fileUploadAsBase64Supported=h,$.imageUploadAsBase64Supported=f}(),define("fileUpload",["jquery"],function(e){return function(){var t;return t||e.$.fn.fileUpload}}(this)),define("pagedown_editor",["jquery","pagedown_sanitizer","sfModal","pagedown_extra","fileUpload"],function(e,t,n){"use strict";function r(){}function o(e,t){t=t||"wmd-input",this.buttonBar=f.getElementById("wmd-button-bar"+e),this.preview=f.getElementById("wmd-preview"+e),this.input=f.getElementById(t+e)}function i(e,t){var n,r,o,i=this,s=[],l=0,c="none",u=function(e,t){c!=e&&(c=e,t||h()),y.isIE&&"moving"==c?o=null:r=setTimeout(d,1)},d=function(e){o=new a(t,e),r=void 0};this.setCommandMode=function(){c="command",h(),r=setTimeout(d,0)},this.canUndo=function(){return l>1},this.canRedo=function(){return!!s[l+1]},this.undo=function(){i.canUndo()&&(n?(n.restore(),n=null):(s[l]=new a(t),s[--l].restore(),e&&e())),c="none",t.input.focus(),d()},this.redo=function(){i.canRedo()&&(s[++l].restore(),e&&e()),c="none",t.input.focus(),d()};var h=function(){var r=o||new a(t);return!!r&&("moving"==c?void(n||(n=r)):(n&&(s[l-1].text!=n.text&&(s[l++]=n),n=null),s[l++]=r,s[l+1]=null,void(e&&e())))},f=function(e){var t=!1;if((e.ctrlKey||e.metaKey)&&!e.altKey){var n=e.charCode||e.keyCode,r=String.fromCharCode(n);switch(r.toLowerCase()){case"y":i.redo(),t=!0;break;case"z":e.shiftKey?i.redo():i.undo(),t=!0}}if(t)return e.preventDefault&&e.preventDefault(),void(window.event&&(window.event.returnValue=!1))},m=function(e){if(!e.ctrlKey&&!e.metaKey){var t=e.keyCode;t>=33&&t<=40||t>=63232&&t<=63235?u("moving"):8==t||46==t||127==t?u("deleting"):13==t?u("newlines"):27==t?u("escape"):(t<16||t>20||9===t)&&91!=t&&u("typing")}},g=function(){p.addEvent(t.input,"keypress",function(e){!e.ctrlKey&&!e.metaKey||e.altKey||89!=e.keyCode&&90!=e.keyCode||e.preventDefault()});var e=function(){(y.isIE||o&&o.text!=t.input.value)&&void 0==r&&(c="paste",h(),d())};p.addEvent(t.input,"keydown",f),p.addEvent(t.input,"keydown",m),p.addEvent(t.input,"mousedown",function(){u("moving")}),t.input.onpaste=e,t.input.ondrop=e},v=function(){g(),d(!0),h()};v()}function a(e,t){var n=this,o=e.input;this.init=function(){p.isVisible(o)&&(!t&&f.activeElement&&f.activeElement!==o||(this.setInputAreaSelectionStartEnd(),this.scrollTop=o.scrollTop,(!this.text&&o.selectionStart||0===o.selectionStart)&&(this.text=o.value)))},this.setInputAreaSelection=function(){if(p.isVisible(o))if(void 0===o.selectionStart||y.isOpera){if(f.selection){if(f.activeElement&&f.activeElement!==o)return;o.focus();var e=o.createTextRange();e.moveStart("character",-o.value.length),e.moveEnd("character",-o.value.length),e.moveEnd("character",n.end),e.moveStart("character",n.start),e.select()}}else o.focus(),o.selectionStart=n.start,o.selectionEnd=n.end,o.scrollTop=n.scrollTop},this.setInputAreaSelectionStartEnd=function(){if(e.ieCachedRange||!o.selectionStart&&0!==o.selectionStart){if(f.selection){n.text=p.fixEolChars(o.value);var t=e.ieCachedRange||f.selection.createRange(),r=p.fixEolChars(t.text),i="",a=i+r+i;t.text=a;var s=p.fixEolChars(o.value);t.moveStart("character",-a.length),t.text=r,n.start=s.indexOf(i),n.end=s.lastIndexOf(i)-i.length;var l=n.text.length-p.fixEolChars(o.value).length;if(l){for(t.moveStart("character",-r.length);l--;)r+="\n",n.end+=1;t.text=r}e.ieCachedRange&&(n.scrollTop=e.ieCachedScrollTop),e.ieCachedRange=null,this.setInputAreaSelection()}}else n.start=o.selectionStart,n.end=o.selectionEnd},this.restore=function(){void 0!=n.text&&n.text!=o.value&&(o.value=n.text),this.setInputAreaSelection(),o.scrollTop=n.scrollTop},this.getChunks=function(){var e=new r;return e.before=p.fixEolChars(n.text.substring(0,n.start)),e.startTag="",e.selection=p.fixEolChars(n.text.substring(n.start,n.end)),e.endTag="",e.after=p.fixEolChars(n.text.substring(n.end)),e.scrollTop=n.scrollTop,e},this.setChunks=function(e){e.before=e.before+e.startTag,e.after=e.endTag+e.after,this.start=e.before.length,this.end=e.before.length+e.selection.length,this.text=e.before+e.selection+e.after,this.scrollTop=e.scrollTop},this.init()}function s(e,t,n){var r,o,i,a=3e3,s="delayed",l=function(e,t){p.addEvent(e,"input",t),e.onpaste=t,e.ondrop=t,p.addEvent(e,"keypress",t),p.addEvent(e,"keydown",t)},c=function(){var e=0;return window.innerHeight?e=window.pageYOffset:f.documentElement&&f.documentElement.scrollTop?e=f.documentElement.scrollTop:f.body&&(e=f.body.scrollTop),e},u=function(){if(t.preview){var n=t.input.value;if(!n||n!=i){i=n;var r=(new Date).getTime();n=e.makeHtml(n);var a=(new Date).getTime();o=a-r,x(n)}}},h=function(){if(r&&(clearTimeout(r),r=void 0),"manual"!==s){var e=0;"delayed"===s&&(e=o),e>a&&(e=a),r=setTimeout(u,e)}},m=function(e){return e.scrollHeight<=e.clientHeight?1:e.scrollTop/(e.scrollHeight-e.clientHeight)},g=function(){t.preview&&(t.preview.scrollTop=(t.preview.scrollHeight-t.preview.clientHeight)*m(t.preview))};this.refresh=function(e){e?(i="",u()):h()},this.processingTime=function(){return o};var v,b=!0,w=function(e){var n=t.preview,r=n.parentNode,o=n.nextSibling;r.removeChild(n),n.innerHTML=e,o?r.insertBefore(n,o):r.appendChild(n)},_=function(e){t.preview.innerHTML=e},k=function(e){if(v)return v(e);try{_(e),v=_}catch(t){v=w,v(e)}},x=function(e){var r=d.getTop(t.input)-c();if(t.preview&&(k(e),n()),g(),b)return void(b=!1);var o=d.getTop(t.input)-c();y.isIE?setTimeout(function(){window.scrollBy(0,o-r)},0):window.scrollBy(0,o-r)},D=function(){l(t.input,h),u(),t.preview&&(t.preview.scrollTop=0)};D()}function l(e,t,n,r,o,i,s){function l(e){if(m.focus(),e.textOp){n&&n.setCommandMode();var o=new a(t);if(!o)return;var i=o.getChunks(),s=function(){m.focus(),i&&o.setChunks(i),o.restore(),r.refresh()},l=e.textOp(i,s);l||s()}e.execute&&e.execute(n)}function c(e,n){var r="0px",o="-20px",i="-40px",a=e.getElementsByTagName("a")[0];n?(a.style.backgroundPosition=e.XShift+" "+r,e.onmouseover=function(){a.style.backgroundPosition=this.XShift+" "+i},e.onmouseout=function(){a.style.backgroundPosition=this.XShift+" "+r},y.isIE&&(e.onmousedown=function(){f.activeElement&&f.activeElement!==t.input||(t.ieCachedRange=document.selection.createRange(),t.ieCachedScrollTop=t.input.scrollTop)}),e.isHelp||(e.onclick=function(){return this.onmouseout&&this.onmouseout(),l(this),!1})):(a.style.backgroundPosition=e.XShift+" "+o,e.onmouseover=e.onmouseout=e.onclick=function(){})}function u(e){return"string"==typeof e&&(e=o[e]),function(){e.apply(o,arguments)}}function d(){var n=t.buttonBar,r=document.createElement("ul");r.id="wmd-button-row"+e,r.className="editor__menu clearfix",r=n.appendChild(r);var o=0,a=function(t,n,i,a){var s=document.createElement("li");s.className="wmd-button",s.style.left=o+"px",o+=25;var l=document.createElement("a");return l.className="editor__menu--bold",s.id=t+e,s.appendChild(l),s.title=n,s.XShift=i,a&&(s.textOp=a),c(s,!0),r.appendChild(s),s},l=function(t){var n=document.createElement("li");n.className="editor__menu--divider wmd-spacer"+t,n.id="wmd-spacer"+t+e,r.appendChild(n),o+=25};v.bold=a("wmd-bold-button",s("bold"),"0px",u("doBold")),v.italic=a("wmd-italic-button",s("italic"),"-20px",u("doItalic")),l(1),v.link=a("wmd-link-button",s("link"),"-40px",u(function(e,t){return this.doLinkOrImage(e,t,!1)})),v.quote=a("wmd-quote-button",s("quote"),"-60px",u("doBlockquote")),v.code=a("wmd-code-button",s("code"),"-80px",u("doCode")),v.image=a("wmd-image-button",s("image"),"-100px",u(function(e,t){return this.doLinkOrImage(e,t,!0)})),l(2),v.olist=a("wmd-olist-button",s("olist"),"-120px",u(function(e,t){this.doList(e,t,!0)})),v.ulist=a("wmd-ulist-button",s("ulist"),"-140px",u(function(e,t){this.doList(e,t,!1)})),v.heading=a("wmd-heading-button",s("heading"),"-160px",u("doHeading")),v.hr=a("wmd-hr-button",s("hr"),"-180px",u("doHorizontalRule")),l(3),v.undo=a("wmd-undo-button",s("undo"),"-200px",null),v.undo.execute=function(e){e&&e.undo()};var p=s(/win/.test(g.platform.toLowerCase())?"redo":"redomac");if(v.redo=a("wmd-redo-button",p,"-220px",null),v.redo.execute=function(e){e&&e.redo()},i){var d=document.createElement("li"),f=document.createElement("span");d.appendChild(f),d.className="wmd-button wmd-help-button",d.id="wmd-help-button"+e,d.XShift="-240px",d.isHelp=!0,d.style.right="0px",d.title=s("help"),d.onclick=i.handler,c(d,!0),r.appendChild(d),v.help=d}h(),l(4),v.help=a("wmd-help-button",s("help"),"-300px")}function h(){n&&(c(v.undo,n.canUndo()),c(v.redo,n.canRedo()))}var m=t.input,v={};d();var b="keydown";y.isOpera&&(b="keypress"),p.addEvent(m,b,function(e){if((e.ctrlKey||e.metaKey)&&!e.altKey&&!e.shiftKey){var t=e.charCode||e.keyCode,n=String.fromCharCode(t).toLowerCase();switch(n){case"b":e.preventDefault(),l(v.bold);break;case"i":e.preventDefault(),l(v.italic);break;case"l":e.preventDefault(),l(v.link);break;case"q":e.preventDefault(),l(v.quote);break;case"k":e.preventDefault(),l(v.code);break;case"g":e.preventDefault(),l(v.image);break;case"o":e.preventDefault(),l(v.olist);break;case"u":e.preventDefault(),l(v.ulist);break;case"h":e.preventDefault(),l(v.heading);break;case"r":e.preventDefault(),l(v.hr);break;case"y":e.preventDefault(),l(v.redo);break;case"z":e.shiftKey?(e.preventDefault(),l(v.redo)):(e.preventDefault(),l(v.undo));break;default:return}}}),p.addEvent(m,"keyup",function(e){if(e.shiftKey&&!e.ctrlKey&&!e.metaKey){var t=e.charCode||e.keyCode;if(13===t){var n={};n.textOp=u("doAutoindent"),l(n)}}}),y.isIE&&p.addEvent(m,"keydown",function(e){var t=e.keyCode;if(27===t)return!1}),this.setUndoRedoButtonStates=h}function c(e,t){this.hooks=e,this.getString=t}function u(e){return e.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(e,t,n){return t=t.replace(/\?.*$/,function(e){return e.replace(/\+/g," ")}),t=decodeURIComponent(t),t=encodeURI(t).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"),t=t.replace(/\?.*$/,function(e){return e.replace(/\+/g,"%2b")}),n&&(n=n.trim?n.trim():n.replace(/^\s*/,"").replace(/\s*$/,""),n=n.replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),n?t+' "'+n+'"':t})}var p={},d={},h={},f=window.document,m=window.RegExp,g=window.navigator,v={lineLength:72},y={isIE:/msie/.test(g.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(g.userAgent.toLowerCase())||/msie 5/.test(g.userAgent.toLowerCase()),isOpera:/opera/.test(g.userAgent.toLowerCase())},b={bold:"加粗 <strong> Ctrl+B",boldexample:"加粗文字",italic:"斜体 <em> Ctrl+I",italicexample:"斜体文字",link:"链接 <a> Ctrl+L",linkdescription:"链接描述",linkdialog:'<input type="text" id="editorLinkText" class="form-control text-28" placeholder="请输入链接地址">',quote:"引用 <blockquote> Ctrl+Q",quoteexample:"引用文字",code:"代码 <pre><code> Ctrl+K",codeexample:"请输入代码",image:"图片 <img> Ctrl+G",imagedescription:"图片描述",imagedialog:'<ul class="nav nav-tabs" role="tablist"><li class="active"><a href="#localPic" role="tab" data-toggle="tab">本地上传</a></li>    <li><a href="#remotePic" role="tab" data-toggle="tab">远程地址获取</a></li></ul><div class="tab-content">    <div class="tab-pane fade active in pt20 form-horizontal" id="localPic">        <span class="text-muted">图片体积不得大于 4 MB</span>        <br>        <div class="widget-upload form-group">        <input type="file" id="editorUpload" name="image" class="widget-upload__file">        <div class="col-sm-8">        <input type="text" id="fileName" class="form-control col-sm-10 widget-upload__text" placeholder="拖动图片到这里" readonly="">        </div>        <a href="javascript:void(0);" class="btn col-sm-2 btn-default">选择图片</a>        </div>    </div>    <div class="tab-pane fade pt20" id="remotePic">    <input type="url" name="img" id="remotePicUrl" class="form-control text-28" placeholder="请输入图片所在网址">    </div></div>',olist:"数字列表 <ol> Ctrl+O",ulist:"普通列表 <ul> Ctrl+U",litem:"列表项目",heading:"标题 <h1>/<h2> Ctrl+H",headingexample:"标题文字",hr:"分割线 <hr> Ctrl+R",undo:"撤销 - Ctrl+Z",redo:"重做 - Ctrl+Y",redomac:"重做 - Ctrl+Shift+Z",zen:"全屏",help:"Markdown 语法"};t.Editor=function(e,n,r){r=r||{},"function"==typeof r.handler&&(r={helpButton:r}),r.strings=r.strings||{},r.helpButton&&(r.strings.help=r.strings.help||r.helpButton.title);var a=function(e){return r.strings[e]||b[e]};n=n||"";var u=this.hooks=new t.HookCollection;u.addNoop("onPreviewRefresh"),u.addNoop("postBlockquoteCreation"),u.addFalse("insertImageDialog"),this.getConverter=function(){return e};var p,d=this;this.run=function(t){if(!p){p=new o(n,t);var h,m,g=new c(u,a),v=new s(e,p,function(){u.onPreviewRefresh()});/\?noundo/.test(f.location.href)||(h=new i(function(){v.refresh(),m&&m.setUndoRedoButtonStates()},p),this.textOperation=function(e){h.setCommandMode(),e(),d.refreshPreview()}),m=new l(n,p,h,v,g,r.helpButton,a),m.setUndoRedoButtonStates();var y=d.refreshPreview=function(){v.refresh(!0)};y()}}},r.prototype.findTags=function(e,t){var n,r=this;e&&(n=p.extendRegExp(e,"","$"),this.before=this.before.replace(n,function(e){return r.startTag=r.startTag+e,""}),n=p.extendRegExp(e,"^",""),this.selection=this.selection.replace(n,function(e){return r.startTag=r.startTag+e,""})),t&&(n=p.extendRegExp(t,"","$"),this.selection=this.selection.replace(n,function(e){return r.endTag=e+r.endTag,""}),n=p.extendRegExp(t,"^",""),this.after=this.after.replace(n,function(e){return r.endTag=e+r.endTag,""}))},r.prototype.trimWhitespace=function(e){var t,n,r=this;e?t=n="":(t=function(e){return r.before+=e,""},n=function(e){return r.after=e+r.after,""}),this.selection=this.selection.replace(/^(\s*)/,t).replace(/(\s*)$/,n)},r.prototype.skipLines=function(e,t,n){void 0===e&&(e=1),void 0===t&&(t=1),e++,t++;var r,o;if(navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+m.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+m.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+m.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+m.$1,this.before){for(r=o="";e--;)r+="\\n?",o+="\n";n&&(r="\\n*"),this.before=this.before.replace(new m(r+"$",""),o)}if(this.after){for(r=o="";t--;)r+="\\n?",o+="\n";n&&(r="\\n*"),this.after=this.after.replace(new m(r,""),o)}},p.isVisible=function(e){return window.getComputedStyle?"none"!==window.getComputedStyle(e,null).getPropertyValue("display"):e.currentStyle?"none"!==e.currentStyle.display:void 0},p.addEvent=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},p.removeEvent=function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n,!1)},p.fixEolChars=function(e){return e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n")},p.extendRegExp=function(e,t,n){null!==t&&void 0!==t||(t=""),null!==n&&void 0!==n||(n="");var r,o=e.toString();return o=o.replace(/\/([gim]*)$/,function(e,t){return r=t,""}),o=o.replace(/(^\/|\/$)/g,""),o=t+o+n,new m(o,r)},d.getTop=function(e,t){var n=e.offsetTop;if(!t)for(;e=e.offsetParent;)n+=e.offsetTop;return n},d.getHeight=function(e){return e.offsetHeight||e.scrollHeight},d.getWidth=function(e){return e.offsetWidth||e.scrollWidth},d.getPageSize=function(){var e,t,n,r;self.innerHeight&&self.scrollMaxY?(e=f.body.scrollWidth,t=self.innerHeight+self.scrollMaxY):f.body.scrollHeight>f.body.offsetHeight?(e=f.body.scrollWidth,t=f.body.scrollHeight):(e=f.body.offsetWidth,t=f.body.offsetHeight),self.innerHeight?(n=self.innerWidth,r=self.innerHeight):f.documentElement&&f.documentElement.clientHeight?(n=f.documentElement.clientWidth,r=f.documentElement.clientHeight):f.body&&(n=f.body.clientWidth,r=f.body.clientHeight);var o=Math.max(e,n),i=Math.max(t,r);return[o,i,n,r]},h.createBackground=function(){var e=f.createElement("div"),t=e.style;e.className="modal-backdrop wmd-prompt-background",t.position="absolute",t.top="0",t.zIndex="1000",y.isIE?t.filter="alpha(opacity=50)":t.opacity="0.5";var n=d.getPageSize();return t.height=n[1]+"px",y.isIE?(t.left=f.documentElement.scrollLeft,t.width=f.documentElement.clientWidth):(t.left="0",t.width="100%"),f.body.appendChild(e),e},h.prompt=function(e,t,n,r){var o,i;void 0===n&&(n="");var a=function(e){var t=e.charCode||e.keyCode;27===t&&s(!0)},s=function(e){p.removeEvent(f.body,"keydown",a);var t=i.value;return e?t=null:(t=t.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(t)||(t="http://"+t)),o.parentNode.removeChild(o),r(t),!1},l=function(){o=f.createElement("div"),o.className="modal-content wmd-prompt-dialog",o.style.padding="10px;",o.style.position="fixed",o.style.width="600px",o.style.zIndex="1001";var r=f.createElement("div");r.className="modal-header",r.innerHTML='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button><h4 class="ml20">'+e+"</h4>",o.appendChild(r);var l=f.createElement("div");l.innerHTML=t,l.style.padding="5px",l.style.margin="20px",o.appendChild(l);var c=f.createElement("form"),u=c.style;c.onsubmit=function(){return s(!1)},u.padding="0",u.margin="0 0 20px",u.cssFloat="left",u.width="100%",u.textAlign="center",u.position="relative",o.appendChild(c),i=f.createElement("input"),i.className="form-control text-28",i.type="text",i.value=n,u=i.style,u.display="block",u.width="80%",u.marginLeft=u.marginRight="auto",c.appendChild(i);var h=f.createElement("input");h.className="btn btn-primary",h.type="button",h.onclick=function(){return s(!1)},h.value="确定",u=h.style,u.margin="10px",u.display="inline",u.width="7em";var m=f.createElement("input");m.className="btn btn-default",m.type="button",m.onclick=function(){return s(!0)},m.value="取消",u=m.style,u.margin="10px",u.display="inline",u.width="7em",c.appendChild(h),c.appendChild(m),p.addEvent(f.body,"keydown",a),o.style.top="50%",o.style.left="50%",o.style.display="block",y.isIE_5or6&&(o.style.position="absolute",o.style.top=f.documentElement.scrollTop+200+"px",o.style.left="50%"),f.body.appendChild(o),o.style.marginTop=-(d.getHeight(o)/2)+"px",o.style.marginLeft=-(d.getWidth(o)/2)+"px"};setTimeout(function(){l();var e=n.length;if(void 0!==i.selectionStart)i.selectionStart=0,i.selectionEnd=e;else if(i.createTextRange){var t=i.createTextRange();t.collapse(!1),t.moveStart("character",-e),t.moveEnd("character",e),t.select()}i.focus()},0)};var w=c.prototype;return w.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",w.unwrap=function(e){var t=new m("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");e.selection=e.selection.replace(t,"$1 $2")},w.wrap=function(e,t){this.unwrap(e);var n=new m("(.{1,"+t+"})( +|$\\n?)","gm"),r=this;e.selection=e.selection.replace(n,function(e,t){return new m("^"+r.prefixes,"").test(e)?e:t+"\n"}),e.selection=e.selection.replace(/\s+$/,"")},w.doBold=function(e,t){return this.doBorI(e,t,2,this.getString("boldexample"))},w.doItalic=function(e,t){return this.doBorI(e,t,1,this.getString("italicexample"))},w.doBorI=function(e,t,n,r){e.trimWhitespace(),e.selection=e.selection.replace(/\n{2,}/g,"\n");var o=/(\**$)/.exec(e.before)[0],i=/(^\**)/.exec(e.after)[0],a=Math.min(o.length,i.length);if(a>=n&&(2!=a||1!=n))e.before=e.before.replace(m("[*]{"+n+"}$",""),""),e.after=e.after.replace(m("^[*]{"+n+"}",""),"");else if(!e.selection&&i){e.after=e.after.replace(/^([*_]*)/,""),e.before=e.before.replace(/(\s?)$/,"");var s=m.$1;e.before=e.before+i+s}else{e.selection||i||(e.selection=r);var l=n<=1?"*":"**";e.before=e.before+l,e.after=l+e.after}},w.stripLinkDefs=function(e,t){return e=e.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(e,n,r,o,i){return t[n]=e.replace(/\s*$/,""),o?(t[n]=e.replace(/["(](.+?)[")]$/,""),o+i):""})},w.addLinkDef=function(e,t){var n=0,r={};e.before=this.stripLinkDefs(e.before,r),e.selection=this.stripLinkDefs(e.selection,r),e.after=this.stripLinkDefs(e.after,r);var o="",i=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,a=function(e){n++,e=e.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+n+"]:"),o+="\n"+e},s=function(e,t,o,l,c,u){return o=o.replace(i,s),r[c]?(a(r[c]),t+o+l+n+u):e};e.before=e.before.replace(i,s),t?a(t):e.selection=e.selection.replace(i,s);var l=n;return e.after=e.after.replace(i,s),e.after&&(e.after=e.after.replace(/\n*$/,"")),e.after||(e.selection=e.selection.replace(/\n*$/,"")),e.after+="\n\n"+o,l},w.doLinkOrImage=function(t,r,o){t.trimWhitespace(),t.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);if(!(t.endTag.length>1&&t.startTag.length>0)){if(t.selection=t.startTag+t.selection+t.endTag,t.startTag=t.endTag="",/\n\n/.test(t.selection))return void this.addLinkDef(t,null);var i=this,a=function(e,a){if(n("hide"),null!==e){t.selection=(" "+t.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);var s=" [999]: "+u(e),l=i.addLinkDef(t,s);t.startTag=o?"![":"[",t.endTag="]["+l+"]",t.selection||(o?t.selection=a||i.getString("imagedescription"):t.selection=i.getString("linkdescription"))}r()};if(o){if(!this.hooks.insertImageDialog(a)){var s,l,c=this.getString("imagedialog");n({title:"插入图片",content:c,closeText:"取消",doneText:"插入",hidden:function(){e(".wmd-input").focus()},show:function(){e("#editorUpload").fileUpload({url:"/img/upload/image",type:"POST",dataType:"json",beforeSend:function(){var t=e("#editorUpload").val();return e("#editorUpload")[0].files[0].size>4194304?(n("图片过大，只能上传小于 4MB 的图片。"),void(e("#editorUpload")[0].files=null)):(t.indexOf("\\fakepath")!==-1&&(t=t.split("\\fakepath\\")[1]),t||t.trick(),e("#fileName").addClass("loading"),void e(".done-btn").attr("disabled","disabled"))},complete:function(){e("#fileName").removeClass("loading"),e(".done-btn").attr("disabled",!1)},success:function(e){var t=e[0],r=e[1];t?n(r):(l=r,a(l,s))}})},doneFn:function(t){t.preventDefault(),e("#remotePic").hasClass("active")&&e("#remotePicUrl").val()&&(e("#remotePicUrl").addClass("loading"),e(".done-btn").attr("disabled","disabled"),s=e("#remotePicUrl").val().match(/\/([^\/]+)$/)[1],e.post("/img/fetch/image",{src:e("#remotePicUrl").val()},function(t){e(".done-btn").attr("disabled",!1),e("#remotePicUrl").removeClass("loading");var r=t.match(/\[(\d),/)[1],o=t.match(/\[\d,"(\S*)"\]/)[1];o=o.replace(/\\/g,""),"0"!==r?n(o):(l=o,a(l,s))},"text"))}})}}else{var c=this.getString("linkdialog");n({title:"插入链接",content:c,closeText:"取消",doneText:"插入",doneFn:function(){a(e("#editorLinkText").val())},show:function(){setTimeout(function(){e("#editorLinkText").focus()},100),e("#editorLinkText").keydown(function(t){13===t.which&&(t.preventDefault(),a(e(this).val()))})},hidden:function(){e(".wmd-input").focus()}})}return!0}t.startTag=t.startTag.replace(/!?\[/,""),t.endTag="",this.addLinkDef(t,null)},w.doAutoindent=function(e,t){var n=this,r=!1;e.before=e.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),e.before=e.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),e.before=e.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),e.selection||/^[ \t]*(?:\n|$)/.test(e.after)||(e.after=e.after.replace(/^[^\n]*/,function(t){return e.selection=t,""}),r=!0),/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(e.before)&&n.doList&&n.doList(e),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(e.before)&&n.doBlockquote&&n.doBlockquote(e),/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)&&n.doCode&&n.doCode(e),r&&(e.after=e.selection+e.after,e.selection="")},w.doBlockquote=function(e,t){e.selection=e.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(t,n,r,o){return e.before+=n,e.after=o+e.after,r}),e.before=e.before.replace(/(>[ \t]*)$/,function(t,n){return e.selection=n+e.selection,""}),e.selection=e.selection.replace(/^(\s|>)+$/,""),e.selection=e.selection||this.getString("quoteexample");var n,r="",o="";if(e.before){for(var i=e.before.replace(/\n$/,"").split("\n"),a=!1,s=0;s<i.length;s++){var l=!1;n=i[s],a=a&&n.length>0,/^>/.test(n)?(l=!0,!a&&n.length>1&&(a=!0)):l=!!/^[ \t]*$/.test(n)||a,l?r+=n+"\n":(o+=r+n,r="\n")}/(^|\n)>/.test(r)||(o+=r,r="")}e.startTag=r,e.before=o,e.after&&(e.after=e.after.replace(/^\n?/,"\n")),e.after=e.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(t){return e.endTag=t,""});var c=function(t){var n=t?"> ":"";e.startTag&&(e.startTag=e.startTag.replace(/\n((>|\s)*)\n$/,function(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"})),e.endTag&&(e.endTag=e.endTag.replace(/^\n((>|\s)*)\n/,function(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"}))};/^(?![ ]{0,3}>)/m.test(e.selection)?(this.wrap(e,v.lineLength-2),e.selection=e.selection.replace(/^/gm,"> "),c(!0),e.skipLines()):(e.selection=e.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(e),c(!1),!/^(\n|^)[ ]{0,3}>/.test(e.selection)&&e.startTag&&(e.startTag=e.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(e.selection)&&e.endTag&&(e.endTag=e.endTag.replace(/^\n{0,2}/,"\n\n"))),e.selection=this.hooks.postBlockquoteCreation(e.selection),/\n/.test(e.selection)||(e.selection=e.selection.replace(/^(> *)/,function(t,n){
return e.startTag+=n,""}))},w.doCode=function(e,t){var n=/\S[ ]*$/.test(e.before),r=/^[ ]*\S/.test(e.after);if(!r&&!n||/\n/.test(e.selection)){e.before=e.before.replace(/[ ]{4}$/,function(t){return e.selection=t+e.selection,""});var o=1,i=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)&&(o=0),/^\n(\t|[ ]{4,})/.test(e.after)&&(i=0),e.skipLines(o,i),e.selection?/^[ ]{0,3}\S/m.test(e.selection)?/\n/.test(e.selection)?e.selection=e.selection.replace(/^/gm,"    "):e.before+="    ":e.selection=e.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,""):(e.startTag="```\n",e.selection=this.getString("codeexample"),e.endTag="\n```")}else e.trimWhitespace(),e.findTags(/`/,/`/),e.startTag||e.endTag?e.endTag&&!e.startTag?(e.before+=e.endTag,e.endTag=""):e.startTag=e.endTag="":(e.startTag=e.endTag="`",e.selection||(e.selection=this.getString("codeexample")))},w.doList=function(e,t,n){var r=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,o=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,i="-",a=1,s=function(){var e;return n?(e=" "+a+". ",a++):e=" "+i+" ",e},l=function(e){return void 0===n&&(n=/^\s*\d/.test(e)),e=e.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(e){return s()})};if(e.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!e.before||/\n$/.test(e.before)||/^\n/.test(e.startTag)||(e.before+=e.startTag,e.startTag=""),e.startTag){var c=/\d+[.]/.test(e.startTag);if(e.startTag="",e.selection=e.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(e),e.skipLines(),c&&(e.after=e.after.replace(o,l)),n==c)return}var u=1;e.before=e.before.replace(r,function(e){return/^\s*([*+-])/.test(e)&&(i=m.$1),u=/[^\n]\n\n[^\n]/.test(e)?1:0,l(e)}),e.selection||(e.selection=this.getString("litem"));var p=s(),d=1;e.after=e.after.replace(o,function(e){return d=/[^\n]\n\n[^\n]/.test(e)?1:0,l(e)}),e.trimWhitespace(!0),e.skipLines(u,d,!0),e.startTag=p;var h=p.replace(/./g," ");this.wrap(e,v.lineLength-h.length),e.selection=e.selection.replace(/\n/g,"\n"+h)},w.doHeading=function(e,t){if(e.selection=e.selection.replace(/\s+/g," "),e.selection=e.selection.replace(/(^\s+|\s+$)/g,""),!e.selection)return e.startTag="## ",e.selection=this.getString("headingexample"),void(e.endTag=" ##");var n=0;e.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(e.startTag)&&(n=m.lastMatch.length),e.startTag=e.endTag="",e.findTags(null,/\s?(-+|=+)/),/=+/.test(e.endTag)&&(n=1),/-+/.test(e.endTag)&&(n=2),e.startTag=e.endTag="",e.skipLines(1,1);var r=0==n?2:n-1;if(r>0){var o=r>=2?"-":"=",i=e.selection.length;for(i>v.lineLength&&(i=v.lineLength),e.endTag="\n";i--;)e.endTag+=o}},w.doHorizontalRule=function(e,t){e.startTag="----------\n",e.selection="",e.skipLines(2,1,!0)},t}),define("tabIndent",[],function(){"use strict";var e={version:"0.1.8",config:{tab:"\t"},events:{keydown:function(t){var n=e.config.tab,r=n.length;if(9===t.keyCode){t.preventDefault();var o=this.selectionStart,i=this.selectionEnd;if(t.shiftKey===!1)if(e.isMultiLine(this)){for(var a=e.findStartIndices(this),s=a.length,l=void 0,c=void 0,u=0;s--;){var p=a[s];a[s+1]&&o!=a[s+1]&&(p=a[s+1]),p>=o&&a[s]<i&&(this.value=this.value.slice(0,a[s])+n+this.value.slice(a[s]),l=a[s],c||(c=a[s+1]?a[s+1]-1:"end"),u++)}this.selectionStart=l,this.selectionEnd="end"!==c?c+r*u:this.value.length}else this.value=this.value.slice(0,o)+n+this.value.slice(o),this.selectionStart=o+r,this.selectionEnd=i+r;else if(e.isMultiLine(this)){for(var a=e.findStartIndices(this),s=a.length,l=void 0,c=void 0,u=0;s--;){var p=a[s];a[s+1]&&o!=a[s+1]&&(p=a[s+1]),p>=o&&a[s]<i&&(this.value.substr(a[s],r)==n&&(this.value=this.value.slice(0,a[s])+this.value.slice(a[s]+r),u++),l=a[s],c||(c=a[s+1]?a[s+1]-1:"end"))}this.selectionStart=l,this.selectionEnd="end"!==c?c-u*r:this.value.length}else this.value.substr(o-r,r)==n?(this.value=this.value.substr(0,o-r)+this.value.substr(o),this.selectionStart=o-r,this.selectionEnd=i-r):"\n"==this.value.substr(o-1,1)&&this.value.substr(o,r)==n&&(this.value=this.value.substring(0,o)+this.value.substr(o+r),this.selectionStart=o,this.selectionEnd=i-r)}else if(27===t.keyCode)e.events.disable(t);else if(13===t.keyCode&&t.shiftKey===!1){for(var d=e,h=this.selectionStart,a=d.findStartIndices(this),f=a.length,m=0,g=0,v=new RegExp("^"+n.replace("\t","\\t").replace(/ /g,"\\s")+"+","g"),y="",b=null,w=0;w<f;w++){if(a[w+1]&&h>=a[w]&&h<a[w+1]){m=a[w],g=a[w+1]-1;break}m=a[f-1],g=this.value.length}if(y=this.value.slice(m,g),b=y.match(v),null!==b){t.preventDefault();var _=b[0],k=_.length,x=h-m;k>x&&(k=x,_=_.slice(0,x)),this.value=this.value.slice(0,h)+"\n"+_+this.value.slice(h),this.selectionStart=h+k+1,this.selectionEnd=this.selectionStart}}},disable:function(t){e.remove(t.target)},focus:function(){var t=e,n=this,r=setTimeout(function(){var e=(n.getAttribute("class")||"").split(" "),r=e.indexOf("tabIndent");n.addEventListener("keydown",t.events.keydown),n.style.backgroundPosition="top right",n.style.backgroundRepeat="no-repeat",r!==-1&&e.splice(r,1),e.push("tabIndent-rendered"),n.setAttribute("class",e.join(" ")),n.removeEventListener("focus",t.events.keydown)},500);n.addEventListener("blur",function e(){clearTimeout(r),n.removeEventListener("blur",e)})}},render:function(e){var t=this;"TEXTAREA"===e.nodeName&&(e.addEventListener("focus",t.events.focus),e.addEventListener("blur",function(e){t.events.disable(e)}))},renderAll:function(){for(var e=document.getElementsByTagName("textarea"),t=e.length,n=-1,r=[],o=void 0;t--;)r=(e[t].getAttribute("class")||"").split(" "),n=r.indexOf("tabIndent"),n!==-1&&(o=e[t],this.render(o)),n=-1,r=[],o=void 0},remove:function(e){if("TEXTAREA"===e.nodeName){var t=(e.getAttribute("class")||"").split(" "),n=t.indexOf("tabIndent-rendered");n!==-1&&(e.removeEventListener("keydown",this.events.keydown),e.style.backgroundImage="",t.splice(n,1),t.push("tabIndent"),e.setAttribute("class",t.length>1?t.join(" "):t[0]))}},removeAll:function(){for(var e=document.getElementsByTagName("textarea"),t=e.length,n=-1,r=[],o=void 0;t--;)r=(e[t].getAttribute("class")||"").split(" "),n=r.indexOf("tabIndent-rendered"),n!==-1&&(o=e[t],this.remove(o)),n=-1,r=[],o=void 0},isMultiLine:function(e){var t=e.value.slice(e.selectionStart,e.selectionEnd),n=new RegExp(/\n/);return!!n.test(t)},findStartIndices:function(e){for(var t=e.value,n=[],r=0;t.match(/\n/)&&t.match(/\n/).length>0;){r=n.length>0?n[n.length-1]:0;var o=t.search("\n");n.push(o+r+1),t=t.substring(o+1)}return n.unshift(0),n}};return e}),define("diff_match_patch",[],function(){function e(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var t=-1,n=1,r=0;return e.Diff,e.prototype.diff_main=function(e,t,n,o){"undefined"==typeof o&&(o=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=o;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[r,e]]:[];"undefined"==typeof n&&(n=!0);var a=n,s=this.diff_commonPrefix(e,t),l=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);var c=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var u=this.diff_compute_(e,t,a,i);return l&&u.unshift([r,l]),c&&u.push([r,c]),this.diff_cleanupMerge(u),u},e.prototype.diff_compute_=function(e,o,i,a){var s;if(!e)return[[n,o]];if(!o)return[[t,e]];var l=e.length>o.length?e:o,c=e.length>o.length?o:e,u=l.indexOf(c);if(u!=-1)return s=[[n,l.substring(0,u)],[r,c],[n,l.substring(u+c.length)]],e.length>o.length&&(s[0][0]=s[2][0]=t),s;if(1==c.length)return[[t,e],[n,o]];var p=this.diff_halfMatch_(e,o);if(p){var d=p[0],h=p[1],f=p[2],m=p[3],g=p[4],v=this.diff_main(d,f,i,a),y=this.diff_main(h,m,i,a);return v.concat([[r,g]],y)}return i&&e.length>100&&o.length>100?this.diff_lineMode_(e,o,a):this.diff_bisect_(e,o,a)},e.prototype.diff_lineMode_=function(e,o,i){var a=this.diff_linesToChars_(e,o);e=a.chars1,o=a.chars2;var s=a.lineArray,l=this.diff_main(e,o,!1,i);this.diff_charsToLines_(l,s),this.diff_cleanupSemantic(l),l.push([r,""]);for(var c=0,u=0,p=0,d="",h="";c<l.length;){switch(l[c][0]){case n:p++,h+=l[c][1];break;case t:u++,d+=l[c][1];break;case r:if(u>=1&&p>=1){l.splice(c-u-p,u+p),c=c-u-p;for(var a=this.diff_main(d,h,!1,i),f=a.length-1;f>=0;f--)l.splice(c,0,a[f]);c+=a.length}p=0,u=0,d="",h=""}c++}return l.pop(),l},e.prototype.diff_bisect_=function(e,r,o){for(var i=e.length,a=r.length,s=Math.ceil((i+a)/2),l=s,c=2*s,u=new Array(c),p=new Array(c),d=0;d<c;d++)u[d]=-1,p[d]=-1;u[l+1]=0,p[l+1]=0;for(var h=i-a,f=h%2!=0,m=0,g=0,v=0,y=0,b=0;b<s&&!((new Date).getTime()>o);b++){for(var w=-b+m;w<=b-g;w+=2){var _,k=l+w;_=w==-b||w!=b&&u[k-1]<u[k+1]?u[k+1]:u[k-1]+1;for(var x=_-w;_<i&&x<a&&e.charAt(_)==r.charAt(x);)_++,x++;if(u[k]=_,_>i)g+=2;else if(x>a)m+=2;else if(f){var D=l+h-w;if(D>=0&&D<c&&p[D]!=-1){var C=i-p[D];if(_>=C)return this.diff_bisectSplit_(e,r,_,x,o)}}}for(var S=-b+v;S<=b-y;S+=2){var C,D=l+S;C=S==-b||S!=b&&p[D-1]<p[D+1]?p[D+1]:p[D-1]+1;for(var E=C-S;C<i&&E<a&&e.charAt(i-C-1)==r.charAt(a-E-1);)C++,E++;if(p[D]=C,C>i)y+=2;else if(E>a)v+=2;else if(!f){var k=l+h-S;if(k>=0&&k<c&&u[k]!=-1){var _=u[k],x=l+_-k;if(C=i-C,_>=C)return this.diff_bisectSplit_(e,r,_,x,o)}}}}return[[t,e],[n,r]]},e.prototype.diff_bisectSplit_=function(e,t,n,r,o){var i=e.substring(0,n),a=t.substring(0,r),s=e.substring(n),l=t.substring(r),c=this.diff_main(i,a,!1,o),u=this.diff_main(s,l,!1,o);return c.concat(u)},e.prototype.diff_linesToChars_=function(e,t){function n(e){for(var t="",n=0,i=-1,a=r.length;i<e.length-1;){i=e.indexOf("\n",n),i==-1&&(i=e.length-1);var s=e.substring(n,i+1);n=i+1,(o.hasOwnProperty?o.hasOwnProperty(s):void 0!==o[s])?t+=String.fromCharCode(o[s]):(t+=String.fromCharCode(a),o[s]=a,r[a++]=s)}return t}var r=[],o={};r[0]="";var i=n(e),a=n(t);return{chars1:i,chars2:a,lineArray:r}},e.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],o=[],i=0;i<r.length;i++)o[i]=t[r.charCodeAt(i)];e[n][1]=o.join("")}},e.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),o=r,i=0;n<o;)e.substring(i,o)==t.substring(i,o)?(n=o,i=n):r=o,o=Math.floor((r-n)/2+n);return o},e.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),o=r,i=0;n<o;)e.substring(e.length-o,e.length-i)==t.substring(t.length-o,t.length-i)?(n=o,i=n):r=o,o=Math.floor((r-n)/2+n);return o},e.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var o=Math.min(n,r);if(e==t)return o;for(var i=0,a=1;;){var s=e.substring(o-a),l=t.indexOf(s);if(l==-1)return i;a+=l,0!=l&&e.substring(o-a)!=t.substring(0,a)||(i=a,a++)}},e.prototype.diff_halfMatch_=function(e,t){function n(e,t,n){for(var r,o,i,s,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";(c=t.indexOf(l,c+1))!=-1;){var p=a.diff_commonPrefix(e.substring(n),t.substring(c)),d=a.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<d+p&&(u=t.substring(c-d,c)+t.substring(c,c+p),r=e.substring(0,n-d),o=e.substring(n+p),i=t.substring(0,c-d),s=t.substring(c+p))}return 2*u.length>=e.length?[r,o,i,s,u]:null}if(this.Diff_Timeout<=0)return null;var r=e.length>t.length?e:t,o=e.length>t.length?t:e;if(r.length<4||2*o.length<r.length)return null;var i,a=this,s=n(r,o,Math.ceil(r.length/4)),l=n(r,o,Math.ceil(r.length/2));if(!s&&!l)return null;i=l?s&&s[4].length>l[4].length?s:l:s;var c,u,p,d;e.length>t.length?(c=i[0],u=i[1],p=i[2],d=i[3]):(p=i[0],d=i[1],c=i[2],u=i[3]);var h=i[4];return[c,u,p,d,h]},e.prototype.diff_cleanupSemantic=function(e){for(var o=!1,i=[],a=0,s=null,l=0,c=0,u=0,p=0,d=0;l<e.length;)e[l][0]==r?(i[a++]=l,c=p,u=d,p=0,d=0,s=e[l][1]):(e[l][0]==n?p+=e[l][1].length:d+=e[l][1].length,s&&s.length<=Math.max(c,u)&&s.length<=Math.max(p,d)&&(e.splice(i[a-1],0,[t,s]),e[i[a-1]+1][0]=n,a--,a--,l=a>0?i[a-1]:-1,c=0,u=0,p=0,d=0,s=null,o=!0)),l++;for(o&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),l=1;l<e.length;){if(e[l-1][0]==t&&e[l][0]==n){var h=e[l-1][1],f=e[l][1],m=this.diff_commonOverlap_(h,f),g=this.diff_commonOverlap_(f,h);m>=g?(m>=h.length/2||m>=f.length/2)&&(e.splice(l,0,[r,f.substring(0,m)]),e[l-1][1]=h.substring(0,h.length-m),e[l+1][1]=f.substring(m),l++):(g>=h.length/2||g>=f.length/2)&&(e.splice(l,0,[r,h.substring(0,g)]),e[l-1][0]=n,e[l-1][1]=f.substring(0,f.length-g),e[l+1][0]=t,e[l+1][1]=h.substring(g),l++),l++}l++}},e.prototype.diff_cleanupSemanticLossless=function(t){function n(t,n){if(!t||!n)return 6;var r=t.charAt(t.length-1),o=n.charAt(0),i=r.match(e.nonAlphaNumericRegex_),a=o.match(e.nonAlphaNumericRegex_),s=i&&r.match(e.whitespaceRegex_),l=a&&o.match(e.whitespaceRegex_),c=s&&r.match(e.linebreakRegex_),u=l&&o.match(e.linebreakRegex_),p=c&&t.match(e.blanklineEndRegex_),d=u&&n.match(e.blanklineStartRegex_);return p||d?5:c||u?4:i&&!s&&l?3:s||l?2:i||a?1:0}for(var o=1;o<t.length-1;){if(t[o-1][0]==r&&t[o+1][0]==r){var i=t[o-1][1],a=t[o][1],s=t[o+1][1],l=this.diff_commonSuffix(i,a);if(l){var c=a.substring(a.length-l);i=i.substring(0,i.length-l),a=c+a.substring(0,a.length-l),s=c+s}for(var u=i,p=a,d=s,h=n(i,a)+n(a,s);a.charAt(0)===s.charAt(0);){i+=a.charAt(0),a=a.substring(1)+s.charAt(0),s=s.substring(1);var f=n(i,a)+n(a,s);f>=h&&(h=f,u=i,p=a,d=s)}t[o-1][1]!=u&&(u?t[o-1][1]=u:(t.splice(o-1,1),o--),t[o][1]=p,d?t[o+1][1]=d:(t.splice(o+1,1),o--))}o++}},e.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,e.whitespaceRegex_=/\s/,e.linebreakRegex_=/[\r\n]/,e.blanklineEndRegex_=/\n\r?\n$/,e.blanklineStartRegex_=/^\r?\n\r?\n/,e.prototype.diff_cleanupEfficiency=function(e){for(var o=!1,i=[],a=0,s=null,l=0,c=!1,u=!1,p=!1,d=!1;l<e.length;)e[l][0]==r?(e[l][1].length<this.Diff_EditCost&&(p||d)?(i[a++]=l,c=p,u=d,s=e[l][1]):(a=0,s=null),p=d=!1):(e[l][0]==t?d=!0:p=!0,s&&(c&&u&&p&&d||s.length<this.Diff_EditCost/2&&c+u+p+d==3)&&(e.splice(i[a-1],0,[t,s]),e[i[a-1]+1][0]=n,a--,s=null,c&&u?(p=d=!0,a=0):(a--,l=a>0?i[a-1]:-1,p=d=!1),o=!0)),l++;o&&this.diff_cleanupMerge(e)},e.prototype.diff_cleanupMerge=function(e){e.push([r,""]);for(var o,i=0,a=0,s=0,l="",c="";i<e.length;)switch(e[i][0]){case n:s++,c+=e[i][1],i++;break;case t:a++,l+=e[i][1],i++;break;case r:a+s>1?(0!==a&&0!==s&&(o=this.diff_commonPrefix(c,l),0!==o&&(i-a-s>0&&e[i-a-s-1][0]==r?e[i-a-s-1][1]+=c.substring(0,o):(e.splice(0,0,[r,c.substring(0,o)]),i++),c=c.substring(o),l=l.substring(o)),o=this.diff_commonSuffix(c,l),0!==o&&(e[i][1]=c.substring(c.length-o)+e[i][1],c=c.substring(0,c.length-o),l=l.substring(0,l.length-o))),0===a?e.splice(i-s,a+s,[n,c]):0===s?e.splice(i-a,a+s,[t,l]):e.splice(i-a-s,a+s,[t,l],[n,c]),i=i-a-s+(a?1:0)+(s?1:0)+1):0!==i&&e[i-1][0]==r?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,s=0,a=0,l="",c=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(i=1;i<e.length-1;)e[i-1][0]==r&&e[i+1][0]==r&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),u=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),u=!0)),i++;u&&this.diff_cleanupMerge(e)},e.prototype.diff_xIndex=function(e,r){var o,i=0,a=0,s=0,l=0;for(o=0;o<e.length&&(e[o][0]!==n&&(i+=e[o][1].length),e[o][0]!==t&&(a+=e[o][1].length),!(i>r));o++)s=i,l=a;return e.length!=o&&e[o][0]===t?l:l+(r-s)},e.prototype.diff_prettyHtml=function(e){for(var o=[],i=/&/g,a=/</g,s=/>/g,l=/\n/g,c=0;c<e.length;c++){var u=e[c][0],p=e[c][1],d=p.replace(i,"&amp;").replace(a,"&lt;").replace(s,"&gt;").replace(l,"&para;<br>");switch(u){case n:o[c]='<ins style="background:#e6ffe6;">'+d+"</ins>";break;case t:o[c]='<del style="background:#ffe6e6;">'+d+"</del>";break;case r:o[c]="<span>"+d+"</span>"}}return o.join("")},e.prototype.diff_text1=function(e){for(var t=[],r=0;r<e.length;r++)e[r][0]!==n&&(t[r]=e[r][1]);return t.join("")},e.prototype.diff_text2=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==t&&(n[r]=e[r][1]);return n.join("")},e.prototype.diff_levenshtein=function(e){for(var o=0,i=0,a=0,s=0;s<e.length;s++){var l=e[s][0],c=e[s][1];switch(l){case n:i+=c.length;break;case t:a+=c.length;break;case r:o+=Math.max(i,a),i=0,a=0}}return o+=Math.max(i,a)},e.prototype.diff_toDelta=function(e){for(var o=[],i=0;i<e.length;i++)switch(e[i][0]){case n:o[i]="+"+encodeURI(e[i][1]);break;case t:o[i]="-"+e[i][1].length;break;case r:o[i]="="+e[i][1].length}return o.join("\t").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(e,o){for(var i=[],a=0,s=0,l=o.split(/\t/g),c=0;c<l.length;c++){var u=l[c].substring(1);switch(l[c].charAt(0)){case"+":try{i[a++]=[n,decodeURI(u)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var p=parseInt(u,10);if(isNaN(p)||p<0)throw new Error("Invalid number in diff_fromDelta: "+u);var d=e.substring(s,s+=p);"="==l[c].charAt(0)?i[a++]=[r,d]:i[a++]=[t,d];break;default:if(l[c])throw new Error("Invalid diff operation in diff_fromDelta: "+l[c])}}if(s!=e.length)throw new Error("Delta length ("+s+") does not equal source text length ("+e.length+").");return i},e.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},e.prototype.match_bitap_=function(e,t,n){function r(e,r){var o=e/t.length,a=Math.abs(n-r);return i.Match_Distance?o+a/i.Match_Distance:a?1:o}if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var o=this.match_alphabet_(t),i=this,a=this.Match_Threshold,s=e.indexOf(t,n);s!=-1&&(a=Math.min(r(0,s),a),s=e.lastIndexOf(t,n+t.length),s!=-1&&(a=Math.min(r(0,s),a)));var l=1<<t.length-1;s=-1;for(var c,u,p,d=t.length+e.length,h=0;h<t.length;h++){for(c=0,u=d;c<u;)r(h,n+u)<=a?c=u:d=u,u=Math.floor((d-c)/2+c);d=u;var f=Math.max(1,n-u+1),m=Math.min(n+u,e.length)+t.length,g=Array(m+2);g[m+1]=(1<<h)-1;for(var v=m;v>=f;v--){var y=o[e.charAt(v-1)];if(0===h?g[v]=(g[v+1]<<1|1)&y:g[v]=(g[v+1]<<1|1)&y|((p[v+1]|p[v])<<1|1)|p[v+1],g[v]&l){var b=r(h,v-1);if(b<=a){if(a=b,s=v-1,!(s>n))break;f=Math.max(1,2*n-s)}}}if(r(h+1,n)>a)break;p=g}return s},e.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(var n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},e.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var n=t.substring(e.start2,e.start2+e.length1),o=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)o+=this.Patch_Margin,n=t.substring(e.start2-o,e.start2+e.length1+o);o+=this.Patch_Margin;var i=t.substring(e.start2-o,e.start2);i&&e.diffs.unshift([r,i]);var a=t.substring(e.start2+e.length1,e.start2+e.length1+o);a&&e.diffs.push([r,a]),e.start1-=i.length,e.start2-=i.length,e.length1+=i.length+a.length,e.length2+=i.length+a.length}},e.prototype.patch_make=function(o,i,a){var s,l;if("string"==typeof o&&"string"==typeof i&&"undefined"==typeof a)s=o,l=this.diff_main(s,i,!0),l.length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(o&&"object"==typeof o&&"undefined"==typeof i&&"undefined"==typeof a)l=o,s=this.diff_text1(l);else if("string"==typeof o&&i&&"object"==typeof i&&"undefined"==typeof a)s=o,l=i;else{if("string"!=typeof o||"string"!=typeof i||!a||"object"!=typeof a)throw new Error("Unknown call format to patch_make.");s=o,l=a}if(0===l.length)return[];for(var c=[],u=new e.patch_obj,p=0,d=0,h=0,f=s,m=s,g=0;g<l.length;g++){var v=l[g][0],y=l[g][1];switch(p||v===r||(u.start1=d,u.start2=h),v){case n:u.diffs[p++]=l[g],u.length2+=y.length,m=m.substring(0,h)+y+m.substring(h);break;case t:u.length1+=y.length,u.diffs[p++]=l[g],m=m.substring(0,h)+m.substring(h+y.length);break;case r:y.length<=2*this.Patch_Margin&&p&&l.length!=g+1?(u.diffs[p++]=l[g],u.length1+=y.length,u.length2+=y.length):y.length>=2*this.Patch_Margin&&p&&(this.patch_addContext_(u,f),c.push(u),u=new e.patch_obj,p=0,f=m,d=h)}v!==n&&(d+=y.length),v!==t&&(h+=y.length)}return p&&(this.patch_addContext_(u,f),c.push(u)),c},e.prototype.patch_deepCopy=function(t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=new e.patch_obj;i.diffs=[];for(var a=0;a<o.diffs.length;a++)i.diffs[a]=o.diffs[a].slice();i.start1=o.start1,i.start2=o.start2,i.length1=o.length1,i.length2=o.length2,n[r]=i}return n},e.prototype.patch_apply=function(e,o){if(0==e.length)return[o,[]];e=this.patch_deepCopy(e);var i=this.patch_addPadding(e);o=i+o+i,this.patch_splitMax(e);for(var a=0,s=[],l=0;l<e.length;l++){var c,u=e[l].start2+a,p=this.diff_text1(e[l].diffs),d=-1;if(p.length>this.Match_MaxBits?(c=this.match_main(o,p.substring(0,this.Match_MaxBits),u),c!=-1&&(d=this.match_main(o,p.substring(p.length-this.Match_MaxBits),u+p.length-this.Match_MaxBits),(d==-1||c>=d)&&(c=-1))):c=this.match_main(o,p,u),c==-1)s[l]=!1,a-=e[l].length2-e[l].length1;else{s[l]=!0,a=c-u;var h;if(h=d==-1?o.substring(c,c+p.length):o.substring(c,d+this.Match_MaxBits),p==h)o=o.substring(0,c)+this.diff_text2(e[l].diffs)+o.substring(c+p.length);else{var f=this.diff_main(p,h,!1);if(p.length>this.Match_MaxBits&&this.diff_levenshtein(f)/p.length>this.Patch_DeleteThreshold)s[l]=!1;else{this.diff_cleanupSemanticLossless(f);for(var m,g=0,v=0;v<e[l].diffs.length;v++){var y=e[l].diffs[v];y[0]!==r&&(m=this.diff_xIndex(f,g)),y[0]===n?o=o.substring(0,c+m)+y[1]+o.substring(c+m):y[0]===t&&(o=o.substring(0,c+m)+o.substring(c+this.diff_xIndex(f,g+y[1].length))),y[0]!==t&&(g+=y[1].length)}}}}}return o=o.substring(i.length,o.length-i.length),[o,s]},e.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",o=1;o<=t;o++)n+=String.fromCharCode(o);for(var o=0;o<e.length;o++)e[o].start1+=t,e[o].start2+=t;var i=e[0],a=i.diffs;if(0==a.length||a[0][0]!=r)a.unshift([r,n]),i.start1-=t,i.start2-=t,i.length1+=t,i.length2+=t;else if(t>a[0][1].length){var s=t-a[0][1].length;a[0][1]=n.substring(a[0][1].length)+a[0][1],i.start1-=s,i.start2-=s,i.length1+=s,i.length2+=s}if(i=e[e.length-1],a=i.diffs,0==a.length||a[a.length-1][0]!=r)a.push([r,n]),i.length1+=t,i.length2+=t;else if(t>a[a.length-1][1].length){var s=t-a[a.length-1][1].length;a[a.length-1][1]+=n.substring(0,s),i.length1+=s,i.length2+=s}return n},e.prototype.patch_splitMax=function(o){for(var i=this.Match_MaxBits,a=0;a<o.length;a++)if(!(o[a].length1<=i)){var s=o[a];o.splice(a--,1);for(var l=s.start1,c=s.start2,u="";0!==s.diffs.length;){var p=new e.patch_obj,d=!0;for(p.start1=l-u.length,p.start2=c-u.length,""!==u&&(p.length1=p.length2=u.length,p.diffs.push([r,u]));0!==s.diffs.length&&p.length1<i-this.Patch_Margin;){var h=s.diffs[0][0],f=s.diffs[0][1];h===n?(p.length2+=f.length,c+=f.length,p.diffs.push(s.diffs.shift()),d=!1):h===t&&1==p.diffs.length&&p.diffs[0][0]==r&&f.length>2*i?(p.length1+=f.length,l+=f.length,d=!1,p.diffs.push([h,f]),s.diffs.shift()):(f=f.substring(0,i-p.length1-this.Patch_Margin),p.length1+=f.length,l+=f.length,h===r?(p.length2+=f.length,c+=f.length):d=!1,p.diffs.push([h,f]),f==s.diffs[0][1]?s.diffs.shift():s.diffs[0][1]=s.diffs[0][1].substring(f.length))}u=this.diff_text2(p.diffs),u=u.substring(u.length-this.Patch_Margin);var m=this.diff_text1(s.diffs).substring(0,this.Patch_Margin);""!==m&&(p.length1+=m.length,p.length2+=m.length,0!==p.diffs.length&&p.diffs[p.diffs.length-1][0]===r?p.diffs[p.diffs.length-1][1]+=m:p.diffs.push([r,m])),d||o.splice(++a,0,p)}}},e.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},e.prototype.patch_fromText=function(o){var i=[];if(!o)return i;for(var a=o.split("\n"),s=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;s<a.length;){var c=a[s].match(l);if(!c)throw new Error("Invalid patch string: "+a[s]);var u=new e.patch_obj;for(i.push(u),u.start1=parseInt(c[1],10),""===c[2]?(u.start1--,u.length1=1):"0"==c[2]?u.length1=0:(u.start1--,u.length1=parseInt(c[2],10)),u.start2=parseInt(c[3],10),""===c[4]?(u.start2--,u.length2=1):"0"==c[4]?u.length2=0:(u.start2--,u.length2=parseInt(c[4],10)),s++;s<a.length;){var p=a[s].charAt(0);try{var d=decodeURI(a[s].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+d)}if("-"==p)u.diffs.push([t,d]);else if("+"==p)u.diffs.push([n,d]);else if(" "==p)u.diffs.push([r,d]);else{if("@"==p)break;if(""!==p)throw new Error('Invalid patch mode "'+p+'" in: '+d)}s++}}return i},e.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},e.patch_obj.prototype.toString=function(){var e,o;e=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,o=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var i,a=["@@ -"+e+" +"+o+" @@\n"],s=0;s<this.diffs.length;s++){switch(this.diffs[s][0]){case n:i="+";break;case t:i="-";break;case r:i=" "}a[s+1]=i+encodeURI(this.diffs[s][1])+"\n"}return a.join("").replace(/%20/g," ")},this.diff_match_patch=e,this.DIFF_DELETE=t,this.DIFF_INSERT=n,this.DIFF_EQUAL=r,e}),function(e){"use strict";e("jquery_scrollTo",["jquery"],function(e){function t(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}var n=e.scrollTo=function(t,n,r){return e(window).scrollTo(t,n,r)};return n.defaults={axis:"xy",duration:0,limit:!0},n.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!==-1;if(!n)return t;var r=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"===r.compatMode?r.body:r.documentElement})},e.fn.scrollTo=function(r,o,i){return"object"==typeof o&&(i=o,o=0),"function"==typeof i&&(i={onAfter:i}),"max"===r&&(r=9e9),i=e.extend({},n.defaults,i),o=o||i.duration,i.queue=i.queue&&i.axis.length>1,i.queue&&(o/=2),i.offset=t(i.offset),i.over=t(i.over),this._scrollable().each(function(){function a(e){c.animate(p,o,i.easing,e&&function(){e.call(this,u,i)})}if(null!==r){var s,l=this,c=e(l),u=r,p={},d=c.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(u)){u=t(u);break}if(u=d?e(u):e(u,this),!u.length)return;case"object":(u.is||u.style)&&(s=(u=e(u)).offset())}var h=e.isFunction(i.offset)&&i.offset(l,u)||i.offset;e.each(i.axis.split(""),function(e,t){var r="x"===t?"Left":"Top",o=r.toLowerCase(),f="scroll"+r,m=l[f],g=n.max(l,t);if(s)p[f]=s[o]+(d?0:m-c.offset()[o]),i.margin&&(p[f]-=parseInt(u.css("margin"+r),10)||0,p[f]-=parseInt(u.css("border"+r+"Width"),10)||0),p[f]+=h[o]||0,i.over[o]&&(p[f]+=u["x"===t?"width":"height"]()*i.over[o]);else{var v=u[o];p[f]=v.slice&&"%"===v.slice(-1)?parseFloat(v)/100*g:v}i.limit&&/^\d+$/.test(p[f])&&(p[f]=p[f]<=0?0:Math.min(p[f],g)),!e&&i.queue&&(m!==p[f]&&a(i.onAfterFirst),delete p[f])}),a(i.onAfter)}}).end()},n.max=function(t,n){var r="x"===n?"Width":"Height",o="scroll"+r;if(!e(t).is("html,body"))return t[o]-e(t)[r.toLowerCase()]();var i="client"+r,a=t.ownerDocument.documentElement,s=t.ownerDocument.body;return Math.max(a[o],s[o])-Math.min(a[i],s[i])},n})}("function"==typeof define&&define.amd?define:function(e,t){"use strict";"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}),function(e){var t;return e.event.fix=function(e){return function(t){return t=e.apply(this,arguments),0!==t.type.indexOf("copy")&&0!==t.type.indexOf("paste")||(t.clipboardData=t.originalEvent.clipboardData),t}}(e.event.fix),t={callback:e.noop,matchType:/image.*/},e.fn.pasteImageReader=function(n){return"function"==typeof n&&(n={callback:n}),n=e.extend({},t,n),this.each(function(){var t,r;return r=this,t=e(this),t.bind("paste",function(e){var t,o;return o=!1,t=e.clipboardData,Array.prototype.forEach.call(t.types,function(e,i){var a,s;if(!o)return e.match(n.matchType)||t.items[i].type.match(n.matchType)?(a=t.items[i].getAsFile(),s=new FileReader,s.onload=function(e){return n.callback.call(r,{dataURL:e.target.result,event:e,file:a,name:a.name})},s.readAsDataURL(a),o=!0):void 0})})})}}(jQuery),define("jquery_pasteImage",["jquery"],function(e){return function(){var t;return t||e.$.fn.pasteImageReader}}(this)),function(){!function(e){return"function"==typeof define&&define.amd?define("atwho",["jquery"],e):e(window.jQuery)}(function(e){var t,n,r,o,i,a,s,l,c=[].slice;r=function(){function t(t){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=e(t),this.iframe=null,this.setIframe(),this.listen()}return t.prototype.setIframe=function(e){return e?(this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e):(this.document=document,this.window=window,this.iframe=null)},t.prototype.controller=function(e){var t,n,r,o;if(this.alias_maps[e])n=this.controllers[this.alias_maps[e]];else{o=this.controllers;for(r in o)if(t=o[r],r===e){n=t;break}}return n?n:this.controllers[this.current_flag]},t.prototype.set_context_for=function(e){return this.current_flag=e,this},t.prototype.reg=function(e,t){var n,r;return n=(r=this.controllers)[e]||(r[e]=new o(this,e)),t.alias&&(this.alias_maps[t.alias]=e),n.init(t),this},t.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(e){return function(t){return e.on_keyup(t)}}(this)).on("keydown.atwhoInner",function(e){return function(t){return e.on_keydown(t)}}(this)).on("scroll.atwhoInner",function(e){return function(t){var n;return null!=(n=e.controller())?n.view.hide(t):void 0}}(this)).on("blur.atwhoInner",function(e){return function(t){var n;if(n=e.controller())return n.view.hide(t,n.get_opt("display_timeout"))}}(this)).on("click.atwhoInner",function(e){return function(t){var n;return null!=(n=e.controller())?n.view.hide(t):void 0}}(this))},t.prototype.shutdown=function(){var e,t,n;n=this.controllers;for(t in n)e=n[t],e.destroy(),delete this.controllers[t];return this.$inputor.off(".atwhoInner")},t.prototype.dispatch=function(){return e.map(this.controllers,function(e){return function(t){var n;return(n=t.get_opt("delay"))?(clearTimeout(e.delayedCallback),e.delayedCallback=setTimeout(function(){if(t.look_up())return e.set_context_for(t.at)},n)):t.look_up()?e.set_context_for(t.at):void 0}}(this))},t.prototype.on_keyup=function(t){var n;switch(t.keyCode){case a.ESC:t.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case a.DOWN:case a.UP:case a.CTRL:e.noop();break;case a.P:case a.N:t.ctrlKey||this.dispatch();break;default:this.dispatch()}},t.prototype.on_keydown=function(t){var n,r;if(n=null!=(r=this.controller())?r.view:void 0,n&&n.visible())switch(t.keyCode){case a.ESC:t.preventDefault(),n.hide(t);break;case a.UP:t.preventDefault(),n.prev();break;case a.DOWN:t.preventDefault(),n.next();break;case a.P:if(!t.ctrlKey)return;t.preventDefault(),n.prev();break;case a.N:if(!t.ctrlKey)return;t.preventDefault(),n.next();break;case a.TAB:case a.ENTER:if(!n.visible())return;t.preventDefault(),n.choose(t);break;default:e.noop()}},t}(),o=function(){function n(n,r){this.app=n,this.at=r,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,t.append(this.$el=e("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new s(this),this.view=new l(this)}return n.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},n.prototype.init=function(t){return this.setting=e.extend({},this.setting||e.fn.atwho.default,t),this.view.init(),this.model.reload(this.setting.data)},n.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},n.prototype.call_default=function(){var t,n,r;r=arguments[0],t=2<=arguments.length?c.call(arguments,1):[];try{return i[r].apply(this,t)}catch(t){return n=t,e.error(""+n+" Or maybe At.js doesn't have function "+r)}},n.prototype.trigger=function(e,t){var n,r;return null==t&&(t=[]),
t.push(this),n=this.get_opt("alias"),r=n?""+e+"-"+n+".atwho":""+e+".atwho",this.$inputor.trigger(r,t)},n.prototype.callbacks=function(e){return this.get_opt("callbacks")[e]||i[e]},n.prototype.get_opt=function(e,t){var n;try{return this.setting[e]}catch(e){return n=e,null}},n.prototype.content=function(){return this.$inputor.is("textarea, input")?this.$inputor.val():this.$inputor.text()},n.prototype.catch_query=function(){var e,t,n,r,o,i;return t=this.content(),e=this.$inputor.caret("pos",{iframe:this.app.iframe}),i=t.slice(0,e),r=this.callbacks("matcher").call(this,this.at,i,this.get_opt("start_with_space")),"string"==typeof r&&r.length<=this.get_opt("max_len",20)?(o=e-r.length,n=o+r.length,this.pos=o,r={text:r,head_pos:o,end_pos:n},this.trigger("matched",[this.at,r.text])):(r=null,this.view.hide()),this.query=r},n.prototype.rect=function(){var e,t;if(e=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return"true"===this.$inputor.attr("contentEditable")&&(e=this.cur_rect||(this.cur_rect=e)||e),t=this.app.document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+t}},n.prototype.reset_rect=function(){if("true"===this.$inputor.attr("contentEditable"))return this.cur_rect=null},n.prototype.mark_range=function(){if("true"===this.$inputor.attr("contentEditable")&&(this.app.window.getSelection&&(this.range=this.app.window.getSelection().getRangeAt(0)),this.app.document.selection))return this.ie8_range=this.app.document.selection.createRange()},n.prototype.insert_content_for=function(t){var n,r,o;return r=t.data("value"),o=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!o?r:(n=e.extend({},t.data("item-data"),{"atwho-data-value":r,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,o,n))},n.prototype.insert=function(t,n){var r,o,i,a,s,l,c,u,p;return r=this.$inputor,p=this.callbacks("inserting_wrapper").call(this,r,t,this.get_opt("suffix")),r.is("textarea, input")?(l=r.val(),c=l.slice(0,Math.max(this.query.head_pos-this.at.length,0)),u=""+c+p+l.slice(this.query.end_pos||0),r.val(u),r.caret("pos",c.length+p.length,{iframe:this.app.iframe})):(a=this.range)?(i=a.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,a.setStart(a.endContainer,Math.max(i,0)),a.setEnd(a.endContainer,a.endOffset),a.deleteContents(),o=e(p,this.app.document)[0],a.insertNode(o),a.setEndAfter(o),a.collapse(!1),s=this.app.window.getSelection(),s.removeAllRanges(),s.addRange(a)):(a=this.ie8_range)&&(a.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),a.pasteHTML(p),a.collapse(!1),a.select()),r.is(":focus")||r.focus(),r.change()},n.prototype.render_view=function(e){var t;return t=this.get_opt("search_key"),e=this.callbacks("sorter").call(this,this.query.text,e.slice(0,1001),t),this.view.render(e.slice(0,this.get_opt("limit")))},n.prototype.look_up=function(){var t,n;if(t=this.catch_query())return n=function(e){return e&&e.length>0?this.render_view(e):this.view.hide()},this.model.query(t.text,e.proxy(n,this)),t},n}(),s=function(){function t(e){this.context=e,this.at=this.context.at,this.storage=this.context.$inputor}return t.prototype.destroy=function(){return this.storage.data(this.at,null)},t.prototype.saved=function(){return this.fetch()>0},t.prototype.query=function(e,t){var n,r,o;return n=this.fetch(),r=this.context.get_opt("search_key"),n=this.context.callbacks("filter").call(this.context,e,n,r)||[],o=this.context.callbacks("remote_filter"),n.length>0||!o&&0===n.length?t(n):o.call(this.context,e,t)},t.prototype.fetch=function(){return this.storage.data(this.at)||[]},t.prototype.save=function(e){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,e||[]))},t.prototype.load=function(e){if(!this.saved()&&e)return this._load(e)},t.prototype.reload=function(e){return this._load(e)},t.prototype._load=function(t){return"string"==typeof t?e.ajax(t,{dataType:"json"}).done(function(e){return function(t){return e.save(t)}}(this)):this.save(t)},t}(),l=function(){function t(t){this.context=t,this.$el=e("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return t.prototype.init=function(){var e;return e=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+e})},t.prototype.destroy=function(){return this.$el.remove()},t.prototype.bind_event=function(){var t;return t=this.$el.find("ul"),t.on("mouseenter.atwho-view","li",function(n){return t.find(".cur").removeClass("cur"),e(n.currentTarget).addClass("cur")}).on("click",function(e){return function(t){return e.choose(t),t.preventDefault()}}(this))},t.prototype.visible=function(){return this.$el.is(":visible")},t.prototype.choose=function(e){var t,n;if((t=this.$el.find(".cur")).length&&(n=this.context.insert_content_for(t),this.context.insert(this.context.callbacks("before_insert").call(this.context,n,t),t),this.context.trigger("inserted",[t,e]),this.hide(e)),this.context.get_opt("hide_without_suffix"))return this.stop_showing=!0},t.prototype.reposition=function(t){var n,r;return t.bottom+this.$el.height()-e(window).scrollTop()>e(window).height()&&(t.bottom=t.top-this.$el.height()),n={left:t.left,top:t.bottom},null!=(r=this.context.callbacks("before_reposition"))&&r.call(this.context,n),this.$el.offset(n),this.context.trigger("reposition",[n])},t.prototype.next=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.next(),t.length||(t=this.$el.find("li:first")),t.addClass("cur")},t.prototype.prev=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.prev(),t.length||(t=this.$el.find("li:last")),t.addClass("cur")},t.prototype.show=function(){var e;return this.stop_showing?void(this.stop_showing=!1):(this.context.mark_range(),this.visible()||(this.$el.show(),this.context.trigger("shown")),(e=this.context.rect())?this.reposition(e):void 0)},t.prototype.hide=function(e,t){var n;if(this.visible())return isNaN(t)?(this.context.reset_rect(),this.$el.hide(),this.context.trigger("hidden",[e])):(n=function(e){return function(){return e.hide()}}(this),clearTimeout(this.timeout_id),this.timeout_id=setTimeout(n,t))},t.prototype.render=function(t){var n,r,o,i,a,s,l;if(!(e.isArray(t)&&t.length>0))return void this.hide();for(this.$el.find("ul").empty(),r=this.$el.find("ul"),a=this.context.get_opt("tpl"),s=0,l=t.length;s<l;s++)o=t[s],o=e.extend({},o,{"atwho-at":this.context.at}),i=this.context.callbacks("tpl_eval").call(this.context,a,o),n=e(this.context.callbacks("highlighter").call(this.context,i,this.context.query.text)),n.data("item-data",o),r.append(n);return this.show(),this.context.get_opt("highlight_first")?r.find("li:first").addClass("cur"):void 0},t}(),a={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78},i={before_save:function(t){var n,r,o,i;if(!e.isArray(t))return t;for(i=[],r=0,o=t.length;r<o;r++)n=t[r],e.isPlainObject(n)?i.push(n):i.push({name:n});return i},matcher:function(e,t,n){var r,o;return e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(e="(?:^|\\s)"+e),o=new RegExp(e+"([A-Za-z0-9_+-]*)$|"+e+"([^\\x00-\\xff]*)$","gi"),r=o.exec(t),r?r[2]||r[1]:null},filter:function(e,t,n){var r,o,i,a;for(a=[],o=0,i=t.length;o<i;o++)r=t[o],~r[n].toLowerCase().indexOf(e.toLowerCase())&&a.push(r);return a},remote_filter:null,sorter:function(e,t,n){var r,o,i,a;if(!e)return t;for(a=[],o=0,i=t.length;o<i;o++)r=t[o],r.atwho_order=r[n].toLowerCase().indexOf(e.toLowerCase()),r.atwho_order>-1&&a.push(r);return a.sort(function(e,t){return e.atwho_order-t.atwho_order})},tpl_eval:function(e,t){var n;try{return e.replace(/\$\{([^\}]*)\}/g,function(e,n,r){return t[n]})}catch(e){return n=e,""}},highlighter:function(e,t){var n;return t?(n=new RegExp(">\\s*(\\w*?)("+t.replace("+","\\+")+")(\\w*)\\s*<","ig"),e.replace(n,function(e,t,n,r){return"> "+t+"<strong>"+n+"</strong>"+r+" <"})):e},before_insert:function(e,t){return e},inserting_wrapper:function(e,t,n){var r,o;return r=""===n?n:n||" ",e.is("textarea, input")?""+t+r:"true"===e.attr("contentEditable")?(r=""===n?n:n||"&nbsp;",/firefox/i.test(navigator.userAgent)?o="<span>"+t+r+"</span>":(n="<span contenteditable='false'>"+r+"<span>",o="<span contenteditable='false'>"+t+n+"</span>"),this.app.document.selection&&(o="<span contenteditable='true'>"+t+"</span>"),o):void 0}},n={load:function(e,t){var n;if(n=this.controller(e))return n.model.load(t)},setIframe:function(e){return this.setIframe(e),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},t=e("<div id='atwho-container'></div>"),e.fn.atwho=function(o){var i,a;return a=arguments,e("body").append(t),i=null,this.filter("textarea, input, [contenteditable=true]").each(function(){var t,s;return(s=(t=e(this)).data("atwho"))||t.data("atwho",s=new r(this)),"object"!=typeof o&&o?n[o]&&s?i=n[o].apply(s,Array.prototype.slice.call(a,1)):e.error("Method "+o+" does not exist on jQuery.caret"):s.reg(o.at,o)}),i||this},e.fn.atwho.default={at:void 0,alias:void 0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span id='${id}'>${atwho-data-value}</span>",callbacks:i,search_key:"name",suffix:void 0,hide_without_suffix:!1,start_with_space:!0,highlight_first:!0,limit:5,max_len:20,display_timeout:300,delay:null}})}.call(this),function(){!function(e){return"function"==typeof define&&define.amd?define("caret",["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t,n,r,o,i,a,s,l,c,u,p;return u="caret",t=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.setPos=function(){return this.domInputor},t.prototype.getIEPosition=function(){return e.noop()},t.prototype.getPosition=function(){return e.noop()},t.prototype.getOldIEPos=function(){var e,t;return t=s.selection.createRange(),e=s.body.createTextRange(),e.moveToElementText(this.domInputor),e.setEndPoint("EndToEnd",t),e.text.length},t.prototype.getPos=function(){var e,t,n;return(n=this.range())?(e=n.cloneRange(),e.selectNodeContents(this.domInputor),e.setEnd(n.endContainer,n.endOffset),t=e.toString().length,e.detach(),t):s.selection?this.getOldIEPos():void 0},t.prototype.getOldIEOffset=function(){var e,t;return e=s.selection.createRange().duplicate(),e.moveStart("character",-1),t=e.getBoundingClientRect(),{height:t.bottom-t.top,left:t.left,top:t.top}},t.prototype.getOffset=function(){var t,n,r,o;if(c.getSelection&&(r=this.range())){if(r.endOffset-1<0)return null;t=r.cloneRange(),t.setStart(r.endContainer,r.endOffset-1),t.setEnd(r.endContainer,r.endOffset),o=t.getBoundingClientRect(),n={height:o.height,left:o.left+o.width,top:o.top},t.detach()}else s.selection&&(n=this.getOldIEOffset());return n&&!l&&(n.top+=e(c).scrollTop(),n.left+=e(c).scrollLeft()),n},t.prototype.range=function(){var e;if(c.getSelection)return e=c.getSelection(),e.rangeCount>0?e.getRangeAt(0):null},t}(),n=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.getIEPos=function(){var e,t,n,r,o,i,a;return t=this.domInputor,i=s.selection.createRange(),o=0,i&&i.parentElement()===t&&(r=t.value.replace(/\r\n/g,"\n"),n=r.length,a=t.createTextRange(),a.moveToBookmark(i.getBookmark()),e=t.createTextRange(),e.collapse(!1),o=a.compareEndPoints("StartToEnd",e)>-1?n:-a.moveStart("character",-n)),o},t.prototype.getPos=function(){return s.selection?this.getIEPos():this.domInputor.selectionStart},t.prototype.setPos=function(e){var t,n;return t=this.domInputor,s.selection?(n=t.createTextRange(),n.move("character",e),n.select()):t.setSelectionRange&&t.setSelectionRange(e,e),t},t.prototype.getIEOffset=function(e){var t,n,r,o;return n=this.domInputor.createTextRange(),e||(e=this.getPos()),n.move("character",e),r=n.boundingLeft,o=n.boundingTop,t=n.boundingHeight,{left:r,top:o,height:t}},t.prototype.getOffset=function(t){var n,r,o;return n=this.$inputor,s.selection?(r=this.getIEOffset(t),r.top+=e(c).scrollTop()+n.scrollTop(),r.left+=e(c).scrollLeft()+n.scrollLeft(),r):(r=n.offset(),o=this.getPosition(t),r={left:r.left+o.left-n.scrollLeft(),top:r.top+o.top-n.scrollTop(),height:o.height})},t.prototype.getPosition=function(e){var t,n,o,i,a,s,l;return t=this.$inputor,i=function(e){return e.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===e&&(e=this.getPos()),l=t.val().slice(0,e),o=t.val().slice(e),a="<span style='position: relative; display: inline;'>"+i(l)+"</span>",a+="<span id='caret' style='position: relative; display: inline;'>|</span>",a+="<span style='position: relative; display: inline;'>"+i(o)+"</span>",s=new r(t),n=s.create(a).rect()},t.prototype.getIEPosition=function(e){var t,n,r,o,i;return r=this.getIEOffset(e),n=this.$inputor.offset(),o=r.left-n.left,i=r.top-n.top,t=r.height,{left:o,top:i,height:t}},t}(),r=function(){function t(e){this.$inputor=e}return t.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],t.prototype.mirrorCss=function(){var t,n=this;return t={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),e.each(this.css_attr,function(e,r){return t[r]=n.$inputor.css(r)}),t},t.prototype.create=function(t){return this.$mirror=e("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(t),this.$inputor.after(this.$mirror),this},t.prototype.rect=function(){var e,t,n;return e=this.$mirror.find("#caret"),t=e.position(),n={left:t.left,top:t.top,height:e.height()},this.$mirror.remove(),n},t}(),o={contentEditable:function(e){return!(!e[0].contentEditable||"true"!==e[0].contentEditable)}},a={pos:function(e){return e||0===e?this.setPos(e):this.getPos()},position:function(e){return s.selection?this.getIEPosition(e):this.getPosition(e)},offset:function(t){var n,r;return r=this.getOffset(t),l&&(n=e(l).offset(),r.top+=n.top,r.left+=n.left),r}},s=null,c=null,l=null,p=function(e){var t;return(t=null!=e?e.iframe:void 0)?(l=t,c=t.contentWindow,s=t.contentDocument||c.document):(l=void 0,c=window,s=document)},i=function(e){var t;s=e[0].ownerDocument,c=s.defaultView||s.parentWindow;try{return l=c.frameElement}catch(e){t=e}},e.fn.caret=function(r,i,s){var l;return a[r]?(e.isPlainObject(i)?(p(i),i=void 0):p(s),l=o.contentEditable(this)?new t(this):new n(this),a[r].apply(l,[i])):e.error("Method "+r+" does not exist on jQuery.caret")},e.fn.caret.EditableCaret=t,e.fn.caret.InputCaret=n,e.fn.caret.Utils=o,e.fn.caret.apis=a})}.call(this),define("Editor",["main","sfModal","template","highLight","pagedown_editor","tabIndent","diff_match_patch","jquery_scrollTo","jquery_pasteImage","atwho","caret","fileUpload"],function(e,t,n,r,o,i,a){var s=function e(t){t=$.extend({toolbar:e.toolbar,statusbar:!0,status:e.statusbar},t),this.options=t,this.converter=null,this.isBig=!1,this.isLive=!1,this.originHeight=420},l=function(e){var t,n;n=function(){$(".editor__menu--zen").addClass("editor__menu--unzen").removeClass("editor__menu--zen"),$(".editor").addClass("editor_fullscreen"),$("body").addClass("noscroll"),$(".editor__resize").hide(),$(".wmd-input").css("height","100%"),e.isBig=!0},t=function(){$(".editor__resize").show(),$(".editor__menu--unzen").addClass("editor__menu--zen").removeClass("editor__menu--unzen"),$(".editor").removeClass("editor_fullscreen"),$("body").removeClass("noscroll"),e.isBig=!1},$(".editor__menu--zen").length?n():t&&t()},c=function(e){e.mode="preview",$(".editor").removeClass("liveMode editMode").addClass("previewMode"),$(".editor-mode a").removeClass("muted"),$(".editor__menu--preview").addClass("muted"),r($("#wmd-preview"))},u=function(e){e.mode="edit",$(".editor").removeClass("liveMode previewMode").addClass("editMode"),$(".editor-mode a").removeClass("muted"),$(".editor__menu--edit").addClass("muted")},p=function(e){e.mode="live",$(".editor").removeClass("editMode previewMode").addClass("liveMode"),$(".editor-mode a").removeClass("muted"),$(".editor__menu--live").addClass("muted"),r($("#wmd-preview"))};return s.prototype.getVal=function(){return $(".wmd-input").val()},s.prototype.setVal=function(e){var t;return t=$(".wmd-input").val(e),this.pagedownEditor.refreshPreview(),t},s.prototype.change=function(e){e&&$(".wmd-input").on("input",function(){$(".editor").hasClass("error")&&($(".editor").removeClass("error").removeAttr("data-error"),$(".editor").next(".error--msg").remove()),e()})},s.prototype.render=function(e,n,s){var l,c,u,p,d,h,f,m,g,v,y,b,w,_,k,x,D,C,S,E,T,B,A,I,F,R,j;if(B=this,!this._rendered||this._rendered!==e){if(document.cookie.indexOf("typemode")>-1)return void $(e).addClass("wmd-input");n=n||"live",$(e).removeClass("hidden hide").addClass("mono form-control wmd-input"),$(e).before('<div class="editor-toolbar" id="wmd-button-bar"><ul class="editor-mode"></ul></div>'),$(e).wrap('<div class="wmd"></div>'),$(".wmd").after('<div class="editor-line"></div><div class="editor-preview fmt" id="wmd-preview"></div>'),i.config.tab="    ",i.render($(e)[0]),$(".wmd-input").pasteImageReader(function(e){v(e.name,e.dataURL)}),v=function(n,r){var o,i,a,s,l;return s=$(".wmd-input").val(),i=$(".wmd-input")[0].selectionStart,$(".wmd-input").val(s.slice(0,i)+"\n![图片上传中...]\n"+s.slice(i)),l="image/png",a={type:"POST"},a.url="/img/upload/image?enc=base64",a.name="image",o="xhrupload-"+parseInt(Math.random()*(2<<16)),a.contentType="multipart/form-data; boundary="+o,a.data="--"+o+'\ncontent-disposition: form-data; enc="base64"; name="'+a.name+'"; filename="'+encodeURIComponent(n)+'.base64"\nContent-Transfer-Encoding: base64\nContent-Type: '+l+"\n\n"+r.slice(22)+"\n\n--"+o+"--",$.ajax(a).success(function(n){var r,o,a,l;l=n[0],r=n[1],o="clipboard.png",l?(t(r),$(e).val(s.slice(0,i)+s.slice(i+13))):(a="\n!["+o+"]("+r+")\n",s=$(e).val(),$(e).val(s.slice(0,i)+a+s.slice(i+13)),B.pagedownEditor.refreshPreview(),$(".wmd-input")[0].setSelectionRange(i+1,i+1))}).error(function(t){if(413===t.status)return $(e).val(s.slice(0,i)+s.slice(i+13))})},D=function(e){return $(".editor").addClass("dragging")},k=function(e){return $(".editor").removeClass("dragging")},x=function(e){return e.originalEvent.dataTransfer.dropEffect="copy"},_=function(e){var t,n,r,o,i,a;for($(".editor").removeClass("dragging"),i=e.originalEvent.dataTransfer.files,a=[],r=0,o=i.length;r<o;r++)t=i[r],window.FileReader?(e.preventDefault(),e.stopPropagation(),n=new FileReader,n.onload=function(e){return v(t.name,e.currentTarget.result)},a.push(n.readAsDataURL(t))):a.push(void 0);return a},$(".wmd-input").on({"dragenter.dragevent":D,"dragleave.dragevent":k,"dragover.dragevent":x,"drop.dragevent":_}),$(e).atwho({at:"@",callbacks:{remote_filter:function(e,t){var n,r;if(r={q:e},!e&&$("#answerIt").length)n=$("#answerIt").data("id"),r={objectId:n};else if(!e)return;$.getJSON("/api/users/search",r,function(e){e.status||t(e.data)})},tpl_eval:function(e,t){return'<li data-value="@'+t.name+"["+t.slug+']">'+(t.avatarUrl?'<img class="avatar-24 mr10" src="'+t.avatarUrl+'" />':"")+t.name+" &nbsp; <small>@"+t.slug+"</small></li>"}}}),this.element=$(e)[0],C=this.options,p=new o.getSanitizingConverter,p.enableLine(!0),o.Extra.init(p),h=new o.Editor(p),this.converter=p,this.pagedownEditor=h,d=new a,b="@mark"+Math.ceil(1e8*Math.random())+"@",E=$("#wmd-preview"),y="",A='<span class="diff" />',j=void 0,$("#wmd-preview a").attr("target","_blank");var O=null;if(h.hooks.chain("onPreviewRefresh",function(){if(O){var e=$("img",E),t=e.length;r(E),0==t?O(!0):e.bind("load error",function(){t--,0==t&&O(!0)})}else{!function(){var e,t,n,r,o,i,a,s,l,c,u,p,h,f,m=$("#wmd-preview").html();if(t=d.diff_main(y,m),y=m,t.length>0){for(h=[],a=b,r=0;r<t.length;)e=t[r],l=e[0],f=e[1],p=f.lastIndexOf("<"),n=f.lastIndexOf(">"),0!==l?(p>=0&&p>n?l>0?h.push(f.substring(0,p)+a+f.substring(p)):(i=h[h.length-1],o=i.lastIndexOf("<"),h[h.length-1]=i.substring(0,o)+a+i.substring(o)):l>0?h.push(f+a):h.push(a),a=""):h.push(f),r++;m=h.join(""),a||(c=m.indexOf(b),u=m.substring(0,c),s=m.substr(c+b.length),p=u.lastIndexOf("<"),n=u.lastIndexOf(">"),m=p>=0&&p>n?u.substring(0,p)+A+u.substring(p)+s:s.match(/\$\$/g)?u+s:u+A+s)}return $("#wmd-preview").html(m),m}(),$("#wmd-preview a").attr("target","_blank");var n,o,i,a,s;($("#wmd-preview pre").length||$("#wmd-preview").text().indexOf("$$")!==-1)&&r(E),o=$(".diff",E),s=!1,j&&clearTimeout(j),n=$(".diff",E).parent(),n.is(E)||(n.css("background-color","#D9EDF7"),j=setTimeout(function(){n.css("background-color","transparent")},4500)),o.length>0&&(a=o.position(),i=o.parent().css("line-height"),i=i?parseInt(i):0,(a.top<0||a.top>$(".editor-preview").height()-i)&&($(".editor-preview").scrollTo(o),s=!0))}}),C.toolbar!==!1&&this.createToolbar(),$(".blog-write").length>0){var M=function(e,t){function n(t){var n=e.val(),r=n.split("\n"),o=0;m.width(e.width()),d=[];for(var a=0;a<r.length;a++)m.text(r[a]),o+=m.height(),d.push(o);m.html(""),i(t)}function r(n){var r=e.height(),o=(e.innerHeight()-r)/2,i=e.scrollTop()-o,a=t.scrollTop(),s=0,l=0,c=null;if("undefined"==typeof n){for(var u=0;u<p.length;u++)if(c=p[u],i<=c[2]){s=(i-c[3])*c[4]/(c[2]-c[3]);break}if(c)for(var d=0;d<h.length;d++){var f=h[d];if(c[0]>=f[0]&&c[1]<=f[1]){var m=h[d+1]?h[d+1][2]:t.get(0).scrollHeight;l=(0==u?0:f[2])+(m-f[2])*s,t.scrollTop(l);break}}}else for(var g=0;g<h.length;g++){var f=h[g];if(n>=f[0]&&n<=f[1]){(g==h.length-1||f[2]<a||h[g+1][2]>a+t.height())&&t.scrollTop(f[2]);break}}}function o(){var n,r=e.height(),o=(e.innerHeight()-r)/2,i=t.scrollTop(),a=!1;if(!(h.length<=0)){for(var s=0;s<h.length;s++){var l=h[s];if(i<l[2]){a=!0;break}}n=a?h[s>0?s-1:0]:h[h.length-1];var c=n[0]>0?d[n[0]-1]:0,u=d[n[1]],p=a?h[s>0?s:1][2]:t.get(0).scrollHeight,f=(i-n[2])/(p-n[2]);e.scrollTop(c+(u-c)*f+o)}}function i(e){var n=0;h=[],p=[],$(".line",t).each(function(){var e=$(this),r=e.data("start"),o=e.data("end"),i=e.data("start-original"),a=e.position().top+t.scrollTop();h.push([r,o,a,this]),"undefined"!=typeof i?(p.push([r,i-1,d[i-1],n,0]),p.push([i,o,d[o],d[i-1],1])):p.push([r,o,d[o],n,1]),n=d[o]});var o=s();e?null!==o&&r(o):r()}function a(e){var t=$(e),n=t.parent();return t.length>0&&t.prop("tagName").match(/^(hr|tr)$/i)?t:n.length>0&&"div"==n.prop("tagName").toLowerCase()?t.next():n}function s(){var t=e.val(),n=e.getSelection().start,r=0,o=0,i=null;if(!g)return i;for(;;){if(r=t.indexOf("\n",r),!(r>=0&&r<n))break;o++,r+=1}for(var s=0;s<h.length;s++){var l=h[s];if(o>=l[0]&&o<=l[1]){a(u).removeClass("focus"),a(l[3]).addClass("focus"),u=l[3],i=o;break}}return i}var l=e.css(),c=e.width(),u=null,p=[],d=[],h=[],f={display:"block",position:"absolute",left:"-99999px",top:"-99999px"},m=$("<div></div>").appendTo(document.body),g=!1;for(var v in l)v.match(/^(direction|font-family|font-size|font-style|font-weight|letter-spacing|line-height|text-align|vertical-align|white-space|word-wrap|word-break|word-spacing)$/i)&&(f[v]=l[v]);return m.css(f),m.css("min-height",f["line-height"]),setInterval(function(){e.width()!=c&&(c=e.width(),e.trigger("resize"))},150),e.on("touch keypress click",s),e.on("focus",function(){g=!0}).on("blur",function(){g=!1,a(u).removeClass("focus")}),e.on("resize",n),e.on("DOMMouseScroll mousewheel touchmove",function(){r()}),t.on("DOMMouseScroll mousewheel touchmove",function(){o()}),n};jQuery.fn.css2=jQuery.fn.css,jQuery.fn.css=function(){if(arguments.length)return jQuery.fn.css2.apply(this,arguments);for(var e=["font-family","font-size","font-weight","font-style","color","box-sizing","text-transform","text-decoration","letter-spacing","box-shadow","line-height","text-align","vertical-align","direction","background-color","background-image","background-repeat","background-position","background-attachment","opacity","width","height","top","right","bottom","left","margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","position","display","visibility","z-index","overflow-x","overflow-y","white-space","clip","float","clear","cursor","list-style-image","list-style-position","list-style-type","marker-offset","word-wrap","word-break","word-spacing"],t=e.length,n={},r=0;r<t;r++)n[e[r]]=jQuery.fn.css2.call(this,e[r]);return n},jQuery.fn.extend({getSelection:function(){var e=this.get(0);return e?("selectionStart"in e&&function(){var t=e.selectionEnd-e.selectionStart;return{start:e.selectionStart,end:e.selectionEnd,length:t,text:e.value.substr(e.selectionStart,t)}}||window.getSelection()&&function(){var e=window.getSelection(),t=e.getRangeAt(0);return{start:t.startOffset,end:t.endOffset,length:t.endOffset-t.startOffset,text:t.toString()}}||document.selection&&function(){e.focus();var t=document.selection.createRange();if(null===t)return{start:0,end:e.value.length,length:0};var n=e.createTextRange(),r=n.duplicate();return n.moveToBookmark(t.getBookmark()),r.setEndPoint("EndToStart",n),{start:r.text.length,end:r.text.length+t.text.length,length:t.text.length,text:t.text}}||function(){return null})():null},setSelection:function(e,t){var n=this.get(0);if(n)if(n.setSelectionRange)n.focus(),n.setSelectionRange(e,t);else if(n.createTextRange){var r=n.createTextRange();r.collapse(!0),r.moveEnd("character",t),r.moveStart("character",e),r.select()}},replaceSelection:function(){var e=this.get(0);if(!e)return null;var t=arguments[0]||"";return("selectionStart"in e&&function(){return e.value=e.value.substr(0,e.selectionStart)+t+e.value.substr(e.selectionEnd,e.value.length),this}||document.selection&&function(){return e.focus(),document.selection.createRange().text=t,this}||function(){return e.value+=t,jQuery(e)})()}}),O=M($(e),$("#wmd-preview"))}else T='<a class="editor__resize" href="javascript:void(0);">调整高度</a>',$(".editor").after(T),F=void 0,m=0,g=32,R=void 0,I=function(e){return R=$(".wmd-input"),m=w(e).y,F=R.height()-m,R.css("opacity",.3),$(document).mousemove(S).mouseup(f),!1},S=function(e){var t,n;return n=w(e).y,t=F+n,m>=n&&(t-=5),m=n,t=Math.max(g,t),R.height(t+"px"),t<g&&f(e),!1},f=function(){$(document).unbind("mousemove",S).unbind("mouseup",f),R.css({opacity:1}),R.focus(),R=null,F=null,m=0},w=function(e){return{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop}},$(".editor__resize").on("mousedown",I),$(window).scroll(function(){var e,t,n,r;B.isBig||(r=$(".editor").width(),n=$(".editor").offset().top,t=$(this).scrollTop(),e=62+$(".editor-help .tab-content").height(),t>=n?($(".editor-help-content.active").removeClass("active"),$(".editor__menu").css({position:"fixed",top:0,"z-index":1e3,width:r,"border-bottom":"1px solid #CCC"}),$(".editor-help").css({position:"fixed",top:"31px","z-index":1e3,width:r})):$(".editor__menu, .editor-help").css({position:"static",width:"auto","border-bottom":"none"}))});h.run(e.slice(1)),this._rendered=e,"live"===n?$(".editor__menu--live").trigger("click"):"edit"===n?$(".editor__menu--edit").trigger("click"):"preview"===n&&$(".editor__menu--preview").trigger("click"),window.localStorage&&(l="autoSaveContent_"+location.pathname+location.search,u="autoSaveTitle_"+location.pathname+location.search,c="autoSaveTags_"+location.pathname+location.search,localStorage[l]&&$(e).val(localStorage[l]),localStorage[u]&&$("#myTitle").val(localStorage[u])),s&&s(B)}},s.prototype.createToolbar=function(e){var t,n,r,o,i,a;r=this,i='<li class="pull-right"><a class="editor__menu--preview" title="预览模式"></a></li><li class="pull-right"><a class="editor__menu--live" title="实况模式"></a></li><li class="pull-right"><a class="editor__menu--edit" title="编辑模式"></a></li><li class="pull-right editor__menu--divider"></li><li id="wmd-zen-button" class="pull-right" title="全屏"><a class="editor__menu--zen"></a></li>',o=$(i),$(".editor-mode").append(o),$(".editor").delegate(".editor__menu--edit","click",function(){$(this).hasClass("muted")||u(r)}),$(".editor").delegate(".editor__menu--preview","click",function(){$(this).hasClass("muted")||c(r)}),$(".editor").delegate(".editor__menu--live","click",function(){$(this).hasClass("muted")||p(r)}),$("#wmd-zen-button").find("a").removeClass("editor__menu--bold").addClass("editor__menu--zen"),$("#wmd-zen-button").click(function(){l(r)}),t='<title>Markdown 语法指南</title><link rel="stylesheet" href="'+$('head link[rel="stylesheet"]').attr("href")+'"><script src="https://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script><script src="https://cdn.bootcss.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>',n=t+'<body style="background-color:#FAF2CC"><div class="editor-help"><ul class="editor-help-tabs nav nav-tabs" id="editorHelpTab" role="tablist">    <li rel="heading"><a href="#editorHelpHeading" role="tab" data-toggle="tab">标题 / 粗斜体</a></li>    <li rel="code"><a href="#editorHelpCode" role="tab" data-toggle="tag">代码</a></li>    <li rel="link"><a href="#editorHelpLink" role="tab" data-toggle="tag">链接</a></li>    <li rel="image"><a href="#editorHelpImage" role="tab" data-toggle="tag">图片</a></li>    <li rel="split"><a href="#editorHelpSplit" role="tab" data-toggle="tag">换行 / 分隔符</a></li>    <li rel="list"><a href="#editorHelpList" role="tab" data-toggle="tag">列表 / 引用</li></a>    <li class="pull-right"><a href="http://segmentfault.com/markdown" target="_blank">高级技巧</a></li>    </ul><div class="tab-content"><!-- 粗斜体、标题 --><div class="editor-help-content tab-pane fade" id="editorHelpHeading" rel="heading"><p>文章内容较多时，可以用标题分段：</p><pre>## 大标题 ##\n### 小标题 ###</pre><p>粗体 / 斜体</p><pre>*斜体文本*    _斜体文本_\n**粗体文本**    __粗体文本__\n***粗斜体文本***    ___粗斜体文本___</pre></div><!-- end 粗斜体、标题 --><!-- 代码 --><div class="editor-help-content tab-pane fade" id="editorHelpCode" rel="code"><p>如果你只想高亮语句中的某个函数名或关键字，可以使用 <code>`function_name()`</code> 实现</p><p>通常我们会根据您的代码片段适配合适的高亮方法，但你也可以用 <code>```</code> 包裹一段代码，并指定一种语言</p><pre>```<strong>javascript</strong>\n$(document).ready(function () {\n    alert(\'hello world\');\n});\n```</pre><p>支持的语言：<code>actionscript, apache, bash, clojure, cmake, coffeescript, cpp, cs, css, d, delphi, django, erlang, go, haskell, html, http, ini, java, javascript, json, lisp, lua, markdown, matlab, nginx, objectivec, perl, php, python, r, ruby, scala, smalltalk, sql, tex, vbscript, xml</code></p><p>您也可以使用 4 空格缩进，再贴上代码，实现相同的的效果</p><pre><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>def g(x):\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>yield from range(x, 0, -1)\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>yield from range(x)</pre><p>如你不需要代码高亮，可以用下面的方法禁用：</p><pre>```nohighlight\n```</pre></div><!-- end 代码 --><!-- 链接 --><div class="editor-help-content tab-pane fade" rel="link" id="editorHelpLink"><p>常用链接方法</p><pre>文字链接 [链接名称](http://链接网址)\n网址链接 &lt;http://链接网址&gt;</pre><p>高级链接技巧</p><pre>这个链接用 1 作为网址变量 [Google][1].\n这个链接用 yahoo 作为网址变量 [Yahoo!][yahoo].\n然后在文档的结尾为变量赋值（网址）\n\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>[1]: http://www.google.com/\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>[yahoo]: http://www.yahoo.com/</pre></div><!-- end 链接 --><!-- 图片 --><div class="editor-help-content tab-pane fade" id="editorHelpImage" rel="image"><p>跟链接的方法区别在于前面加了个感叹号 <code>!</code>，这样是不是觉得好记多了呢？</p><pre>![图片名称](http://图片网址)</pre><p>当然，你也可以像网址那样对图片网址使用变量</p><pre>这个链接用 1 作为网址变量 [Google][1].\n然后在文档的结尾位变量赋值（网址）\n\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>[1]: http://www.google.com/logo.png</pre></div><!-- end 图片 --><!-- 换行、分隔符 --><div class="editor-help-content tab-pane fade" id="editorHelpSplit" rel="split"><p>如果另起一行，只需在当前行结尾加 2 个空格</p><pre>在当前行的结尾加 2 个空格<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>\n这行就会新起一行</pre><p>如果是要起一个新段落，只需要空出一行即可。</p><p>如果你有写分割线的习惯，可以新起一行输入三个减号 <code>-</code>：</p><pre>---\n</pre></div><!-- end 换行、分隔符 --><!-- 列表、引用 --><div class="editor-help-content tab-pane fade" id="editorHelpList" rel="list"><p>普通列表</p><pre>-<i class="nbsp">&nbsp;</i>列表文本前使用 [减号+空格]\n+<i class="nbsp">&nbsp;</i>列表文本前使用 [加号+空格]\n*<i class="nbsp">&nbsp;</i>列表文本前使用 [星号+空格]</pre><p>带数字的列表</p><pre>1.<i class="nbsp">&nbsp;</i>列表前使用 [数字+空格]\n2.<i class="nbsp">&nbsp;</i>我们会自动帮你添加数字\n7.<i class="nbsp">&nbsp;</i>不用担心数字不对，显示的时候我们会自动把这行的 7 纠正为 3</pre><p>引用</p><pre>&gt;<i class="nbsp">&nbsp;</i>引用文本前使用 [大于号+空格]\n&gt;<i class="nbsp">&nbsp;</i>折行可以不加，新起一行都要加上哦</pre></div><!-- end 列表、引用 --></div></div><script>$("#editorHelpTab a").eq(0).tab("show");$("#editorHelpTab a").click(function (e) {    var _$wrap = $(this).parent();    if(! _$wrap.hasClass("pull-right")) {        e.preventDefault();        $(this).tab("show");    }});</script></body>',
a=null,$("body").on("click","#wmd-help-button",function(){a&&a.window?a.focus():(a=window.open("","Markdown Help","channelmode=yes, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, width=505, height=400, top=100, left=100"),a.document.write(n),a.onbeforeunload=function(){a=null})})},s}),define("autoSave",["jquery"],function(e){"use strict";var t,n,r,o;return n=void 0,o=void 0,r=void 0,t=function(){},t.prototype.bind=function(t,o){var i,a,s,l;i=e("#editorStatus"),n=t,this.form=o,r=this,e("[name=title]").on("input",function(){""!==e.trim(e(this).val())&&(e(this).hasClass("notautosave")||r.change()),window.localStorage&&localStorage.setItem("autoSaveTitle_"+location.pathname+location.search,e(this).val())}),e("[name=tags]").on("change",function(){""!==e.trim(e(this).val())&&r.change()}),a=e("#license"),a.length&&a.on("change",function(){return r.change()}),l=e(".reasons"),l.length&&l.on("click",function(){return r.change()}),s=e("input[name=noticeAnswerers]"),s.length&&s.on("change",function(){return r.change()}),n.change?n.change(function(){""!==e.trim(n.getVal())&&r.change(),window.localStorage&&window.localStorage.setItem("autoSaveContent_"+location.pathname+location.search,n.getVal())}):n.on("change",function(){""!==e.trim(n.getValue())&&r.change(),window.localStorage&&window.localStorage.setItem("autoSaveContent_"+location.pathname+location.search,n.getValue())}),e("#dropIt").unbind(),e("#dropIt").click(function(){e.post("/api/draft/"+e("#draftId").val()+"/delete",function(t){0===t.status?(i.html("已舍弃"),e("#draftId").val(""),window.localStorage&&localStorage.removeItem("autoSaveContent_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTitle_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTag_"+location.pathname)):i.html("舍弃失败"),e("#dropIt").addClass("hidden")})})},t.prototype.change=function(){var t;t=e("#editorStatus"),t.html("保存中...").removeClass("hidden"),e("#dropIt").addClass("hidden"),clearTimeout(o),o=setTimeout(function(){r.save()},4e3)},t.prototype.save=function(){var t,n,r;if(t=e("#editorStatus"),n=this,!e("#answerIt, #publishIt").attr("disabled")){r=new n.form;var o=r.type;"article"==r.type&&(r.type=e(".blog__type-toggle").data("type"),r.url=e("input[name=url]").val()),e.post("/api/"+o+"/draft/save",r,function(n){0===n.status?(t.html("已保存草稿"),e("#dropIt").data("id",n.data).removeClass("hidden"),e("#draftId").val(n.data),window.localStorage&&(window.localStorage.removeItem("autoSaveContent_"+location.pathname+location.search),window.localStorage.removeItem("autoSaveTitle_"+location.pathname+location.search))):t.html("保存失败"),e("#publishIt, #answerIt").removeAttr("disabled")})}},new t}),define("cityInfoLite",[],function(){"use strict";return SF.cityInfo=[{name:"中国"},{name:"阿富汗"},{name:"奥兰群岛"},{name:"阿拉斯加"},{name:"阿尔巴尼亚"},{name:"阿尔及利亚"},{name:"东萨摩亚(美)"},{name:"安道尔"},{name:"安哥拉"},{name:"安圭拉岛(英)"},{name:"南极"},{name:"安提瓜和巴布达"},{name:"阿根廷"},{name:"亚美尼亚"},{name:"阿鲁巴岛"},{name:"澳大利亚"},{name:"奥地利"},{name:"阿塞拜疆"},{name:"巴林"},{name:"根西岛(英)"},{name:"孟加拉国"},{name:"巴巴多斯"},{name:"白俄罗斯"},{name:"比利时"},{name:"伯利兹"},{name:"贝宁"},{name:"百慕大群岛(英)"},{name:"不丹"},{name:"玻利维亚"},{name:"波斯尼亚和黑塞哥维那"},{name:"博茨瓦纳"},{name:"巴西"},{name:"保加利亚"},{name:"布基纳法索"},{name:"布隆迪"},{name:"喀麦隆"},{name:"加拿大"},{name:"加那利群岛"},{name:"佛得角"},{name:"开曼群岛(英)"},{name:"中非"},{name:"乍得"},{name:"智利"},{name:"圣诞岛"},{name:"科科斯岛"},{name:"哥伦比亚"},{name:"科摩罗"},{name:"刚果"},{name:"科克群岛(新)"},{name:"哥斯达黎加"},{name:"克罗地亚"},{name:"古巴"},{name:"塞浦路斯"},{name:"捷克"},{name:"刚果(金)"},{name:"丹麦"},{name:"迪戈加西亚岛"},{name:"吉布提"},{name:"多米尼克国"},{name:"多米尼加共和国"},{name:"厄瓜多尔"},{name:"埃及"},{name:"萨尔瓦多"},{name:"赤道几内亚"},{name:"厄立特里亚"},{name:"爱沙尼亚"},{name:"埃塞俄比亚"},{name:"福克兰群岛"},{name:"法罗群岛(丹)"},{name:"斐济"},{name:"芬兰"},{name:"法国"},{name:"法属波里尼西亚"},{name:"加蓬"},{name:"冈比亚"},{name:"格鲁吉亚"},{name:"德国"},{name:"加纳"},{name:"直布罗陀(英)"},{name:"希腊"},{name:"格陵兰岛"},{name:"格林纳达"},{name:"瓜德罗普岛(法)"},{name:"关岛(美)"},{name:"危地马拉"},{name:"几内亚"},{name:"几内亚比绍"},{name:"法属圭亚那"},{name:"圭亚那"},{name:"海地"},{name:"洪都拉斯"},{name:"匈牙利"},{name:"冰岛"},{name:"印度"},{name:"印度尼西亚"},{name:"伊郎"},{name:"伊拉克"},{name:"爱尔兰"},{name:"马恩岛(英)"},{name:"以色列"},{name:"意大利"},{name:"科特迪瓦"},{name:"牙买加"},{name:"日本"},{name:"泽西岛(英)"},{name:"约旦"},{name:"柬埔塞"},{name:"哈萨克斯坦"},{name:"肯尼亚"},{name:"基里巴斯"},{name:"科威特"},{name:"吉尔吉斯斯坦"},{name:"老挝"},{name:"拉脱维亚"},{name:"黎巴嫩"},{name:"莱索托"},{name:"利比里亚"},{name:"利比亚"},{name:"列支敦士登"},{name:"立陶宛"},{name:"卢森堡"},{name:"马其顿"},{name:"马达加斯加"},{name:"马拉维"},{name:"马来西亚"},{name:"马尔代夫"},{name:"马里"},{name:"马耳他"},{name:"马绍尔群岛"},{name:"马提尼克(法)"},{name:"毛里塔尼亚"},{name:"毛里求斯"},{name:"马约特岛"},{name:"墨西哥"},{name:"密克罗尼西亚(美)"},{name:"中途岛(美)"},{name:"摩纳哥"},{name:"蒙古"},{name:"黑山"},{name:"蒙特塞拉特岛(英)"},{name:"摩洛哥"},{name:"莫桑比克"},{name:"缅甸"},{name:"纳米比亚"},{name:"瑙鲁"},{name:"尼泊尔"},{name:"荷兰"},{name:"荷属安的列斯群岛"},{name:"新喀里多尼亚群岛(法)"},{name:"新西兰"},{name:"尼加拉瓜"},{name:"尼日尔"},{name:"尼日利亚"},{name:"纽埃岛(新)"},{name:"诺福克岛(澳)"},{name:"朝鲜"},{name:"马里亚纳群岛"},{name:"挪威"},{name:"阿曼"},{name:"巴基斯坦"},{name:"帕劳(美)"},{name:"巴拿马"},{name:"巴布亚新几内亚"},{name:"巴拉圭"},{name:"秘鲁"},{name:"菲律宾"},{name:"波兰"},{name:"葡萄牙"},{name:"波多黎各(美)"},{name:"卡塔尔"},{name:"摩尔多瓦"},{name:"留尼汪岛"},{name:"罗马尼亚"},{name:"俄罗斯"},{name:"卢旺达"},{name:"阿森松(英)"},{name:"圣赫勒拿"},{name:"圣克里斯托弗和尼维斯"},{name:"圣卢西亚"},{name:"圣皮埃尔岛及密克隆岛"},{name:"圣文森特岛(英)"},{name:"西萨摩亚"},{name:"圣马力诺"},{name:"圣多美和普林西比"},{name:"沙特阿拉伯"},{name:"塞内加尔"},{name:"塞尔维亚"},{name:"塞舌尔"},{name:"塞拉利昂"},{name:"新加坡"},{name:"圣马丁(荷)"},{name:"斯洛伐克"},{name:"斯洛文尼亚"},{name:"所罗门群岛"},{name:"索马里"},{name:"南非"},{name:"南乔治亚与南桑威奇群岛"},{name:"韩国"},{name:"西班牙"},{name:"斯里兰卡"},{name:"苏丹"},{name:"苏里南"},{name:"斯瓦尔巴群岛(挪)"},{name:"斯威士兰"},{name:"瑞典"},{name:"瑞士"},{name:"叙利亚"},{name:"塔吉克斯坦"},{name:"泰国"},{name:"巴哈马国"},{name:"梵蒂冈"},{name:"东帝汶"},{name:"多哥"},{name:"托克劳群岛(新)"},{name:"汤加"},{name:"特立尼达和多巴哥"},{name:"突尼斯"},{name:"土耳其"},{name:"土库曼斯坦"},{name:"特克斯和凯科斯群岛(英)"},{name:"图瓦卢"},{name:"乌干达"},{name:"乌克兰"},{name:"阿拉伯联合酋长国"},{name:"英国"},{name:"坦桑尼亚"},{name:"美国本土外小岛屿"},{name:"美国"},{name:"乌拉圭"},{name:"乌兹别克斯坦"},{name:"瓦努阿图"},{name:"委内瑞拉"},{name:"越南"},{name:"维尔京群岛(英)"},{name:"维尔京群岛(美)"},{name:"瓦里斯和富士那群岛(法)"},{name:"西撒哈拉"},{name:"也门"},{name:"南斯拉夫"},{name:"赞比亚"},{name:"桑给巴尔"},{name:"津巴布韦"},{name:"槟榔屿"},{name:"北海"},{name:"槟城"},{name:"玻璃"},{name:"大山脚"},{name:"高渊"},{name:"加央"},{name:"丁加奴"},{name:"甘马挽"},{name:"瓜拉丁加奴"},{name:"龙运"},{name:"马江"},{name:"实兆"},{name:"乌鲁"},{name:"勿述"},{name:"吉打"},{name:"巴东得腊"},{name:"笨筒"},{name:"浮罗交怡"},{name:"哥打士打"},{name:"古邦巴素"},{name:"瓜拉姆达"},{name:"华玲"},{name:"居林"},{name:"万拉峇鲁"},{name:"吉兰丹"},{name:"巴西富地"},{name:"巴西马"},{name:"丹那美拉"},{name:"道北"},{name:"登卓"},{name:"哥打巴鲁"},{name:"瓜拉吉赖"},{name:"话望生"},{name:"马樟"},{name:"日里"},{name:"吉隆坡"},{name:"马六甲"},{name:"亚罗牙也"},{name:"野新"},{name:"纳闽"},{name:"纳闽"},{name:"维多利亚"},{name:"彭亨"},{name:"百乐"},{name:"北根"},{name:"淡马鲁"},{name:"而连突"},{name:"关丹"},{name:"金马仑高原"},{name:"劳勿"},{name:"立卑"},{name:"马兰"},{name:"文冬"},{name:"云冰"},{name:"霹雳"},{name:"安顺"},{name:"丹绒马林"},{name:"和丰"},{name:"紅土坎"},{name:"华都牙也"},{name:"江沙"},{name:"太平"},{name:"怡保"},{name:"柔佛"},{name:"笨珍"},{name:"丰盛港"},{name:"哥打丁宜"},{name:"居銮"},{name:"峇株巴辖"},{name:"麻坡"},{name:"昔加末"},{name:"新山"},{name:"森美兰"},{name:"波德申"},{name:"淡边"},{name:"芙蓉"},{name:"瓜拉庇劳"},{name:"林茂"},{name:"仁保"},{name:"日叻务"},{name:"沙巴"},{name:"吧巴"},{name:"保佛"},{name:"比鲁兰"},{name:"必达士"},{name:"兵南邦"},{name:"担布南"},{name:"丹南"},{name:"斗湖"},{name:"斗亚兰"},{name:"哥打基纳巴鲁"},{name:"哥打马鲁都"},{name:"根地咬"},{name:"古达"},{name:"古打毛律"},{name:"古纳"},{name:"瓜拉班尤"},{name:"京那巴登岸"},{name:"兰脑"},{name:"拿笃"},{name:"纳巴湾"},{name:"山打根"},{name:"西比陶"},{name:"仙本那"},{name:"沙捞越"},{name:"古晋"},{name:"加帛"},{name:"林梦"},{name:"美里"},{name:"民都鲁"},{name:"木胶"},{name:"木中"},{name:"三马拉汉"},{name:"斯里阿曼"},{name:"泗里街"},{name:"泗务"},{name:"雪兰莪"},{name:"八打灵"},{name:"鹅麦"},{name:"瓜拉冷岳"},{name:"瓜拉雪兰莪"},{name:"沙白安南"},{name:"乌鲁冷岳"},{name:"乌鲁雪兰莪"},{name:"雪邦"},{name:"北京"},{name:"天津"},{name:"石家庄"},{name:"唐山"},{name:"秦皇岛"},{name:"邯郸"},{name:"邢台"},{name:"保定"},{name:"张家口"},{name:"承德"},{name:"沧州"},{name:"霸州"},{name:"三河"},{name:"衡水"},{name:"太原"},{name:"大同"},{name:"阳泉"},{name:"长治"},{name:"晋城"},{name:"朔州"},{name:"晋中"},{name:"运城"},{name:"忻州"},{name:"侯马"},{name:"霍州"},{name:"吕梁"},{name:"呼和浩特"},{name:"包头"},{name:"乌海"},{name:"赤峰"},{name:"通辽"},{name:"鄂尔多斯"},{name:"呼伦贝尔"},{name:"巴彦淖尔"},{name:"乌兰察布"},{name:"兴安盟"},{name:"锡林郭勒盟"},{name:"阿拉善盟"},{name:"沈阳"},{name:"大连"},{name:"鞍山"},{name:"抚顺"},{name:"本溪"},{name:"丹东"},{name:"锦州"},{name:"营口"},{name:"阜新"},{name:"灯塔"},{name:"盘锦"},{name:"铁岭"},{name:"朝阳"},{name:"葫芦岛"},{name:"长春"},{name:"吉林"},{name:"四平"},{name:"辽源"},{name:"通化"},{name:"白山"},{name:"松原"},{name:"白城"},{name:"延边朝鲜族自治州"},{name:"哈尔滨"},{name:"齐齐哈尔"},{name:"鸡西"},{name:"鹤岗"},{name:"双鸭山"},{name:"大庆"},{name:"伊春"},{name:"佳木斯"},{name:"七台河"},{name:"绥芬河"},{name:"海林"},{name:"宁安"},{name:"穆棱"},{name:"黑河"},{name:"绥化"},{name:"大兴安岭地区"},{name:"上海"},{name:"南京"},{name:"无锡"},{name:"徐州"},{name:"常州"},{name:"苏州"},{name:"南通"},{name:"连云港"},{name:"淮安"},{name:"盐城"},{name:"镇江"},{name:"泰州"},{name:"宿迁"},{name:"杭州"},{name:"宁波"},{name:"温州"},{name:"嘉兴"},{name:"湖州"},{name:"绍兴"},{name:"金华"},{name:"衢州"},{name:"舟山"},{name:"温岭"},{name:"临海"},{name:"丽水"},{name:"合肥"},{name:"芜湖"},{name:"蚌埠"},{name:"淮南"},{name:"马鞍山"},{name:"淮北"},{name:"铜陵"},{name:"安庆"},{name:"滁州"},{name:"阜阳"},{name:"宿州"},{name:"六安"},{name:"亳州"},{name:"池州"},{name:"宣城"},{name:"福州"},{name:"厦门"},{name:"莆田"},{name:"三明"},{name:"泉州"},{name:"漳州"},{name:"南平"},{name:"龙岩"},{name:"宁德"},{name:"南昌"},{name:"景德镇"},{name:"萍乡"},{name:"九江"},{name:"新余"},{name:"鹰潭"},{name:"赣州"},{name:"吉安"},{name:"宜春"},{name:"上饶"},{name:"济南"},{name:"青岛"},{name:"淄博"},{name:"枣庄"},{name:"东营"},{name:"烟台"},{name:"潍坊"},{name:"济宁"},{name:"泰安"},{name:"文登"},{name:"荣成"},{name:"乳山"},{name:"日照"},{name:"莱芜"},{name:"临沂"},{name:"德州"},{name:"聊城"},{name:"滨州"},{name:"菏泽"},{name:"郑州"},{name:"开封"},{name:"洛阳"},{name:"平顶山"},{name:"安阳"},{name:"鹤壁"},{name:"新乡"},{name:"焦作"},{name:"济源"},{name:"濮阳"},{name:"禹州"},{name:"长葛"},{name:"漯河"},{name:"三门峡"},{name:"南阳"},{name:"商丘"},{name:"信阳"},{name:"周口"},{name:"驻马店"},{name:"武汉"},{name:"黄石"},{name:"十堰"},{name:"宜昌"},{name:"襄阳"},{name:"鄂州"},{name:"荆门"},{name:"孝感"},{name:"石首"},{name:"洪湖"},{name:"松滋"},{name:"黄冈"},{name:"咸宁"},{name:"随州"},{name:"恩施土家族苗族自治州"},{name:"仙桃"},{name:"潜江"},{name:"天门"},{name:"神农架林区"},{name:"长沙"},{name:"株洲"},{name:"湘潭"},{name:"衡阳"},{name:"邵阳"},{name:"岳阳"},{name:"常德"},{name:"张家界"},{name:"益阳"},{name:"资兴"},{name:"永州"},{name:"怀化"},{name:"娄底"},{name:"湘西土家族苗族自治州"},{name:"广州"},{name:"韶关"},{name:"深圳"},{name:"珠海"},{name:"汕头"},{name:"佛山"},{name:"江门"},{name:"湛江"},{name:"茂名"},{name:"肇庆"},{name:"惠州"},{name:"梅州"},{name:"汕尾"},{name:"河源"},{name:"阳江"},{name:"清远"},{name:"东莞"},{name:"潮州"},{name:"揭阳"},{name:"云浮"},{name:"南宁"},{name:"柳州"},{name:"桂林"},{name:"梧州"},{name:"北海"},{name:"防城港"},{name:"钦州"},{name:"贵港"},{name:"玉林"},{name:"贺州"},{name:"河池"},{name:"来宾"},{name:"崇左"},{name:"海口"},{name:"三亚"},{name:"五指山"},{name:"琼海"},{name:"儋州"},{name:"文昌"},{name:"万宁"},{name:"东方"},{name:"西沙群岛"},{name:"南沙群岛"},{name:"中沙群岛的岛礁及其海域"},{name:"重庆"},{name:"成都"},{name:"自贡"},{name:"攀枝花"},{name:"泸州"},{name:"德阳"},{name:"绵阳"},{name:"广元"},{name:"遂宁"},{name:"市中区"},{name:"东兴区"},{name:"威远县"},{name:"资中县"},{name:"隆昌县"},{name:"其它区"},{name:"乐山"},{name:"南充"},{name:"眉山"},{name:"宜宾"},{name:"广安"},{name:"达州"},{name:"雅安"},{name:"巴中"},{name:"阿坝藏族羌族自治州"},{name:"甘孜藏族自治州"},{name:"凉山彝族自治州"},{name:"贵阳"},{name:"六盘水"},{name:"遵义"},{name:"安顺"},{name:"铜仁地区"},{name:"黔西南布依族苗族自治州"},{name:"毕节地区"},{name:"黔东南苗族侗族自治州"},{name:"黔南布依族苗族自治州"},{name:"昆明"},{name:"曲靖"},{name:"玉溪"},{name:"保山"},{name:"昭通"},{name:"丽江"},{name:"普洱"},{name:"临沧"},{name:"楚雄彝族自治州"},{name:"红河哈尼族彝族自治州"},{name:"文山壮族苗族自治州"},{name:"西双版纳傣族自治州"},{name:"大理白族自治州"},{name:"德宏傣族景颇族自治州"},{name:"怒江傈僳族自治州"},{name:"迪庆藏族自治州"},{name:"拉萨"},{name:"昌都地区"},{name:"山南地区"},{name:"日喀则地区"},{name:"那曲地区"},{name:"阿里地区"},{name:"林芝地区"},{name:"西安"},{name:"铜川"},{name:"宝鸡"},{name:"咸阳"},{name:"渭南"},{name:"延安"},{name:"汉中"},{name:"榆林"},{name:"安康"},{name:"兰州"},{name:"嘉峪关"},{name:"金昌"},{name:"白银"},{name:"天水"},{name:"武威"},{name:"张掖"},{name:"平凉"},{name:"酒泉"},{name:"定西"},{name:"陇南"},{name:"临夏回族自治州"},{name:"合作"},{name:"西宁"},{name:"海东地区"},{name:"海北藏族自治州"},{name:"黄南藏族自治州"},{name:"海南藏族自治州"},{name:"果洛藏族自治州"},{name:"玉树藏族自治州"},{name:"海西蒙古族藏族自治州"},{name:"银川"},{name:"石嘴山"},{name:"吴忠"},{name:"固原"},{name:"中卫"},{name:"乌鲁木齐"},{name:"克拉玛依"},{name:"吐鲁番地区"},{name:"哈密地区"},{name:"昌吉回族自治州"},{name:"博尔塔拉蒙古自治州"},{name:"巴音郭楞蒙古自治州"},{name:"阿克苏地区"},{name:"喀什地区"},{name:"和田地区"},{name:"伊宁"},{name:"奎屯"},{name:"阿勒泰地区"},{name:"石河子"},{name:"阿拉尔"},{name:"图木舒克"},{name:"五家渠"},{name:"台北"},{name:"高雄"},{name:"台南"},{name:"台中"},{name:"金门县"},{name:"南投县"},{name:"基隆"},{name:"新竹"},{name:"嘉义"},{name:"新北"},{name:"香港岛"},{name:"九龙"},{name:"新界"},{name:"澳门半岛"},{name:"离岛"},{name:"海外"},{name:"中山"}],SF.cityInfo}),function(e){"use strict";function t(t,n){this.itemsArray=[],this.$element=e(t),this.$element.hide(),this.isSelect="SELECT"===t.tagName,this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=e('<div class="bootstrap-tagsinput"></div>'),this.$input=e('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container);var r=(this.inputSize<3?3:this.inputSize)+"em";this.$input.get(0).style.cssText="width: "+r+" !important;",this.build(n)}function n(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(e){return e[n]}}}function r(e,t){if("function"!=typeof e[t]){var n=e[t];e[t]=function(){return n}}}function o(e){return e?l.text(e).html():""}function i(e){var t=0;if(document.selection){e.focus();var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t}function a(t,n){var r=!1;return e.each(n,function(e,n){if("number"==typeof n&&t.which===n)return r=!0,!1;if(t.which===n.which){var o=!n.hasOwnProperty("altKey")||t.altKey===n.altKey,i=!n.hasOwnProperty("shiftKey")||t.shiftKey===n.shiftKey,a=!n.hasOwnProperty("ctrlKey")||t.ctrlKey===n.ctrlKey;if(o&&i&&a)return r=!0,!1}}),r}var s={tagClass:function(e){return""},itemValue:function(e){return e?e.toString():e},itemText:function(e){return this.itemValue(e)},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44,32],onTagExists:function(e,t){t.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};t.prototype={constructor:t,add:function(t,n){var r=this;if(!(r.options.maxTags&&r.itemsArray.length>=r.options.maxTags)&&(t===!1||t)){if("string"==typeof t&&r.options.trimValue&&(t=e.trim(t)),"object"==typeof t&&!r.objectItems)throw"Can't add objects when itemValue option is not set";if(!t.toString().match(/^\s*$/)){if(r.isSelect&&!r.multiple&&r.itemsArray.length>0&&r.remove(r.itemsArray[0]),"string"==typeof t&&"INPUT"===this.$element[0].tagName){var i=t.split(",");if(i.length>1){for(var a=0;a<i.length;a++)this.add(i[a],!0);return void(n||r.pushVal())}}var s=r.options.itemValue(t),l=r.options.itemText(t),c=r.options.tagClass(t),u=e.grep(r.itemsArray,function(e){return r.options.itemValue(e)===s})[0];if(!u||r.options.allowDuplicates){if(!(r.items().toString().length+t.length+1>r.options.maxInputLength)){var p=e.Event("beforeItemAdd",{item:t,cancel:!1});if(r.$element.trigger(p),!p.cancel){r.itemsArray.push(t);var d=e('<span class="tag '+o(c)+'">'+o(l)+' <span class="fa fa-times" data-role="remove"></span></span>');if(d.data("item",t),r.findInputWrapper().before(d),d.after(" "),r.isSelect&&!e('option[value="'+encodeURIComponent(s)+'"]',r.$element)[0]){var h=e("<option selected>"+o(l)+"</option>");h.data("item",t),h.attr("value",s),r.$element.append(h)}n||r.pushVal(),r.options.maxTags!==r.itemsArray.length&&r.items().toString().length!==r.options.maxInputLength||r.$container.addClass("bootstrap-tagsinput-max"),r.$element.trigger(e.Event("itemAdded",{item:t}))}}}else if(r.options.onTagExists){var f=e(".tag",r.$container).filter(function(){return e(this).data("item")===u});r.options.onTagExists(t,f)}}}},remove:function(t,n){var r=this;if(r.objectItems&&(t="object"==typeof t?e.grep(r.itemsArray,function(e){return r.options.itemValue(e)==r.options.itemValue(t)}):e.grep(r.itemsArray,function(e){return r.options.itemValue(e)==t}),t=t[t.length-1]),t){var o=e.Event("beforeItemRemove",{item:t,cancel:!1});if(r.$element.trigger(o),o.cancel)return;e(".tag",r.$container).filter(function(){return e(this).data("item")===t}).remove(),e("option",r.$element).filter(function(){return e(this).data("item")===t}).remove(),e.inArray(t,r.itemsArray)!==-1&&r.itemsArray.splice(e.inArray(t,r.itemsArray),1)}n||r.pushVal(),r.options.maxTags>r.itemsArray.length&&r.$container.removeClass("bootstrap-tagsinput-max"),r.$element.trigger(e.Event("itemRemoved",{item:t}))},removeAll:function(){var t=this;for(e(".tag",t.$container).remove(),e("option",t.$element).remove();t.itemsArray.length>0;)t.itemsArray.pop();t.pushVal()},refresh:function(){var t=this;e(".tag",t.$container).each(function(){var n=e(this),r=n.data("item"),i=t.options.itemValue(r),a=t.options.itemText(r),s=t.options.tagClass(r);if(n.attr("class",null),n.addClass("tag "+o(s)),n.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=o(a),t.isSelect){var l=e("option",t.$element).filter(function(){return e(this).data("item")===r});l.attr("value",i)}})},items:function(){return this.itemsArray},pushVal:function(){var t=this,n=e.map(t.items(),function(e){return t.options.itemValue(e).toString()});t.$element.val(n,!0).trigger("change")},build:function(t){var o=this;if(o.options=e.extend({},s,t),o.objectItems&&(o.options.freeInput=!1),n(o.options,"itemValue"),n(o.options,"itemText"),r(o.options,"tagClass"),o.options.typeahead){var l=o.options.typeahead||{};r(l,"source"),o.$input.typeahead(e.extend({},l,{source:function(t,n){function r(e){for(var t=[],r=0;r<e.length;r++){var a=o.options.itemText(e[r]);i[a]=e[r],t.push(a)}n(t)}this.map={};var i=this.map,a=l.source(t);e.isFunction(a.success)?a.success(r):e.isFunction(a.then)?a.then(r):e.when(a).then(r)},updater:function(e){o.add(this.map[e])},matcher:function(e){return e.toLowerCase().indexOf(this.query.trim().toLowerCase())!==-1},sorter:function(e){return e.sort()},highlighter:function(e){var t=new RegExp("("+this.query+")","gi");return e.replace(t,"<strong>$1</strong>")}}))}if(o.options.typeaheadjs){var c=o.options.typeaheadjs||{};o.$input.typeahead(null,c).on("typeahead:selected",e.proxy(function(e,t){c.valueKey?o.add(t[c.valueKey]):o.add(t),o.$input.typeahead("val","")},o))}o.$container.on("click",e.proxy(function(e){o.$element.attr("disabled")||o.$input.removeAttr("disabled"),o.$input.focus()},o)),o.options.addOnBlur&&o.options.freeInput&&o.$input.on("focusout",e.proxy(function(t){0===e(".typeahead, .twitter-typeahead",o.$container).length&&(o.add(o.$input.val()),o.$input.val(""))},o)),o.$container.on("keydown","input",e.proxy(function(t){var n=e(t.target),r=o.findInputWrapper();if(o.$element.attr("disabled"))return void o.$input.attr("disabled","disabled");switch(t.which){case 8:if(0===i(n[0])){var a=r.prev();a&&o.remove(a.data("item"))}break;case 46:if(0===i(n[0])){var s=r.next();s&&o.remove(s.data("item"))}break;case 37:var l=r.prev();0===n.val().length&&l[0]&&(l.before(r),n.focus());break;case 39:var c=r.next();0===n.val().length&&c[0]&&(c.after(r),n.focus())}var u=n.val().length;Math.ceil(u/5);n.attr("size",Math.max(this.inputSize,n.val().length))},o)),o.$container.on("keypress","input",e.proxy(function(t){var n=e(t.target);if(o.$element.attr("disabled"))return void o.$input.attr("disabled","disabled");var r=n.val(),i=o.options.maxChars&&r.length>=o.options.maxChars;o.options.freeInput&&(a(t,o.options.confirmKeys)||i)&&(o.add(i?r.substr(0,o.options.maxChars):r),n.val(""),t.preventDefault());var s=n.val().length;Math.ceil(s/5);n.attr("size",Math.max(this.inputSize,n.val().length))},o)),o.$container.on("click","[data-role=remove]",e.proxy(function(t){o.$element.attr("disabled")||o.remove(e(t.target).closest(".tag").data("item"))},o)),o.options.itemValue===s.itemValue&&("INPUT"===o.$element[0].tagName?o.add(o.$element.val()):e("option",o.$element).each(function(){o.add(e(this).attr("value"),!0)}))},destroy:function(){var e=this;e.$container.off("keypress","input"),e.$container.off("click","[role=remove]"),e.$container.remove(),e.$element.removeData("tagsinput"),e.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],n=this.$container[0];t&&t.parentNode!==n;)t=t.parentNode;return e(t)}},e.fn.tagsinput=function(n,r){var o=[];return this.each(function(){var i=e(this).data("tagsinput");if(i)if(n||r){if(void 0!==i[n]){var a=i[n](r);void 0!==a&&o.push(a)}}else o.push(i);else i=new t(this,n),e(this).data("tagsinput",i),o.push(i),"SELECT"===this.tagName&&e("option",e(this)).attr("selected","selected"),e(this).val(e(this).val())}),"string"==typeof n?o.length>1?o:o[0]:o},e.fn.tagsinput.Constructor=t;var l=e("<div />")}(window.jQuery),define("tagsinput",["jquery","bootstrap"],function(e){return function(){var t;return t||e.$.fn.tagsinput}}(this)),define("autoComplete",["jquery","template","sfModal","cityInfoLite","underscore","tagsinput"],function(e,t,n,r){"use strict";e.fn.autoComplete=function(r){var o,i,a,s,l,c,u,p,d,h,f;a=function(t){h.onEmpty&&l.append(h.onEmpty+t+"</strong></a></li>"),l.delegate(".createNewTag","click",function(){l.hide(),e(f).val(""),n({title:"创建标签",content:'<form id="tag"><input type="text" name="name" id="tagName" class="form-control mb20" value="'+t+'" placeholder="标签名称"><textarea name="text" id="tagText" placeholder="请对此标签补充一些描述资料, 以供他人参考" class="form-control" rows="5"></textarea></form>',doneFn:function(){e.post("/api/tags/add",{name:e("#tagName").val(),text:e("#tagText").val()},function(e){var t;0===e.status&&(h.onEnter.call(f,e.data),t=null,n("hide"))})}})})},o=function(t,n){var r,o,i,s,c,u;for(i=h.onResult(t,n),r=!1,s=!1,i.forEach(function(e){e.name===n&&(s=!0)}),h.canCreate&&"tag"===h.dataType&&(i&&0!==i.length||a(n)),f.trigger("dropdown"),l.html(""),c=0;c<i.length;)u=e(h.resultsFormatter(i[c],n)).data("data",i[c]).appendTo(l).click(function(){var t,n;n=e(this).data("data"),n&&(h.onEnter.call(f,n),t=null,l.hide())}),!r&&h.preSelect&&(u.addClass(h.currentClass),o=i[c],r=!0),c++;h.canCreate&&("tag"!==h.dataType||s||a(n))},h=e.extend({dataType:"tag",className:"autoComplete-list dropdown-menu",currentClass:"active",preSelect:!0,cache:!0,searchParam:"q",do:"search",insertAfter:null,button:null,url:null,canCreate:!0,onResult:function(e){var t,n;return n=[],t=[],e.data.forEach(function(e){if(t.indexOf(e.id)===-1)return"city"===h.dataType?(n.push({city:e}),t.push(e)):(n.push(e),t.push(e.id))}),n},onLoading:null,onEnter:function(t){var n,o,i,a,s;if("tag"===h.dataType){if(s=!1,n=null,a=[],e(".bootstrap-tagsinput .tag").each(function(){var r,o;r=e(this).data("name"),o=e(this).data("id"),a.push(r+":"+o),t.name===r&&(n=e(this).parents("li"),s=!0)}),s)return o=e(this),void o.val("");a.push(t.name+":"+t.id),r&&r.onAfterEnter&&r.onAfterEnter(t),window.localStorage&&(i="autoSaveTags_"+location.pathname+location.search,localStorage.setItem(i,a))}e(this).parents(".bootstrap-tagsinput").siblings(".tagsInput").tagsinput("add",t),e(this).val("")},resultsFormatter:function(e,n){var r,o;return"tag"===h.dataType?(n.indexOf("+")!==-1&&(n=n.replace(/\+/g,"")),r=new RegExp(n),e.nameHtml=e.name.replace(r,"<strong>"+n+"</strong>"),o=e.iconUrl?'<li><a href="javascript:void(0);"><img class="mr10" style="max-height:16px;" src="{{iconUrl}}" />{{nameHtml}}</a></li>':'<li><a href="javascript:void(0);">{{nameHtml}}</a></li>',t(o,e)):"city"===h.dataType?'<li><a href="javascript:void(0);">'+e.city+"</a></li>":void 0}},r),d="",f=this,i={},p=void 0,c=!1,u=!1,l=e('<ul class="'+h.className+'"></ul>').insertAfter(h.insertAfter?h.insertAfter:this).hide().hover(function(){u=!0},function(){u=!1}),s=void 0,h.url||("tag"===h.dataType&&(h.url="/api/tags/search",h.onEmpty='<li><a href="javascript:void(0)" class="createNewTag">创建标签 <strong>'),"city"===h.dataType&&(h.url="",h.source=_.map(SF.cityInfo,function(e){return e.name}))),this.focus(function(){var t;"city"!==h.dataType||e(this).siblings(".tag.label").length||(t=f.parents(".bootstrap-tagsinput").siblings("input[name=cities]").data("tags"),o({data:["北京","上海","广州","深圳","杭州","成都","南京","武汉","西安"]},""),l.show().css({left:0})),c=!0,f.css("text-transform","lowercase"),p=setInterval(function(){var t,n,r,a,c,u;return u=f.val().trim().toLowerCase(),t=u.match(/[^0-9a-zA-Z\u4e00-\u9fa5#,' ，._\-\+]/g),t&&0!==t.length?void f.val(""):(","!==u.slice(-1)&&"，"!==u.slice(-1)||(u=u.replace(/[,，]/g,""),f.val(u),l.find(".active").click()),void(u!==d&&(n=void 0,"tag"===h.dataType?(n=e(f).offset().left-e(f).parents(".bootstrap-tagsinput").offset().left,l.css("left",n)):"job"===h.dataType&&l.css("left",15),l.show(),s=null,u.length>0?(h.onLoading&&h.onLoading.call(f),i[u]?o(i[u],u):(c={},u.indexOf("<")===-1?c[h.searchParam]=u:c[h.searchParam]=" ",h.url.length>0?e.getJSON(h.url,c,function(e){h.cache&&(i[u]=e),o(e,u)}):(r=_.filter(h.source,function(e){return e.indexOf(c.q)!==-1}),a={data:r},h.cache&&(i[u]=a),o(a,u)))):l.hide().html(""),d=u)))},200)}).blur(function(){var t;c=u||!1,p&&(clearInterval(p),p=null),"disabled"!==e(this).attr("disabled")&&e(this).val(""),d="",t=setTimeout(function(){c||l.hide(),clearTimeout(t),t=null},200)}).keydown(function(t){var n,r,o,i;switch(n=e("."+h.currentClass,l),r=t.charCode||t.keyCode||t.which){case 38:n.length>0?(i=n.prev(),n.removeClass(h.currentClass),(i.length>0||!h.preSelect?i:e("*:last",l)).addClass(h.currentClass)):e("*:last",l).addClass(h.currentClass);break;case 40:n.length>0?(o=n.next(),n.removeClass(h.currentClass),(o.length>0||!h.preSelect?o:e("*:first",l)).addClass(h.currentClass)):e("*:first",l).addClass(h.currentClass);break;case 13:return n.find("a").trigger("click"),!1;case 32:return n.find("a").trigger("click"),!1}s=e("."+h.currentClass,l).data("data")})}}),define("sf_typeHelperExtend",[],function(){var e;return e={realm:function(e){var t,n,r,o,i;return o=e.$input,r=$("#realmTags"),n=r.find(".js-close"),t=$("#realmTags input[type=checkbox]"),i=function(){return e.result.length===e.opt.maxNum?t.not(":checked").attr("disabled","disabled"):t.not(":checked").removeAttr("disabled")},i(),o.on("focus",function(){return r.show()}),n.on("click",function(){return r.hide()}),e.opt.afterAdd=function(e){return $("input[data-id="+e.id+"]").prop("checked",!0),i()},e.opt.afterRemove=function(e){return $("input[data-id="+e.id+"]").prop("checked",!1),i()},t.change(function(){var t,n,r;return n=$(this).data("id"),r=$(this).val(),t={name:r,id:n},$(this).prop("checked")?e.add(t):e.remove(t),i()})},techTag:function(e){var t,n,r,o;return n=e.$container.next(".techTags-panel"),r=n.find(".close"),t=n.find(".tag"),e.$container.find(".sf-typeHelper-input").on("focus",function(){var e;return $(".techTags-panel").hide(),e=n.find(".tab-pane"),e.removeClass("active"),e.eq(0).addClass("active"),n.show(),n.find(".nav-tabs li:first-child a").trigger("click")}),$("body").on("click",function(e){if(0===$(e.target).parents(".techTags-panel").length&&0===$(e.target).parents(".sf-typeHelper").length&&!$(e.target).hasClass("sf-typeHelper"))return n.hide()}),o=function(){return $(window).width()-$(".techTags").width()-$(".techTags").offset().left<0},e.opt.afterAdd=function(t){var r,i;if(t&&(r=$(".tagsInput"),r.length))return i=r.val(),i?r.val(i+","+t.id):r.val(t.id),r.trigger("change"),o()?(n.css("right",0),n.css("left","auto")):n.css("left",e.$input.position().left+"px")},e.opt.afterRemove=function(t){var r,i,a;if(t&&(r=$(".tagsInput"),r.length))return a=r.val().split(","),i=a.indexOf(t.id+""),i!==-1&&a.splice(i,1),r.val(a.join(",")),r.trigger("change"),o()?(n.css("right",0),n.css("left","auto")):n.css("left",e.$input.position().left+"px")},e.opt.beforeAdd=function(e){return e.hasOwnProperty("url")||(e.url="/t/"+e.name),e},t.click(function(t){var n,r,o;return o=$(this).data("tag"),r=-1,e.result.forEach(function(e,t){if(~~e.id===~~o.id)return r=t}),r!==-1?(n=e.$container.find(".sf-typeHelper-item").eq(r),n.css("background-color","#FFF2AB"),setTimeout(function(){return n.addClass("blink")},1),setTimeout(function(){return n.css("background-color","#E7F2ED")},1e3)):e.result.length===e.opt.maxNum&&0!==e.opt.maxNum?t.preventDefault():e.add(o)})},cityTag:function(e){var t,n;return n=e,e.opt.emptyTip="未找到 {{query}}，你是不是在",t=[],t.push({id:"990100",name:"海外",pinyin:"haiwai",short:"hw",rank:"3"}),t.push({id:"999999",name:"其它",pinyin:"qita",short:"qt",rank:"0"}),e.opt.emptyDefault=t,e}}}),function(e,t){var n,r;return r={initData:[],remoteData:[],inputTpl:'<span class="sf-typeHelper-item <%= itemClass %> "><% if (typeof(iconUrl)!=="undefined" && iconUrl!=="") { %><img src="<%= iconUrl %>"><% } %><%= name %><span data-role="remove">&times;</span></span>',tpl:"<li data-id='<%= id %>' ><a data-role='typeHelper' href='javascript:;'><% if (typeof(img)!='undefined'){ %> <img class='avatar-24' src='<%= img %>'> <% } %> <%= name.replace(query,'<strong>' + query + '</strong>') %> </a></li>",maxNum:5,confirmKeys:[13,44,32],emptyTip:"",emptyDefault:[],for:"tags",emptyFunc:function(){},afterAdd:function(){},afterRemove:function(){},beforeAdd:function(){}},n=function(n,o){return 0===e(n).length?void console.warn("element not found in DOM"):(t.each(r,function(e,t){var n;return o[t]=null!=(n=o[t])?n:e}),this.opt=o,this.items=[],this.result=[],this.query="",this.$element=e(n),this.$element.addClass("hidden"),n.hasAttribute("placeholder")?this.placeholderText=this.$element.attr("placeholder"):this.placeholderText="",this.$container=e('<div class="sf-typeHelper"></div>'),this.$input=e('<input type="text" data-role="sf_typeHelper-input" class="sf-typeHelper-input" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$list=e('<ul class="sf-typeHelper-list dropdown-menu"></ul>'),this.$element.after(this.$container),this.$container.append(this.$list),this.build(o))},n.prototype={constructor:n,formatter:function(e){var n;return e=null!=e?e:[],n=t.map(e,function(e,t){var n,r,o,i;return"object"!=typeof e&&(n={},n.name=e,n.id=t,e=n),e.name=null!=(r=e.name)?r:e,e.id=null!=(o=e.id)?o:t,e.img=null!=(i=e.img)?i:e.avatarUrl,e})},getRemoteData:function(n,r){var o,i;return i=this,o=[],"object"!=typeof i.opt.remoteData?(i.timer&&clearTimeout(i.timer),i.timer=setTimeout(function(){return e.ajax({url:i.opt.remoteData,data:{q:n},dataType:"json",success:function(e){if(o=e.data,o=i.formatter(o),r)return r(o)}})},300)):(o=i.formatter(i.opt.remoteData),o=t.filter(o,function(e){return e.name.search(n)!==-1}),r?r(o):void 0)},renderList:function(e){var n,r;return r=this,e.length>0?r.getRemoteData(e,function(n){var o;return n=t.difference(n,r.result),0===n.length&&r.opt.emptyTip.length>0&&(n.push({id:-1,name:r.opt.emptyTip.replace("{{query}}",e)}),r.opt.emptyDefault.length>0&&t.each(r.opt.emptyDefault,function(e,t){return n.push(e)})),r.items=n,o=t.reduce(n,function(n,o){return o.query=e,n+t.template(r.opt.tpl)(o)},""),o.length>0?r.$list.show():r.$list.hide(),r.$list.html(o),r.$list.find("li:first").addClass("active"),r.$list.css("left",r.$input.position().left+"px"),r.$container.next(".panel").hide()}):(n="",r.$list.hide(),r.$list.html(n))},renderInput:function(){var e,n,r;return r=this,r.$container.find(".sf-typeHelper-item").remove(),r.$container.find(".sf-typeHelper-item-single").remove(),n="",1===r.opt.maxNum&&(n="sf-typeHelper-item-single btn btn-default",r.opt.maxNum===r.result.length?this.$container.addClass("sf-typeHelper-single"):this.$container.removeClass("sf-typeHelper-single")),r.opt.inputTpl.length>0&&(e=t.reduce(r.result,function(e,o){return o.itemClass=n,e+t.template(r.opt.inputTpl)(o)},""),r.$container.prepend(e)),0!==r.opt.maxNum&&r.result.length>0&&0!==r.$container.next(".realms").length?(r.$input.attr("placeholder",""),r.$input.css("width","10px"),!1):(r.$input.attr("placeholder",this.placeholderText),
this.placeholderText.length>0?r.$input.css("width",r.placeholderText.length+"em"):r.$input.css("width","auto"))},add:function(e){var t;if(t=this,t.opt.beforeAdd&&t.opt.beforeAdd(e,t),t.$list.trigger("hide"),t.result.push(e),t.renderInput(),t.opt.afterAdd)return t.opt.afterAdd(e,t)},remove:function(e){var n;if(n=this,n.result=t.filter(n.result,function(t){return t.name!==e.name}),n.renderInput(),n.opt.afterRemove)return n.opt.afterRemove(e,n)},init:function(e){var t;return t=this,t.result=t.formatter(e.initData),t.renderInput()},build:function(n){var r;r=this,window.chinese=!1,n.initData.length>0?r.init(n):r.renderInput(),n.for&&r.$container.addClass("sf-typeHelper--for"+n.for),1===n.maxNum&&r.$container.addClass("sf-typeHelper--single"),r.$container.on("click",function(){return r.$container.trigger("focus"),r.$input.trigger("focus")}),r.$list.on("hide",function(){return r.$input.val(""),r.renderList(""),r.query=""}),r.$input.on("compositionstart",function(){return window.chinese=!0}),r.$input.on("compositionend",function(){return window.chinese=!1}),r.$input.on("keydown",function(e){var n;if(n=e.keyCode,8===n&&0===r.query.length&&(r.remove(t.last(r.result)),r.renderInput()),13===n&&e.preventDefault(),r.result.length===r.opt.maxNum&&0!==r.opt.maxNum)return e.preventDefault()}),r.$input.on("change",function(e){}),r.$input.on("keyup",function(n){var o,i,a,s;if(!window.chinese&&(r.result.length!==r.opt.maxNum||0===r.opt.maxNum))switch(r.query=e(this).val(),s=n.keyCode,i=function(){var e,n;if(e=r.$list.find("li.active").index(),n=r.items[e],(186===s||188===s)&&"tags"===r.opt.for){var o,i=r.query.length;if(o=","===r.query[i-1]||";"===r.query[i-1]?r.query.substring(0,i-1):r.query,o!==r.items[0].name)return r.opt.emptyFunc&&r.opt.emptyFunc(o,r),r.$list.trigger("hide")}var a=t.find(r.result,function(e){return e.id===n.id});if(n&&n.id!==-1&&!a)r.add(n);else{if(a){var l,c,u;return u=n,c=-1,r.result.forEach(function(e,t){if(~~e.id===~~u.id)return c=t}),l=r.$container.find(".sf-typeHelper-item").eq(c),l.css("background-color","#FFF2AB"),setTimeout(function(){return l.addClass("blink")},1),setTimeout(function(){return l.css("background-color","#E7F2ED")},1e3)}r.opt.emptyFunc&&r.opt.emptyFunc(r.query,r)}return r.$list.trigger("hide")},s){case 8:return r.renderList(r.query);case 188:return i();case 186:return i();case 13:return i();case 38:if(o=r.$list.find("li.active"),a=o.index(),a>0)return o.removeClass("active"),o.prev("li").addClass("active");break;case 40:if(o=r.$list.find("li.active"),a=o.index(),a<r.items.length-1)return o.removeClass("active"),o.next("li").addClass("active");break;default:return r.renderList(r.query)}}),e("body").on("click",function(t){var n,o;if(n=e(t.target),o=n.attr("data-role"),"typeHelper"!==o)return r.$list.trigger("hide")}),r.$container.on("click","[data-role=remove]",function(){var t,n,o,i;return t=e(this),n=t.closest(".sf-typeHelper-item"),i=n.index(),o=r.result[i],r.remove(o)}),r.$list.on("click","li",function(){var n,o;n=e(this).index(),o=r.items[n];var i=t.find(r.result,function(e){return e.id===o.id});if(o&&o.id!==-1&&!i)r.add(o);else{if(i){var a,s,l;return l=o,s=-1,r.result.forEach(function(e,t){if(~~e.id===~~l.id)return s=t}),a=r.$container.find(".sf-typeHelper-item").eq(s),a.css("background-color","#FFF2AB"),setTimeout(function(){return a.addClass("blink")},1),setTimeout(function(){return a.css("background-color","#E7F2ED")},1e3)}r.opt.emptyFunc&&r.opt.emptyFunc(r.query,r)}return r.$list.trigger("hide")})}},e.fn.typeHelper=function(t){return new n(e(this)[0],t)}}($,_),define("sf_typeHelper",["jquery","underscore"],function(e){return function(){var t;return t||e.$.fn.typeHelper}}(this)),define("publish",["jquery","sf_typeHelperExtend","sfModal","sf_typeHelper","jquery_cookie"],function(e,t,n){"use strict";var r,o,i,a;o=e("input[name=tags]"),o.length>0&&(a=o.typeHelper({maxNum:5,initData:o.data("init"),remoteData:"/api/tags/search",emptyTip:"创建标签 <strong>{{query}}</strong>",emptyFunc:function(t,r){n({title:"创建标签",content:'<form id="tag"><input type="text" name="name" id="tagName" class="form-control mb20" value="'+t+'" placeholder="标签名称"><textarea name="text" id="tagText" placeholder="请对此标签补充一些描述资料, 以供他人参考" class="form-control" rows="5"></textarea></form>',doneFn:function(){e.post("/api/tags/add",{name:e("#tagName").val(),text:e("#tagText").val()},function(e){0===e.status&&(r.add(e.data),n("hide"))})}})}}),t.techTag(a),r=[],o.data("init")&&o.data("init").length&&(o.data("init").forEach(function(e){return r.push(e.id)}),o.val(r.join(",")))),e("#myTitle").focus(),i=e(window).height()-520,i>420&&(e(".editor").css("min-height",i+"px"),e("#myEditor").css("min-height",i+"px")),"false"===e.cookie("dontlikeShare")?e("#shareToWeibo").attr("checked","checked"):e("#shareToWeibo").removeAttr("checked"),e("#shareToWeibo").click(function(t){return hasBindWeibo?void(e("#shareToWeibo:checked").length>0?e.cookie("dontlikeShare",!1,{path:"/"}):e.cookie("dontlikeShare",!0,{path:"/"})):void window.open("/user/oauth/weibo")}),"false"===e.cookie("dontlikeLicence")?e("#license").attr("checked","checked"):e("#license").removeAttr("checked"),e("#license").click(function(t){e("#license:checked").length>0?e.cookie("dontlikeLicence",!1,{path:"/"}):e.cookie("dontlikeLicence",!0,{path:"/"})})}),requirejs(["jquery","getRelated","Editor","autoSave","autoComplete","publish","main"],function(e,t,n,r){"use strict";var o,i,a;i='<li><a href="{{url}}" class="mr10">{{acceptedWord}} {{title}}</a><span class="text-muted">{{answers}} 个回答</span></li>',a=void 0,e("#myTitle").keydown(function(){a&&clearTimeout(a),a=setTimeout(function(){t(e("#myTitle").val(),i,"#qList",'<p class="mb0 text-muted">没有找到相似问题</p>')},500)}),e(".widget-suggest__close").click(function(){e("#titleSuggest").addClass("hidden"),clearTimeout(a),e("#myTitle").off("keydown")}),o=new n,e("#myEditor").attr("placeholder","1. 描述你的问题\n\n2. 贴上相关代码（请勿用图片代替代码）\n\n3. 贴上报错信息\n\n4. 已经尝试过哪些方法仍然没解决（附上相关链接）"),o.render("#myEditor"),r.bind(o,function(){var t;this.do="saveQuestion",this.type="question",this.title=e("#myTitle").val(),this.text=o.getVal(),this.weibo=e("#shareToWeibo:checked").length,this.id=e("#draftId").val(),t=e(".tagsInput").val().split(","),this.tags=t}),document.cookie.indexOf("typemode")>0&&(e("#myEditor").removeClass("hidden").addClass("form-control").attr("rows","14"),e(".editor").removeClass("editor")),e("#question").submit(function(t){var n,r,i;t.preventDefault(),n=e("#publishIt"),i=e(".tagsInput").val().split(","),n.text("加载中").attr("disabled","disabled"),r={title:e("#myTitle").val(),text:o.getVal(),tags:i,weibo:e("#shareToWeibo:checked").length,draftId:e("#draftId").val(),siteId:e("#siteId").val()},e.post("/api/questions/add",r,function(e){0===e.status?(window.localStorage&&localStorage.removeItem("autoSaveContent_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTitle_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTag_"+location.pathname),r.weibo?location.href=e.data.url+"#shareToWeibo":location.href=e.data.url):n.text(n.data("text")).removeAttr("disabled")},"json")}),e("#publishIt").click(function(){return e("#question").submit()}),function(){var t=["### 问题描述\n\n\n### 问题出现的环境背景及自己尝试过哪些方法\n\n\n### 相关代码\n// 请把代码文本粘贴到下方（请勿用图片代替代码）\n\n\n### 你期待的结果是什么？实际看到的错误信息又是什么？\n","### 题目描述\n\n\n### 题目来源及自己的思路\n\n\n### 相关代码\n// 请把代码文本粘贴到下方（请勿用图片代替代码）\n\n\n### 你期待的结果是什么？实际看到的错误信息又是什么？\n","### 问题描述\n\n\n### 问题出现的平台版本及自己尝试过哪些方法\n\n\n### 相关代码\n// 请把代码文本粘贴到下方（请勿用图片代替代码）\n\n\n### 你期待的结果是什么？实际看到的错误信息又是什么？\n"];e("#issueTemplateId").change(function(){var n=+e("#issueTemplateId").val()-1;if(n!==-1){var r=o.getVal();o.setVal(r+t[n])}})}()}),define("qa_ask",function(){});